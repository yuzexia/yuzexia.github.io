{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/img/avatar.jpeg","path":"img/avatar.jpeg","modified":0,"renderable":0},{"_id":"source/img/404-bg.jpg","path":"img/404-bg.jpg","modified":0,"renderable":0},{"_id":"themes/beantech/source/css/beantech.css","path":"css/beantech.css","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/archive.styl","path":"css/archive.styl","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/beantech.min.css","path":"css/beantech.min.css","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/highlight.styl","path":"css/highlight.styl","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/hux-blog.min.css","path":"css/hux-blog.min.css","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/signature.styl","path":"css/signature.styl","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/toc.styl","path":"css/toc.styl","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/widget.styl","path":"css/widget.styl","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/rocket.styl","path":"css/rocket.styl","modified":0,"renderable":1},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.eot","path":"fonts/glyphicons-halflings-regular.eot","modified":0,"renderable":1},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.ttf","path":"fonts/glyphicons-halflings-regular.ttf","modified":0,"renderable":1},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.woff","path":"fonts/glyphicons-halflings-regular.woff","modified":0,"renderable":1},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.woff2","path":"fonts/glyphicons-halflings-regular.woff2","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/bootstrap.min.js","path":"js/bootstrap.min.js","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/hux-blog.js","path":"js/hux-blog.js","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/hux-blog.min.js","path":"js/hux-blog.min.js","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/jquery.nav.js","path":"js/jquery.nav.js","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/jquery.tagcloud.js","path":"js/jquery.tagcloud.js","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/toc.js","path":"js/toc.js","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/totop.js","path":"js/totop.js","modified":0,"renderable":1},{"_id":"source/img/header_img/Iron-Man-3.jpg","path":"img/header_img/Iron-Man-3.jpg","modified":0,"renderable":0},{"_id":"themes/beantech/source/css/bootstrap.min.css","path":"css/bootstrap.min.css","modified":0,"renderable":1},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.svg","path":"fonts/glyphicons-halflings-regular.svg","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/bootstrap.js","path":"js/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/beantech/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1},{"_id":"source/img/contact-bg.jpg","path":"img/contact-bg.jpg","modified":0,"renderable":0},{"_id":"source/img/signature/BeanTechSign-white.png","path":"img/signature/BeanTechSign-white.png","modified":0,"renderable":0},{"_id":"themes/beantech/source/css/bootstrap.css","path":"css/bootstrap.css","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/images/ironman.png","path":"css/images/ironman.png","modified":0,"renderable":1},{"_id":"themes/beantech/source/css/images/rocket.png","path":"css/images/rocket.png","modified":0,"renderable":1},{"_id":"source/img/header_img/tf-logo-dark.png","path":"img/header_img/tf-logo-dark.png","modified":0,"renderable":0},{"_id":"themes/beantech/source/js/jquery.js","path":"js/jquery.js","modified":0,"renderable":1},{"_id":"source/img/signature/BeanTechSign-black.png","path":"img/signature/BeanTechSign-black.png","modified":0,"renderable":0},{"_id":"source/img/header_img/tag-bg.png","path":"img/header_img/tag-bg.png","modified":0,"renderable":0},{"_id":"source/img/beantech-desktop.png","path":"img/beantech-desktop.png","modified":0,"renderable":0},{"_id":"source/img/header_img/home-bg-o.png","path":"img/header_img/home-bg-o.png","modified":0,"renderable":0},{"_id":"source/img/header_img/home-bg-2-dark.png","path":"img/header_img/home-bg-2-dark.png","modified":0,"renderable":0},{"_id":"source/img/header_img/archive-bg.png","path":"img/header_img/archive-bg.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"53435147225cf46fd5fa7c892ff393c10531cfb2","modified":1543480444327},{"_id":"source/404.md","hash":"83c2c6d587beaa967a976e5969d60fa97fcdbe55","modified":1543477276920},{"_id":"source/CNAME","hash":"55d5b0b4757a7d65ee4966dd161f394d06d257b7","modified":1543477276920},{"_id":"themes/beantech/LICENSE","hash":"2b209f06bebeb2a8c2b7e187e436f3e1e1fbc8a7","modified":1543477276985},{"_id":"themes/beantech/_config.yml","hash":"6afd65c055d9b1c70ae67323cc869f1b4aa60348","modified":1543477276985},{"_id":"source/_posts/.DS_Store","hash":"1976d78977f136b9dfb46a5d50dbf615bd26554b","modified":1546947783663},{"_id":"source/_posts/Float.md","hash":"d89d6f056e0411ac29a1da2918a082b7ec5e47e8","modified":1544715940843},{"_id":"source/_posts/React入门.md","hash":"ad30e03ee79a88ce987b4de14592659ac3b3b4fd","modified":1543544598230},{"_id":"source/_posts/Location-Object.md","hash":"a313a5e0947a0a688db2dd4fd27636c0da81dff5","modified":1543478052463},{"_id":"source/_posts/cartoon Redux.md","hash":"7664f44eba3396eceda59fbe29b858aa4fc1fc37","modified":1543478052464},{"_id":"source/_posts/contenteditable.md","hash":"4cdaee9c5936cd8823ffb9333316523348fd9df2","modified":1543478052464},{"_id":"source/_posts/hexo-theme-beantech.md","hash":"8aa4bffe04fceed5b676692ec5cf3ea150dc1f6e","modified":1543477276920},{"_id":"source/_posts/react-native-1.md","hash":"190a3cad05ab4210e6ef890834a06887bc27f01e","modified":1543478052465},{"_id":"source/_posts/shell命令实现批量精准剪切视频.md","hash":"538301e7e9dabb3e46cc3649ec6f42f62c7a70b6","modified":1545276292101},{"_id":"source/_posts/ueditor去除自动保存-md.md","hash":"5665bdefc34130419eed0dcff745b50f5f178b39","modified":1543483376147},{"_id":"source/_posts/使用webpack从零开始搭建react项目.md","hash":"bb5343b8ca01f60be73fafcd526aa6fbadf2f3a5","modified":1545374728825},{"_id":"source/_posts/string-function.md","hash":"39ba0bc4fe35a755dacd1cc1a549a37f93a8bcc6","modified":1543483324944},{"_id":"source/_posts/使用canvas给图片添加水印.md","hash":"4c2541d506345362ffb0d29ab4faff6eb4022bbf","modified":1544607959256},{"_id":"source/_posts/清除浮动带来的影响.md","hash":"d546c3f3b36bb785a5ef1aeb9584b9f5225f9c7b","modified":1544715818716},{"_id":"source/_posts/函数表达式.md","hash":"125d406c5cda5d682de46e1152772d1009668cb5","modified":1543478052469},{"_id":"source/_posts/终于成功了.md","hash":"a6b0d5d5374f6d3a6ce20988f705a6134415ab09","modified":1543478052470},{"_id":"source/_posts/解决vue-props拿不到值的问题.md","hash":"1a017300a6af744b77386ed40f8415579c7c32a3","modified":1547120534927},{"_id":"source/about/index.md","hash":"ebca34cfe8d13ec641d17fcfec0127a966338f8e","modified":1543477276930},{"_id":"source/archive/index.md","hash":"279ff19668395f5c6b26417da99d2c1f3ecd5886","modified":1543477276930},{"_id":"source/img/.DS_Store","hash":"96278d790e221468e36405d01e688e7af0526f36","modified":1543481716599},{"_id":"source/tags/index.md","hash":"9d558ce28d0d44c3463517088689bbca44bbb364","modified":1543477276984},{"_id":"themes/beantech/languages_to_be_added/de.yml","hash":"424a9c1e6ab69334d7873f6574da02ca960aa572","modified":1543477276986},{"_id":"themes/beantech/languages_to_be_added/default.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1543477276986},{"_id":"themes/beantech/languages_to_be_added/en.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1543477276986},{"_id":"themes/beantech/languages_to_be_added/es.yml","hash":"cb4eeca0ed3768a77e0cd216300f2b2549628b1b","modified":1543477276987},{"_id":"themes/beantech/languages_to_be_added/no.yml","hash":"8ca475a3b4f8efe6603030f0013aae39668230e1","modified":1543477276987},{"_id":"themes/beantech/languages_to_be_added/pl.yml","hash":"de7eb5850ae65ba7638e907c805fea90617a988c","modified":1543477276987},{"_id":"themes/beantech/languages_to_be_added/ru.yml","hash":"42df7afeb7a35dc46d272b7f4fb880a9d9ebcaa5","modified":1543477276988},{"_id":"themes/beantech/languages_to_be_added/zh-CN.yml","hash":"7bfcb0b8e97d7e5edcfca8ab26d55d9da2573c1c","modified":1543477276988},{"_id":"themes/beantech/languages_to_be_added/zh-TW.yml","hash":"9acac6cc4f8002c3fa53ff69fb8cf66c915bd016","modified":1543477276988},{"_id":"themes/beantech/layout/404.ejs","hash":"a4d73541a53e56b7dd46249c6d27cb59f4d97422","modified":1543477276988},{"_id":"themes/beantech/layout/about.ejs","hash":"edcf8fa3bf7093c974d418ffef42ac89c19af128","modified":1543477276994},{"_id":"themes/beantech/layout/archive.ejs","hash":"72a150c8dff0031a9107d12eaa7c2e6c6ce950d2","modified":1543477276994},{"_id":"themes/beantech/layout/index.ejs","hash":"dc8a6eaa00d1e7c33a40979afe0953ed5d7b512e","modified":1543477276994},{"_id":"themes/beantech/layout/layout.ejs","hash":"a5af5b99ac3456ab5da1a319455904b979b91601","modified":1543477276995},{"_id":"themes/beantech/layout/keynote.ejs","hash":"f5689862281e34dbe8402b0e72f632902e53e88b","modified":1543477276995},{"_id":"themes/beantech/layout/page.ejs","hash":"c90797e4394c5cb63c2515109480e766d04e486e","modified":1543477276995},{"_id":"themes/beantech/layout/tags.ejs","hash":"2c72eb2e89130658aa068d80d27b561b509c5dcd","modified":1543477276996},{"_id":"themes/beantech/layout/post.ejs","hash":"2d55684fc539dc281f9e2ec0409f09ea6ca43949","modified":1543477276996},{"_id":"source/img/avatar.jpeg","hash":"2b2580670e7123b33621f671cf01a310e2b23f81","modified":1543480389627},{"_id":"source/img/404-bg.jpg","hash":"68f7d525269a94287e0ad18713ae232fb59dcf71","modified":1543477276932},{"_id":"themes/beantech/layout/_partial/footer.ejs","hash":"c31863b1fa66fd915bc4913440be6c610d12af80","modified":1543477276989},{"_id":"themes/beantech/layout/_partial/head.ejs","hash":"3542d15bdf73aa59f05f566b7ecd2255e83ee370","modified":1543477276989},{"_id":"themes/beantech/layout/_partial/header.ejs","hash":"aafb744601042f0270d2e6595129ac8a73ad2608","modified":1543477276990},{"_id":"themes/beantech/layout/_partial/pagination.ejs","hash":"557d6bb069a1d48af49ae912994653f44b32a570","modified":1543477276990},{"_id":"themes/beantech/layout/_partial/sidebar.ejs","hash":"2e4e528a555917b2a267da4db2440bcc4a7a65ab","modified":1543477276990},{"_id":"themes/beantech/layout/_partial/nav.ejs","hash":"4c905166c960852e9b9a3c9d5c680091e37b481f","modified":1543477276990},{"_id":"themes/beantech/layout/_widget/archive.ejs","hash":"7594929d472806ca4c64d9906d9903a96de111a0","modified":1543477276991},{"_id":"themes/beantech/layout/_widget/category.ejs","hash":"1cf485def07dc06e870dc9613767c6c614bcf428","modified":1543477276992},{"_id":"themes/beantech/layout/_partial/toc.ejs","hash":"837f01e8a20e5023b4b292d1b3141a399567da65","modified":1543477276991},{"_id":"themes/beantech/layout/_widget/featured-tags.ejs","hash":"0c9ce1942f1943dc8891a9302a922ef1ffe300c5","modified":1543477276992},{"_id":"themes/beantech/layout/_widget/friends-blog.ejs","hash":"734d3775017aedac185028924baf890a71a74548","modified":1543477276992},{"_id":"themes/beantech/layout/_widget/recent-posts.ejs","hash":"e08ab8ba60e31638006acf27f066b989a0a3c433","modified":1543477276993},{"_id":"themes/beantech/layout/_widget/short-about.ejs","hash":"3b10bd768f6ef30a42b1703fbc9a88627f9bfdf1","modified":1543477276993},{"_id":"themes/beantech/source/css/beantech.css","hash":"4c361354fd8e9851923fb21a620bc079380ebcd8","modified":1543477276997},{"_id":"themes/beantech/source/css/archive.styl","hash":"715bcbd085eb95ec26c9805c11c374919cde971c","modified":1543477276996},{"_id":"themes/beantech/source/css/beantech.min.css","hash":"05a06230b1a9eca0b30cece54a397008cb77dc50","modified":1543477276997},{"_id":"themes/beantech/source/css/highlight.styl","hash":"e842080e6d580f0f70a7df71fbde3c4e49463c19","modified":1543477277000},{"_id":"themes/beantech/source/css/hux-blog.min.css","hash":"1baef04de262aeb7023d835429b49a805ac4ab40","modified":1543477277001},{"_id":"themes/beantech/source/css/signature.styl","hash":"88159b31c59d59c01a0b534af57242662a2a3969","modified":1543477277002},{"_id":"themes/beantech/source/css/toc.styl","hash":"6c9a2d5f6f981624e0c4b64323493e8614efea29","modified":1543477277002},{"_id":"themes/beantech/source/css/widget.styl","hash":"7a9f735f5ef323dc2950fbd9d76daa16c9a0f1a9","modified":1543477277003},{"_id":"themes/beantech/source/css/rocket.styl","hash":"d213d73d731e9133a4263791c84f1b1dc18604ec","modified":1543483222390},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1543477277003},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1543477277005},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1543477277006},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1543477277006},{"_id":"themes/beantech/source/js/bootstrap.min.js","hash":"b3f2ef9f985e7906c9360756b73cd64bf7733647","modified":1543477277008},{"_id":"themes/beantech/source/js/hux-blog.js","hash":"4b4d3c557405d04c3087d36c13e2834fe05c0f73","modified":1543477277008},{"_id":"themes/beantech/source/js/hux-blog.min.js","hash":"1563e7f70550ac6b30803d6f449719b853200e35","modified":1543477277008},{"_id":"themes/beantech/source/js/jquery.nav.js","hash":"ef2160a456176a4d09cc0b95d52b27dfbbadf2d8","modified":1543477277012},{"_id":"themes/beantech/source/js/jquery.tagcloud.js","hash":"4e5fd0b07f3bd935f2e603710447e039e3677211","modified":1543477277012},{"_id":"themes/beantech/source/js/toc.js","hash":"41e52551731854224c249d53010c1bae5aa92ffa","modified":1543477277013},{"_id":"themes/beantech/source/js/totop.js","hash":"c05360f6fc699ac12e794b1764b4a952713a3017","modified":1543477277013},{"_id":"source/img/header_img/Iron-Man-3.jpg","hash":"62a9a76854503c327990cc8d10de293ab6e9588f","modified":1543477276939},{"_id":"themes/beantech/source/css/bootstrap.min.css","hash":"fec7b176a4b9a67c0eb5d184f57b84297efc23aa","modified":1543477277000},{"_id":"themes/beantech/source/fonts/glyphicons-halflings-regular.svg","hash":"de51a8494180a6db074af2dee2383f0a363c5b08","modified":1543477277004},{"_id":"themes/beantech/source/js/bootstrap.js","hash":"f8752e9ae24daec0a0baffd7819122f8c6fd9103","modified":1543477277007},{"_id":"themes/beantech/source/js/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1543477277012},{"_id":"source/_posts/hexo-theme-beantech/home_posts_tag-false.png","hash":"86a3a4320012981f2d42eabc6ea172425f2f941a","modified":1543477276928},{"_id":"source/img/contact-bg.jpg","hash":"6af63305c923899017e727b5ca968a2703bc08cf","modified":1543477276938},{"_id":"source/img/signature/BeanTechSign-white.png","hash":"34289ed41cf9ddac2d56be46fbb1515b7d5913cd","modified":1543477276984},{"_id":"themes/beantech/source/css/bootstrap.css","hash":"41c54bf695145ae0b4d9020a1da308ceb05dcaf3","modified":1543477276999},{"_id":"themes/beantech/source/css/images/ironman.png","hash":"2f0db0ab15d466c4065d9f6102fdf829726d9e3f","modified":1543477277001},{"_id":"themes/beantech/source/css/images/rocket.png","hash":"6dee0406955aa9b7a261161d30f2538a671e806b","modified":1543477277001},{"_id":"source/img/header_img/tf-logo-dark.png","hash":"5c7bf8ade9de134f8c77a3c59e575abe9fc6cdd4","modified":1543477276976},{"_id":"themes/beantech/source/js/jquery.js","hash":"1852661bd11a09ca9b9cb63d1aa6ff390fffaf4e","modified":1543477277011},{"_id":"source/img/signature/BeanTechSign-black.png","hash":"94b7102e819fd6ee082d3fb0166f4de7458c22ff","modified":1543477276982},{"_id":"source/_posts/hexo-theme-beantech/home_posts_tag-true.png","hash":"a704520b43f26b88d650098f60689af3af5eb106","modified":1543477276930},{"_id":"source/img/header_img/tag-bg.png","hash":"e83cd7b04ff85bcbc9bd3ebf5e57a55166e82568","modified":1543477276974},{"_id":"source/img/beantech-desktop.png","hash":"4a8f8b209c9db8fd5209f15b8e4590525e258b0f","modified":1543477276937},{"_id":"source/_posts/hexo-theme-beantech/Demo.png","hash":"d9fa12f1e40924a0db57761d09d52dce450b4f7b","modified":1543477276926},{"_id":"source/img/header_img/home-bg-o.png","hash":"134ece4cb4c49c7ca1403a5afe7f46d0e2f9ecbb","modified":1543477276966},{"_id":"source/img/header_img/home-bg-2-dark.png","hash":"da6a3d5ca787bdc25e69655abd879b4f821aeb30","modified":1543477276959},{"_id":"source/img/header_img/archive-bg.png","hash":"6bf9c224543ec54e250309db89cbdf46e0c4b5ba","modified":1543477276950},{"_id":"public/post-sitemap.xml","hash":"19b9e9e6c55218a5a3edc13817a27b2a1e4ee540","modified":1547120603141},{"_id":"public/page-sitemap.xml","hash":"eeff07fbdc6d1de1b151859fd8e3499b4ad0224e","modified":1547120603143},{"_id":"public/tag-sitemap.xml","hash":"0ff64a56d43e3bacad2e85ddb00d2178e6bb110c","modified":1547120603521},{"_id":"public/sitemap.xsl","hash":"4321fa69dc1b8811d32b7a1478e5603e038cea1a","modified":1547120603522},{"_id":"public/sitemap.xml","hash":"61b8bd07fd7a3dac6d56a24bd478baca62dafc66","modified":1547120603728},{"_id":"public/404.html","hash":"b65fa0737c107a9e906e3208530a57913ef819f2","modified":1547120603760},{"_id":"public/tags/index.html","hash":"f23fa602d9dc26adec44a9a0b3294e9eaee7fd9a","modified":1547120603760},{"_id":"public/2018/12/21/使用webpack从零开始搭建react项目/index.html","hash":"1e8c2c804e1e1dab8e49a99a6d54e15466cfaf96","modified":1547120603786},{"_id":"public/2018/12/20/shell命令实现批量精准剪切视频/index.html","hash":"ce390e7c35db28c3444fb15bf4d81b237a2339c2","modified":1547120603787},{"_id":"public/2018/12/13/Float/index.html","hash":"0a5279ad489a56f1a23b9e5af6acdc40bc75832b","modified":1547120603823},{"_id":"public/2018/12/13/清除浮动带来的影响/index.html","hash":"4c267e5b6bd3bbf563651e1bc75a1352d09cfa93","modified":1547120603823},{"_id":"public/2018/12/12/使用canvas给图片添加水印/index.html","hash":"3354b50f55aa45a4b3668d9e7d42307e5dff7a5d","modified":1547120603824},{"_id":"public/2018/11/30/React入门/index.html","hash":"d019435a9b8a1e8252fb5d41ef72de23c784de38","modified":1547120603824},{"_id":"public/2017/09/22/string-function/index.html","hash":"12f867d2f6f4b854d31b5fe0c225810155f0599f","modified":1547120603824},{"_id":"public/2017/09/06/ueditor去除自动保存-md/index.html","hash":"8c0dee8fe6a536033dbe7a1633d64ff63dc3b5b7","modified":1547120603824},{"_id":"public/2017/08/15/react-native-1/index.html","hash":"ce0f221f769e02c0171f728b4a05c829bc198e50","modified":1547120603824},{"_id":"public/2017/08/14/contenteditable/index.html","hash":"4ee202c27cd1cc4475c97fb3077012fc5e4cbdbe","modified":1547120603824},{"_id":"public/2017/06/07/cartoon Redux/index.html","hash":"58006483203af3ef19aebcc91001247790c7e717","modified":1547120603824},{"_id":"public/2017/05/09/Location-Object/index.html","hash":"0aa3b27fc519fd361d86a384ca610d5ea80bae73","modified":1547120603825},{"_id":"public/2017/05/09/函数表达式/index.html","hash":"223ac9a3a6da7775f4f131b7c82a51b9844d1b36","modified":1547120603825},{"_id":"public/2017/05/08/终于成功了/index.html","hash":"aae6502878d657d280bf6e94faf15568e108c0e1","modified":1547120603825},{"_id":"public/2017/03/18/hexo-theme-beantech/index.html","hash":"c5da26015eb0384b2ab7fe782b4833228d8c2540","modified":1547120603825},{"_id":"public/about/index.html","hash":"0e97b770b8dd430860515c523b0bcf9e5e0a9acd","modified":1547120603825},{"_id":"public/archive/index.html","hash":"bd2f3b6ac47f99fe5f812ef1bc0ae464361435f8","modified":1547120603825},{"_id":"public/archives/index.html","hash":"3f6264f6f25a43231f3d69e8cc104011a982136e","modified":1547120603825},{"_id":"public/archives/archives/2/index.html","hash":"9721cacc6ff1b9ed565bc4b1234f543f65aaeb47","modified":1547120603825},{"_id":"public/archives/2017/index.html","hash":"88f96a2773d7212ec79ba676f928fcf4429c736b","modified":1547120603825},{"_id":"public/archives/2017/03/index.html","hash":"52d4b7f1354ae570a56496f5c074c2b523ccd25d","modified":1547120603825},{"_id":"public/archives/2017/05/index.html","hash":"f7140e937dda56f089f78edd398e9fa315af1c82","modified":1547120603826},{"_id":"public/archives/2017/06/index.html","hash":"0576be16c93c786e2f1021dfed6fe01a2b3bb7e2","modified":1547120603826},{"_id":"public/archives/2017/08/index.html","hash":"6cafef2353b5fd9662e8790b9bec4b0ef558bd71","modified":1547120603826},{"_id":"public/archives/2017/09/index.html","hash":"34d7067658834daf6af469b0109e858a91156275","modified":1547120603826},{"_id":"public/archives/2018/index.html","hash":"40701051b9f45f73aa5b62d15ce807ec43f9f2bb","modified":1547120603826},{"_id":"public/archives/2018/11/index.html","hash":"c228f0975cbf1cfcc974c0f7ecdd8e771bc9cbb2","modified":1547120603826},{"_id":"public/archives/2018/12/index.html","hash":"f042622969afa4c1b67a69e7dea7c9ba08cc6bcf","modified":1547120603826},{"_id":"public/index.html","hash":"6536d93bdfa79071f0f48152af703a5d65fe61fb","modified":1547120603826},{"_id":"public/archives/2/index.html","hash":"dc391c5fe6423668600d4ceadc41d4535e407477","modified":1547120603827},{"_id":"public/tags/html/index.html","hash":"0748046cf9f50e64d4b2cc678262527084d250c0","modified":1547120603827},{"_id":"public/tags/css/index.html","hash":"cdae3f48106ea578ef38d99b7e302cadbff81435","modified":1547120603827},{"_id":"public/tags/float/index.html","hash":"629a978bd8d19164210618cd2fb1a6de4adb98a7","modified":1547120603827},{"_id":"public/tags/clear/index.html","hash":"ef0b840b4db8c07098ea0a214739b1ab7730ffde","modified":1547120603827},{"_id":"public/tags/BFC/index.html","hash":"882a3be4711de47e6339a1db14e56f91cc7e210c","modified":1547120603827},{"_id":"public/tags/javascript/index.html","hash":"d47984e59cee2d9b000edf28e34ac55736104236","modified":1547120603827},{"_id":"public/tags/React/index.html","hash":"d45b5bcb2cb5110c08a5354a7147fada4941ee90","modified":1547120603828},{"_id":"public/tags/jsx/index.html","hash":"a0293ed508e20eacbc273ebeda0eb64a885976e8","modified":1547120603828},{"_id":"public/tags/object/index.html","hash":"40ebd03e0a96861467e508d603e2fb6373df797c","modified":1547120603828},{"_id":"public/tags/location/index.html","hash":"77bbe8c9a032ed15c54986497735d41d028729b6","modified":1547120603828},{"_id":"public/tags/html5/index.html","hash":"f9cd86bc8fd94d972ac1a23de4f77cb1206dc658","modified":1547120603828},{"_id":"public/tags/contenteditable/index.html","hash":"48927b3b72d29e603dfb3863189678e4bd4258a3","modified":1547120603828},{"_id":"public/tags/Hexo/index.html","hash":"5123ec1fc5d7b8523b7a9a465a4b571baaf85062","modified":1547120603829},{"_id":"public/tags/Blog/index.html","hash":"f867c2264eafed73a12f9626a9664651c7bdb254","modified":1547120603829},{"_id":"public/tags/react-native/index.html","hash":"95c2644d1966db703a28ce1f6361aae43e293326","modified":1547120603829},{"_id":"public/tags/ffmpeg/index.html","hash":"1fe0d5073e83a81f08d1f9eade8df8582b7b436a","modified":1547120603829},{"_id":"public/tags/视频剪辑/index.html","hash":"c8d4128abdc4ab012ba134463a27af8e5c674402","modified":1547120603829},{"_id":"public/tags/shell/index.html","hash":"203b38c7d706b869d9b942400034e096ce218b51","modified":1547120603829},{"_id":"public/tags/ueditor/index.html","hash":"d04aa4b34effadc59eb0983d9466f0093921134e","modified":1547120603829},{"_id":"public/tags/富文本编辑器/index.html","hash":"4a92ae064b45161371c50642ada401cddc8da882","modified":1547120603829},{"_id":"public/tags/canvas/index.html","hash":"22c2e37ea6472ec0817ea4b012ea9a61469f9d80","modified":1547120603829},{"_id":"public/tags/string/index.html","hash":"007340dee37818bab6b79d69ad372d2009fe24f3","modified":1547120603829},{"_id":"public/tags/redux/index.html","hash":"f637474f2c0d5bda013e0de6f661859dc2dc72f8","modified":1547120603829},{"_id":"public/2019/01/10/解决vue-props拿不到值的问题/index.html","hash":"24f48396daff2b1b9a6381a1c8e6c6082aef9a27","modified":1547120603847},{"_id":"public/archives/2019/index.html","hash":"f2f1aaa39f8663a265858e4838c11b235cc58e58","modified":1547120603847},{"_id":"public/archives/2019/01/index.html","hash":"0787411c73b17c5e2312f7f799ea6834a83d35cf","modified":1547120603847},{"_id":"public/tags/【vue-props-watch】/index.html","hash":"b6267d22d0c3863ee752150339b2ca80ae00ef55","modified":1547120603847},{"_id":"public/CNAME","hash":"55d5b0b4757a7d65ee4966dd161f394d06d257b7","modified":1547120603856},{"_id":"public/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1547120603856},{"_id":"public/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1547120603856},{"_id":"public/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1547120603857},{"_id":"public/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1547120603857},{"_id":"public/css/images/ironman.png","hash":"2f0db0ab15d466c4065d9f6102fdf829726d9e3f","modified":1547120603857},{"_id":"public/css/images/rocket.png","hash":"6dee0406955aa9b7a261161d30f2538a671e806b","modified":1547120603857},{"_id":"public/img/header_img/Iron-Man-3.jpg","hash":"62a9a76854503c327990cc8d10de293ab6e9588f","modified":1547120604187},{"_id":"public/fonts/glyphicons-halflings-regular.svg","hash":"de51a8494180a6db074af2dee2383f0a363c5b08","modified":1547120604188},{"_id":"public/css/archive.css","hash":"8db895ebaeff19ac145c961abcfd5d4a8d67a8ea","modified":1547120604194},{"_id":"public/css/highlight.css","hash":"03d1f0a648e9bdf7b1f57d217313cbac5d0c7eb1","modified":1547120604194},{"_id":"public/css/signature.css","hash":"820fa4743cea34a61808cd8f7de528605c32d7e3","modified":1547120604194},{"_id":"public/css/toc.css","hash":"2062bf4e5b219654e0d4bf470f5eef1be213da95","modified":1547120604194},{"_id":"public/css/rocket.css","hash":"ee468bc7c865c4ee003a3e37e0657bbc576adaa4","modified":1547120604194},{"_id":"public/css/widget.css","hash":"da95ad3f1938f24d20f1fa77d7a38f0c392b5ec8","modified":1547120604195},{"_id":"public/js/hux-blog.js","hash":"4b4d3c557405d04c3087d36c13e2834fe05c0f73","modified":1547120604195},{"_id":"public/js/hux-blog.min.js","hash":"1563e7f70550ac6b30803d6f449719b853200e35","modified":1547120604195},{"_id":"public/js/jquery.nav.js","hash":"ef2160a456176a4d09cc0b95d52b27dfbbadf2d8","modified":1547120604195},{"_id":"public/js/jquery.tagcloud.js","hash":"4e5fd0b07f3bd935f2e603710447e039e3677211","modified":1547120604195},{"_id":"public/js/toc.js","hash":"41e52551731854224c249d53010c1bae5aa92ffa","modified":1547120604195},{"_id":"public/js/totop.js","hash":"c05360f6fc699ac12e794b1764b4a952713a3017","modified":1547120604195},{"_id":"public/img/avatar.jpeg","hash":"2b2580670e7123b33621f671cf01a310e2b23f81","modified":1547120604195},{"_id":"public/img/404-bg.jpg","hash":"68f7d525269a94287e0ad18713ae232fb59dcf71","modified":1547120604195},{"_id":"public/2017/03/18/hexo-theme-beantech/home_posts_tag-false.png","hash":"86a3a4320012981f2d42eabc6ea172425f2f941a","modified":1547120604195},{"_id":"public/img/header_img/tf-logo-dark.png","hash":"5c7bf8ade9de134f8c77a3c59e575abe9fc6cdd4","modified":1547120604251},{"_id":"public/img/signature/BeanTechSign-black.png","hash":"94b7102e819fd6ee082d3fb0166f4de7458c22ff","modified":1547120604251},{"_id":"public/2017/03/18/hexo-theme-beantech/home_posts_tag-true.png","hash":"a704520b43f26b88d650098f60689af3af5eb106","modified":1547120604252},{"_id":"public/css/beantech.css","hash":"4c361354fd8e9851923fb21a620bc079380ebcd8","modified":1547120604255},{"_id":"public/css/beantech.min.css","hash":"05a06230b1a9eca0b30cece54a397008cb77dc50","modified":1547120604255},{"_id":"public/css/hux-blog.min.css","hash":"1baef04de262aeb7023d835429b49a805ac4ab40","modified":1547120604255},{"_id":"public/img/signature/BeanTechSign-white.png","hash":"34289ed41cf9ddac2d56be46fbb1515b7d5913cd","modified":1547120604255},{"_id":"public/js/bootstrap.min.js","hash":"b3f2ef9f985e7906c9360756b73cd64bf7733647","modified":1547120604261},{"_id":"public/img/contact-bg.jpg","hash":"6af63305c923899017e727b5ca968a2703bc08cf","modified":1547120604275},{"_id":"public/js/bootstrap.js","hash":"f8752e9ae24daec0a0baffd7819122f8c6fd9103","modified":1547120604286},{"_id":"public/js/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1547120604292},{"_id":"public/css/bootstrap.min.css","hash":"fec7b176a4b9a67c0eb5d184f57b84297efc23aa","modified":1547120604302},{"_id":"public/css/bootstrap.css","hash":"41c54bf695145ae0b4d9020a1da308ceb05dcaf3","modified":1547120604310},{"_id":"public/img/header_img/tag-bg.png","hash":"e83cd7b04ff85bcbc9bd3ebf5e57a55166e82568","modified":1547120604331},{"_id":"public/img/beantech-desktop.png","hash":"4a8f8b209c9db8fd5209f15b8e4590525e258b0f","modified":1547120604334},{"_id":"public/2017/03/18/hexo-theme-beantech/Demo.png","hash":"d9fa12f1e40924a0db57761d09d52dce450b4f7b","modified":1547120604339},{"_id":"public/img/header_img/home-bg-o.png","hash":"134ece4cb4c49c7ca1403a5afe7f46d0e2f9ecbb","modified":1547120604344},{"_id":"public/js/jquery.js","hash":"1852661bd11a09ca9b9cb63d1aa6ff390fffaf4e","modified":1547120604351},{"_id":"public/img/header_img/home-bg-2-dark.png","hash":"da6a3d5ca787bdc25e69655abd879b4f821aeb30","modified":1547120604351},{"_id":"public/img/header_img/archive-bg.png","hash":"6bf9c224543ec54e250309db89cbdf46e0c4b5ba","modified":1547120604357},{"_id":"themes/beantech/.DS_Store","hash":"c7a374fd08f0c11748ea08c82fef44cc617f7421","modified":1555660038254}],"Category":[],"Data":[],"Page":[{"layout":"404","description":"你来到了没有知识的荒原 :(","header-img":"img/404-bg.jpg","_content":"","source":"404.md","raw":"---\nlayout: 404\ndescription: \"你来到了没有知识的荒原 :(\"\nheader-img: \"img/404-bg.jpg\"\n---\n","date":"2018-11-29T07:41:16.920Z","updated":"2018-11-29T07:41:16.920Z","path":"404.html","title":"","comments":1,"_id":"cjqqjnrtr0000j2s4ho95ndlg","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"about","title":"About","date":"2016-04-20T20:48:33.000Z","description":"Wish for the Best, Prepare for the Worst","header-img":"img/header_img/Iron-Man-3.jpg","comments":1,"_content":"\n> 光有好奇心而不去實踐，等於自願放棄成功機會\n> 別為自己畫地自限，Just Do It！！\n","source":"about/index.md","raw":"---\nlayout: \"about\"\ntitle: \"About\"\ndate: 2016-04-21 04:48:33\ndescription: \"Wish for the Best, Prepare for the Worst\"\nheader-img: \"img/header_img/Iron-Man-3.jpg\"\ncomments: true\n---\n\n> 光有好奇心而不去實踐，等於自願放棄成功機會\n> 別為自己畫地自限，Just Do It！！\n","updated":"2018-11-29T07:41:16.930Z","path":"about/index.html","_id":"cjqqjnrut0002j2s4f9qi2rvw","content":"<blockquote>\n<p>光有好奇心而不去實踐，等於自願放棄成功機會<br>\n別為自己畫地自限，Just Do It！！</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>光有好奇心而不去實踐，等於自願放棄成功機會<br>\n別為自己畫地自限，Just Do It！！</p>\n</blockquote>\n"},{"layout":"archive","title":"Archives","header-img":"img/header_img/archive-bg.png","comments":0,"date":"2017-03-20T12:49:56.000Z","description":"Hey, this is archives","_content":"","source":"archive/index.md","raw":"---\nlayout: \"archive\"\ntitle: \"Archives\"\nheader-img: \"img/header_img/archive-bg.png\"\ncomments: false\ndate: 2017-03-20 20:49:56\ndescription: \"Hey, this is archives\"\n---\n","updated":"2018-11-29T07:41:16.930Z","path":"archive/index.html","_id":"cjqqjnruw0004j2s4bp5o35z8","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"tags","title":"Tags","description":"Hey, this is Tags.","header-img":"img/header_img/tag-bg.png","_content":"","source":"tags/index.md","raw":"---\nlayout: \"tags\"\ntitle: \"Tags\"\ndescription: \"Hey, this is Tags.\"\nheader-img: \"img/header_img/tag-bg.png\"\n---\n","date":"2018-11-29T07:41:16.984Z","updated":"2018-11-29T07:41:16.984Z","path":"tags/index.html","comments":1,"_id":"cjqqjnrv20007j2s4wex6mr39","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Float","catalog":true,"date":"2018-12-13T15:45:18.000Z","subtitle":null,"header-img":null,"_content":"## 浮动\n\n> 浮动的本质，就是实现文字环绕效果\n\n### 浮动的表现形式\n- 元素block化\n- 破坏性造成的紧密排列特性(去空格化)\n\n![](https://img2.mukewang.com/5c1216fb00014ca912800720-156-88.jpg)\n\n### 砌砖布局的问题\n\n- 容错性比较糟糕，容易出问题\n- 这种布局需要元素固定尺寸，很难重复使用\n- 在低版本IE下会有很多问题\n\n\n\n### 浮动与流体布局\n\n- 文字环绕\n```\nfloat:left;\n```\n- 左右浮动，中间居中布局\n```\n左：float: left\n右：float: right\n中间：text-align: center\n```\n- 文字环绕衍生-单侧固定\n```\n固定元素：width+float;\n右侧元素：padding-left/margin-left;\n```\n- DOM与显示位置匹配的单侧固定布局\n\n```\n左侧父元素：width：100% + float\n左侧子元素：padding-left/margin-left\n右侧固定元素：width + float + margin负值\n```\n\n- 智能自适应布局\n\n```\n左侧：float\n右侧：display:table-cell(IE8+)\n      *display:inline-block(IE7)\n```\n\n\n### Float与兼容性\n\n\n#### 让IE7飙泪的浮动问题\n1. 含clear的浮动元素包裹不正确的问题\n> IE7的表现   \n\n![](https://img1.mukewang.com/5c121f290001f54b12800720.jpg)\n\n> IE8+的表现   \n\n![](https://img2.mukewang.com/5c121f710001230212800720.jpg)\n\n2. 浮动元素倒数2哥莫名垂直间距问题\n> IE7的表现   \n\n![](https://img3.mukewang.com/5c121fcf0001f57512800720.jpg)\n\n> IE8+的表现   \n\n![](https://img.mukewang.com/5c12204500013fc612800720.jpg)\n\n\n\n3. 浮动元素最后一个自负重复问题\n> IE7的表现   \n\n![](https://img4.mukewang.com/5c12208400012d9212800720.jpg)\n\n> IE8+的表现   \n\n![](https://img4.mukewang.com/5c1220c90001f59112800720.jpg)\n\n\n\n\n4. 浮动元素楼梯排列问题\n> IE7的表现   \n\n![](https://img3.mukewang.com/5c1221150001017312800720.jpg)\n\n> IE8+的表现   \n\n![](https://img3.mukewang.com/5c12213e0001d12e12800720.jpg)\n\n\n\n\n5. 浮动元素和文本不在同一行的问题\n> IE7的表现   \n\n![](https://img1.mukewang.com/5c1221b90001680b12800720.jpg)\n\n> IE8+的表现   \n\n![](https://img2.mukewang.com/5c1221da000104e512800720.jpg)","source":"_posts/Float.md","raw":"---\ntitle: Float\ncatalog: true\ndate: 2018-12-13 23:45:18\nsubtitle:\nheader-img:\ntags: [html, css, float, clear, BFC]\n---\n## 浮动\n\n> 浮动的本质，就是实现文字环绕效果\n\n### 浮动的表现形式\n- 元素block化\n- 破坏性造成的紧密排列特性(去空格化)\n\n![](https://img2.mukewang.com/5c1216fb00014ca912800720-156-88.jpg)\n\n### 砌砖布局的问题\n\n- 容错性比较糟糕，容易出问题\n- 这种布局需要元素固定尺寸，很难重复使用\n- 在低版本IE下会有很多问题\n\n\n\n### 浮动与流体布局\n\n- 文字环绕\n```\nfloat:left;\n```\n- 左右浮动，中间居中布局\n```\n左：float: left\n右：float: right\n中间：text-align: center\n```\n- 文字环绕衍生-单侧固定\n```\n固定元素：width+float;\n右侧元素：padding-left/margin-left;\n```\n- DOM与显示位置匹配的单侧固定布局\n\n```\n左侧父元素：width：100% + float\n左侧子元素：padding-left/margin-left\n右侧固定元素：width + float + margin负值\n```\n\n- 智能自适应布局\n\n```\n左侧：float\n右侧：display:table-cell(IE8+)\n      *display:inline-block(IE7)\n```\n\n\n### Float与兼容性\n\n\n#### 让IE7飙泪的浮动问题\n1. 含clear的浮动元素包裹不正确的问题\n> IE7的表现   \n\n![](https://img1.mukewang.com/5c121f290001f54b12800720.jpg)\n\n> IE8+的表现   \n\n![](https://img2.mukewang.com/5c121f710001230212800720.jpg)\n\n2. 浮动元素倒数2哥莫名垂直间距问题\n> IE7的表现   \n\n![](https://img3.mukewang.com/5c121fcf0001f57512800720.jpg)\n\n> IE8+的表现   \n\n![](https://img.mukewang.com/5c12204500013fc612800720.jpg)\n\n\n\n3. 浮动元素最后一个自负重复问题\n> IE7的表现   \n\n![](https://img4.mukewang.com/5c12208400012d9212800720.jpg)\n\n> IE8+的表现   \n\n![](https://img4.mukewang.com/5c1220c90001f59112800720.jpg)\n\n\n\n\n4. 浮动元素楼梯排列问题\n> IE7的表现   \n\n![](https://img3.mukewang.com/5c1221150001017312800720.jpg)\n\n> IE8+的表现   \n\n![](https://img3.mukewang.com/5c12213e0001d12e12800720.jpg)\n\n\n\n\n5. 浮动元素和文本不在同一行的问题\n> IE7的表现   \n\n![](https://img1.mukewang.com/5c1221b90001680b12800720.jpg)\n\n> IE8+的表现   \n\n![](https://img2.mukewang.com/5c1221da000104e512800720.jpg)","slug":"Float","published":1,"updated":"2018-12-13T15:45:40.843Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnruo0001j2s4cqwebq0h","content":"<h2><span id=\"浮动\">浮动</span></h2>\n<blockquote>\n<p>浮动的本质，就是实现文字环绕效果</p>\n</blockquote>\n<h3><span id=\"浮动的表现形式\">浮动的表现形式</span></h3>\n<ul>\n<li>元素block化</li>\n<li>破坏性造成的紧密排列特性(去空格化)</li>\n</ul>\n<p><img src=\"https://img2.mukewang.com/5c1216fb00014ca912800720-156-88.jpg\" alt=\"\"></p>\n<h3><span id=\"砌砖布局的问题\">砌砖布局的问题</span></h3>\n<ul>\n<li>容错性比较糟糕，容易出问题</li>\n<li>这种布局需要元素固定尺寸，很难重复使用</li>\n<li>在低版本IE下会有很多问题</li>\n</ul>\n<h3><span id=\"浮动与流体布局\">浮动与流体布局</span></h3>\n<ul>\n<li>文字环绕</li>\n</ul>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">float</span>:left;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>左右浮动，中间居中布局</li>\n</ul>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">左：floa<span class=\"variable\">t:</span> <span class=\"keyword\">left</span></span><br><span class=\"line\">右：floa<span class=\"variable\">t:</span> <span class=\"keyword\">right</span></span><br><span class=\"line\">中间：text-align: <span class=\"keyword\">center</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>文字环绕衍生-单侧固定</li>\n</ul>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">固定元素：<span class=\"built_in\">width</span>+<span class=\"keyword\">float</span>;</span><br><span class=\"line\">右侧元素：padding-left/margin-left;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>DOM与显示位置匹配的单侧固定布局</li>\n</ul>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">左侧父元素：<span class=\"built_in\">width</span>：<span class=\"number\">100</span>% + <span class=\"keyword\">float</span></span><br><span class=\"line\">左侧子元素：padding-left/margin-left</span><br><span class=\"line\">右侧固定元素：<span class=\"built_in\">width</span> + <span class=\"keyword\">float</span> + margin负值</span><br></pre></td></tr></table></figure>\n<ul>\n<li>智能自适应布局</li>\n</ul>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">左侧：<span class=\"keyword\">float</span></span><br><span class=\"line\">右侧：<span class=\"built_in\">display</span>:table-cell(IE8+)</span><br><span class=\"line\">      *<span class=\"built_in\">display</span>:<span class=\"keyword\">inline</span>-block(IE7)</span><br></pre></td></tr></table></figure>\n<h3><span id=\"float与兼容性\">Float与兼容性</span></h3>\n<h4><span id=\"让ie7飙泪的浮动问题\">让IE7飙泪的浮动问题</span></h4>\n<ol>\n<li>含clear的浮动元素包裹不正确的问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img1.mukewang.com/5c121f290001f54b12800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img2.mukewang.com/5c121f710001230212800720.jpg\" alt=\"\"></p>\n<ol start=\"2\">\n<li>浮动元素倒数2哥莫名垂直间距问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img3.mukewang.com/5c121fcf0001f57512800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img.mukewang.com/5c12204500013fc612800720.jpg\" alt=\"\"></p>\n<ol start=\"3\">\n<li>浮动元素最后一个自负重复问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img4.mukewang.com/5c12208400012d9212800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img4.mukewang.com/5c1220c90001f59112800720.jpg\" alt=\"\"></p>\n<ol start=\"4\">\n<li>浮动元素楼梯排列问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img3.mukewang.com/5c1221150001017312800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img3.mukewang.com/5c12213e0001d12e12800720.jpg\" alt=\"\"></p>\n<ol start=\"5\">\n<li>浮动元素和文本不在同一行的问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img1.mukewang.com/5c1221b90001680b12800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img2.mukewang.com/5c1221da000104e512800720.jpg\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2>浮动</h2>\n<blockquote>\n<p>浮动的本质，就是实现文字环绕效果</p>\n</blockquote>\n<h3>浮动的表现形式</h3>\n<ul>\n<li>元素block化</li>\n<li>破坏性造成的紧密排列特性(去空格化)</li>\n</ul>\n<p><img src=\"https://img2.mukewang.com/5c1216fb00014ca912800720-156-88.jpg\" alt=\"\"></p>\n<h3>砌砖布局的问题</h3>\n<ul>\n<li>容错性比较糟糕，容易出问题</li>\n<li>这种布局需要元素固定尺寸，很难重复使用</li>\n<li>在低版本IE下会有很多问题</li>\n</ul>\n<h3>浮动与流体布局</h3>\n<ul>\n<li>文字环绕</li>\n</ul>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">float</span>:left;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>左右浮动，中间居中布局</li>\n</ul>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">左：floa<span class=\"variable\">t:</span> <span class=\"keyword\">left</span></span><br><span class=\"line\">右：floa<span class=\"variable\">t:</span> <span class=\"keyword\">right</span></span><br><span class=\"line\">中间：text-align: <span class=\"keyword\">center</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>文字环绕衍生-单侧固定</li>\n</ul>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">固定元素：<span class=\"built_in\">width</span>+<span class=\"keyword\">float</span>;</span><br><span class=\"line\">右侧元素：padding-left/margin-left;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>DOM与显示位置匹配的单侧固定布局</li>\n</ul>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">左侧父元素：<span class=\"built_in\">width</span>：<span class=\"number\">100</span>% + <span class=\"keyword\">float</span></span><br><span class=\"line\">左侧子元素：padding-left/margin-left</span><br><span class=\"line\">右侧固定元素：<span class=\"built_in\">width</span> + <span class=\"keyword\">float</span> + margin负值</span><br></pre></td></tr></table></figure>\n<ul>\n<li>智能自适应布局</li>\n</ul>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">左侧：<span class=\"keyword\">float</span></span><br><span class=\"line\">右侧：<span class=\"built_in\">display</span>:table-cell(IE8+)</span><br><span class=\"line\">      *<span class=\"built_in\">display</span>:<span class=\"keyword\">inline</span>-block(IE7)</span><br></pre></td></tr></table></figure>\n<h3>Float与兼容性</h3>\n<h4>让IE7飙泪的浮动问题</h4>\n<ol>\n<li>含clear的浮动元素包裹不正确的问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img1.mukewang.com/5c121f290001f54b12800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img2.mukewang.com/5c121f710001230212800720.jpg\" alt=\"\"></p>\n<ol start=\"2\">\n<li>浮动元素倒数2哥莫名垂直间距问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img3.mukewang.com/5c121fcf0001f57512800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img.mukewang.com/5c12204500013fc612800720.jpg\" alt=\"\"></p>\n<ol start=\"3\">\n<li>浮动元素最后一个自负重复问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img4.mukewang.com/5c12208400012d9212800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img4.mukewang.com/5c1220c90001f59112800720.jpg\" alt=\"\"></p>\n<ol start=\"4\">\n<li>浮动元素楼梯排列问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img3.mukewang.com/5c1221150001017312800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img3.mukewang.com/5c12213e0001d12e12800720.jpg\" alt=\"\"></p>\n<ol start=\"5\">\n<li>浮动元素和文本不在同一行的问题</li>\n</ol>\n<blockquote>\n<p>IE7的表现</p>\n</blockquote>\n<p><img src=\"https://img1.mukewang.com/5c1221b90001680b12800720.jpg\" alt=\"\"></p>\n<blockquote>\n<p>IE8+的表现</p>\n</blockquote>\n<p><img src=\"https://img2.mukewang.com/5c1221da000104e512800720.jpg\" alt=\"\"></p>\n"},{"title":"React入门","catalog":true,"date":"2018-11-30T01:39:06.000Z","subtitle":null,"header-img":null,"_content":"\n### 学习React的预备知识\n\n- 基本熟悉`HTML`和`CSS`\n- `Javascript`基础知识和变成思想\n- 对`DOM`有基本的了解\n- 熟悉[ES6语法和功能](http://es6.ruanyifeng.com)\n- `Node.js`和`npm`的安装与使用\n\n### 目标\n\n- 了解必要的React概念和相关内容，例如Babel，Webpack，JSX，component（组件），props（属性），state（状态）和生命周期\n- 构建一个非常简单的React应用程序，实际演练上述概念\n\n### 设置与安装\n\n> 设置与安装的几种方式\n\n- 静态HTML文件\n\n","source":"_posts/React入门.md","raw":"---\ntitle: React入门\ncatalog: true\ndate: 2018-11-30 09:39:06\nsubtitle:\nheader-img:\ntags: [javascript, React, jsx]\n---\n\n### 学习React的预备知识\n\n- 基本熟悉`HTML`和`CSS`\n- `Javascript`基础知识和变成思想\n- 对`DOM`有基本的了解\n- 熟悉[ES6语法和功能](http://es6.ruanyifeng.com)\n- `Node.js`和`npm`的安装与使用\n\n### 目标\n\n- 了解必要的React概念和相关内容，例如Babel，Webpack，JSX，component（组件），props（属性），state（状态）和生命周期\n- 构建一个非常简单的React应用程序，实际演练上述概念\n\n### 设置与安装\n\n> 设置与安装的几种方式\n\n- 静态HTML文件\n\n","slug":"React入门","published":1,"updated":"2018-11-30T02:23:18.230Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnruu0003j2s4c779594j","content":"<h3><span id=\"学习react的预备知识\">学习React的预备知识</span></h3>\n<ul>\n<li>基本熟悉<code>HTML</code>和<code>CSS</code></li>\n<li><code>Javascript</code>基础知识和变成思想</li>\n<li>对<code>DOM</code>有基本的了解</li>\n<li>熟悉<a href=\"http://es6.ruanyifeng.com\" target=\"_blank\" rel=\"noopener\">ES6语法和功能</a></li>\n<li><code>Node.js</code>和<code>npm</code>的安装与使用</li>\n</ul>\n<h3><span id=\"目标\">目标</span></h3>\n<ul>\n<li>了解必要的React概念和相关内容，例如Babel，Webpack，JSX，component（组件），props（属性），state（状态）和生命周期</li>\n<li>构建一个非常简单的React应用程序，实际演练上述概念</li>\n</ul>\n<h3><span id=\"设置与安装\">设置与安装</span></h3>\n<blockquote>\n<p>设置与安装的几种方式</p>\n</blockquote>\n<ul>\n<li>静态HTML文件</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3>学习React的预备知识</h3>\n<ul>\n<li>基本熟悉<code>HTML</code>和<code>CSS</code></li>\n<li><code>Javascript</code>基础知识和变成思想</li>\n<li>对<code>DOM</code>有基本的了解</li>\n<li>熟悉<a href=\"http://es6.ruanyifeng.com\" target=\"_blank\" rel=\"noopener\">ES6语法和功能</a></li>\n<li><code>Node.js</code>和<code>npm</code>的安装与使用</li>\n</ul>\n<h3>目标</h3>\n<ul>\n<li>了解必要的React概念和相关内容，例如Babel，Webpack，JSX，component（组件），props（属性），state（状态）和生命周期</li>\n<li>构建一个非常简单的React应用程序，实际演练上述概念</li>\n</ul>\n<h3>设置与安装</h3>\n<blockquote>\n<p>设置与安装的几种方式</p>\n</blockquote>\n<ul>\n<li>静态HTML文件</li>\n</ul>\n"},{"title":"Location-Object","date":"2017-05-09T07:49:34.000Z","_content":"\n- 它提供了与当前窗口中加载的文档有关的信息，还提供了一些导航功能。\n- `location`对象很特别，它既是`window`对象的属性，又是`document`对象的属性。\n```\nwindow.location === document.location  //true\n```\n- location对象的用处不只表现在它保存当前文档和信息，还表现在它将URL解析为独立的片段。\n\n<!-- more -->\n\n> 属性\n\n属性名 | 例子 | 说明\n---|--- | ---\nhash | \"#contents\" | 返回URL中hash(#号后跟零或多个字符)，如果URL中不包含散列，则返回空字符串\nhost | \"www.qxy.com:80\" | 返回服务器名称和端口号（如果有）\nhostname | \"www.qxy.com\" | 返回不带端口号的服务器名称\nhref | \"http://www.qxy.com\" | 返回当前加载页面的完整URL。而location对象的toString()方法也返回这个值\npathname | \"/blog/\" | 返回URL中的目录和（或）文件名\nport | \"8080\" | 返回URL中指定的端口号。如果URL中不包含端口号，则这个属性返回空字符串\nprotocol | \"http:\" | 返回页面使用的协议。通常是http:或https:\nsearch | \"?q=javascript\" | 返回URL的查询字符串。这个字符串以问号开头\n\n#### 查询字符串参数\n\n虽然通过上面的属性可以访问到location 对象的大多数信息，但其中访问URL 包含的查询字符\n串的属性并不方便。尽管location.search 返回从问号到URL 末尾的所有内容，但却没有办法逐个\n访问其中的每个查询字符串参数。为此，可以像下面这样创建一个函数，用以解析查询字符串，然后返\n回包含所有参数的一个对象：\n```\nfunction getQueryStringArgs(){\n    //取得查询字符串并去掉开头的问号\n    var qs = (location.search.length > 0 ? location.search.substring(1) : \"\" ),\n        //保存数据的对象\n        args = {},\n        //取得每一项\n        items = qs.length ? qs.split('&') : [],\n        item = null,\n        name = null,\n        value = null,\n        //在for循环中使用\n        i = 0,\n        len = items.length;\n        \n    //逐个将每一项添加到args对象中\n    \n    for(i = 0;i < len; i++){\n        item = items[i].split(':');\n        name = decodeURIComponent(item[0]);\n        value = decodeURIComponent(item[1]);\n        \n        if(name.length){\n            args[name] = value;\n        }\n    }\n    return args;\n}\n```\n\n#### 位置操作\n\n使用location 对象可以通过很多方式来改变浏览器的位置。首先，也是最常用的方式，就是使用\nassign()方法并为其传递一个URL，如下所示。\n```\nlocation.assign(\"http://www.qxy.com\");\n```\n\n这样，就可以立即打开新URL 并在浏览器的历史记录中生成一条记录。如果是将`location.href`\n或`window.location` 设置为一个URL 值，也会以该值调用`assign()`方法。例如，下列两行代码与\n显式调用`assign()`方法的效果完全一样。\n```\nwindow.location = \"http://www.wrox.com\";\nlocation.href = \"http://www.wrox.com\";\n```\n在这些改变浏览器位置的方法中，最常用的是设置`location.href `属性。\n\n修改location 对象的其他属性也可以改变当前加载的页面\n```\n//假设初始URL 为http://www.wrox.com/WileyCDA/\n//将URL 修改为\"http://www.wrox.com/WileyCDA/#section1\"\nlocation.hash = \"#section1\";\n//将URL 修改为\"http://www.wrox.com/WileyCDA/?q=javascript\"\nlocation.search = \"?q=javascript\";\n//将URL 修改为\"http://www.yahoo.com/WileyCDA/\"\nlocation.hostname = \"www.yahoo.com\";\n//将URL 修改为\"http://www.yahoo.com/mydir/\"\nlocation.pathname = \"mydir\";\n//将URL 修改为\"http://www.yahoo.com:8080/WileyCDA/\"\nlocation.port = 8080;\n```\n每次修改location 的属性（hash 除外），页面都会以新URL 重新加载。\n> 在IE8、Firefox 1、Safari 2+、Opera 9+和Chrome 中，修改hash 的值会在浏览\n器的历史记录中生成一条新记录。在IE 的早期版本中，hash 属性不会在用户单击“后\n退”和“前进”按钮时被更新，而只会在用户单击包含hash 的URL 时才会被更新。\n\n> replace()方法。这个方法\n只接受一个参数，即要导航到的URL；结果虽然会导致浏览器位置改变，但不会在历史记录中生成新记\n录。在调用replace()方法之后，用户不能回到前一个页面\n```\nsetTimeout(function () {\nlocation.replace(\"http://www.wrox.com/\");\n}, 1000);\n```\n\n> reload()，作用是重新加载当前显示的页面\n\n如果调用reload()\n时不传递任何参数，页面就会以最有效的方式重新加载。也就是说，如果页面自上次请求以来并没有改\n变过，页面就会从浏览器缓存中重新加载。如果要强制从服务器重新加载，则需要像下面这样为该方法\n传递参数true。\n```\nlocation.reload(); //重新加载（有可能从缓存中加载）\nlocation.reload(true); //重新加载（从服务器重新加载）\n```\n位于reload()调用之后的代码可能会也可能不会执行，这要取决于网络延迟或系统资源等因素。\n为此，最好将reload()放在代码的最后一行。","source":"_posts/Location-Object.md","raw":"---\ntitle: Location-Object\ndate: 2017-05-09 15:49:34\ntags: [javascript, object, location]\n---\n\n- 它提供了与当前窗口中加载的文档有关的信息，还提供了一些导航功能。\n- `location`对象很特别，它既是`window`对象的属性，又是`document`对象的属性。\n```\nwindow.location === document.location  //true\n```\n- location对象的用处不只表现在它保存当前文档和信息，还表现在它将URL解析为独立的片段。\n\n<!-- more -->\n\n> 属性\n\n属性名 | 例子 | 说明\n---|--- | ---\nhash | \"#contents\" | 返回URL中hash(#号后跟零或多个字符)，如果URL中不包含散列，则返回空字符串\nhost | \"www.qxy.com:80\" | 返回服务器名称和端口号（如果有）\nhostname | \"www.qxy.com\" | 返回不带端口号的服务器名称\nhref | \"http://www.qxy.com\" | 返回当前加载页面的完整URL。而location对象的toString()方法也返回这个值\npathname | \"/blog/\" | 返回URL中的目录和（或）文件名\nport | \"8080\" | 返回URL中指定的端口号。如果URL中不包含端口号，则这个属性返回空字符串\nprotocol | \"http:\" | 返回页面使用的协议。通常是http:或https:\nsearch | \"?q=javascript\" | 返回URL的查询字符串。这个字符串以问号开头\n\n#### 查询字符串参数\n\n虽然通过上面的属性可以访问到location 对象的大多数信息，但其中访问URL 包含的查询字符\n串的属性并不方便。尽管location.search 返回从问号到URL 末尾的所有内容，但却没有办法逐个\n访问其中的每个查询字符串参数。为此，可以像下面这样创建一个函数，用以解析查询字符串，然后返\n回包含所有参数的一个对象：\n```\nfunction getQueryStringArgs(){\n    //取得查询字符串并去掉开头的问号\n    var qs = (location.search.length > 0 ? location.search.substring(1) : \"\" ),\n        //保存数据的对象\n        args = {},\n        //取得每一项\n        items = qs.length ? qs.split('&') : [],\n        item = null,\n        name = null,\n        value = null,\n        //在for循环中使用\n        i = 0,\n        len = items.length;\n        \n    //逐个将每一项添加到args对象中\n    \n    for(i = 0;i < len; i++){\n        item = items[i].split(':');\n        name = decodeURIComponent(item[0]);\n        value = decodeURIComponent(item[1]);\n        \n        if(name.length){\n            args[name] = value;\n        }\n    }\n    return args;\n}\n```\n\n#### 位置操作\n\n使用location 对象可以通过很多方式来改变浏览器的位置。首先，也是最常用的方式，就是使用\nassign()方法并为其传递一个URL，如下所示。\n```\nlocation.assign(\"http://www.qxy.com\");\n```\n\n这样，就可以立即打开新URL 并在浏览器的历史记录中生成一条记录。如果是将`location.href`\n或`window.location` 设置为一个URL 值，也会以该值调用`assign()`方法。例如，下列两行代码与\n显式调用`assign()`方法的效果完全一样。\n```\nwindow.location = \"http://www.wrox.com\";\nlocation.href = \"http://www.wrox.com\";\n```\n在这些改变浏览器位置的方法中，最常用的是设置`location.href `属性。\n\n修改location 对象的其他属性也可以改变当前加载的页面\n```\n//假设初始URL 为http://www.wrox.com/WileyCDA/\n//将URL 修改为\"http://www.wrox.com/WileyCDA/#section1\"\nlocation.hash = \"#section1\";\n//将URL 修改为\"http://www.wrox.com/WileyCDA/?q=javascript\"\nlocation.search = \"?q=javascript\";\n//将URL 修改为\"http://www.yahoo.com/WileyCDA/\"\nlocation.hostname = \"www.yahoo.com\";\n//将URL 修改为\"http://www.yahoo.com/mydir/\"\nlocation.pathname = \"mydir\";\n//将URL 修改为\"http://www.yahoo.com:8080/WileyCDA/\"\nlocation.port = 8080;\n```\n每次修改location 的属性（hash 除外），页面都会以新URL 重新加载。\n> 在IE8、Firefox 1、Safari 2+、Opera 9+和Chrome 中，修改hash 的值会在浏览\n器的历史记录中生成一条新记录。在IE 的早期版本中，hash 属性不会在用户单击“后\n退”和“前进”按钮时被更新，而只会在用户单击包含hash 的URL 时才会被更新。\n\n> replace()方法。这个方法\n只接受一个参数，即要导航到的URL；结果虽然会导致浏览器位置改变，但不会在历史记录中生成新记\n录。在调用replace()方法之后，用户不能回到前一个页面\n```\nsetTimeout(function () {\nlocation.replace(\"http://www.wrox.com/\");\n}, 1000);\n```\n\n> reload()，作用是重新加载当前显示的页面\n\n如果调用reload()\n时不传递任何参数，页面就会以最有效的方式重新加载。也就是说，如果页面自上次请求以来并没有改\n变过，页面就会从浏览器缓存中重新加载。如果要强制从服务器重新加载，则需要像下面这样为该方法\n传递参数true。\n```\nlocation.reload(); //重新加载（有可能从缓存中加载）\nlocation.reload(true); //重新加载（从服务器重新加载）\n```\n位于reload()调用之后的代码可能会也可能不会执行，这要取决于网络延迟或系统资源等因素。\n为此，最好将reload()放在代码的最后一行。","slug":"Location-Object","published":1,"updated":"2018-11-29T07:54:12.463Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrv00006j2s4o0lorwfh","content":"<ul>\n<li>它提供了与当前窗口中加载的文档有关的信息，还提供了一些导航功能。</li>\n<li><code>location</code>对象很特别，它既是<code>window</code>对象的属性，又是<code>document</code>对象的属性。</li>\n</ul>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window.<span class=\"keyword\">location</span> <span class=\"title\">=== document</span>.<span class=\"keyword\">location</span>  <span class=\"title\">//true</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>location对象的用处不只表现在它保存当前文档和信息，还表现在它将URL解析为独立的片段。</li>\n</ul>\n<a id=\"more\"></a>\n<blockquote>\n<p>属性</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>例子</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hash</td>\n<td>“#contents”</td>\n<td>返回URL中hash(#号后跟零或多个字符)，如果URL中不包含散列，则返回空字符串</td>\n</tr>\n<tr>\n<td>host</td>\n<td>“<a href=\"http://www.qxy.com:80\" target=\"_blank\" rel=\"noopener\">www.qxy.com:80</a>”</td>\n<td>返回服务器名称和端口号（如果有）</td>\n</tr>\n<tr>\n<td>hostname</td>\n<td>“<a href=\"http://www.qxy.com\" target=\"_blank\" rel=\"noopener\">www.qxy.com</a>”</td>\n<td>返回不带端口号的服务器名称</td>\n</tr>\n<tr>\n<td>href</td>\n<td>“<a href=\"http://www.qxy.com\" target=\"_blank\" rel=\"noopener\">http://www.qxy.com</a>”</td>\n<td>返回当前加载页面的完整URL。而location对象的toString()方法也返回这个值</td>\n</tr>\n<tr>\n<td>pathname</td>\n<td>“/blog/”</td>\n<td>返回URL中的目录和（或）文件名</td>\n</tr>\n<tr>\n<td>port</td>\n<td>“8080”</td>\n<td>返回URL中指定的端口号。如果URL中不包含端口号，则这个属性返回空字符串</td>\n</tr>\n<tr>\n<td>protocol</td>\n<td>“http:”</td>\n<td>返回页面使用的协议。通常是http:或https:</td>\n</tr>\n<tr>\n<td>search</td>\n<td>“?q=javascript”</td>\n<td>返回URL的查询字符串。这个字符串以问号开头</td>\n</tr>\n</tbody>\n</table>\n<h4><span id=\"查询字符串参数\">查询字符串参数</span></h4>\n<p>虽然通过上面的属性可以访问到location 对象的大多数信息，但其中访问URL 包含的查询字符<br>\n串的属性并不方便。尽管location.search 返回从问号到URL 末尾的所有内容，但却没有办法逐个<br>\n访问其中的每个查询字符串参数。为此，可以像下面这样创建一个函数，用以解析查询字符串，然后返<br>\n回包含所有参数的一个对象：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getQueryStringArgs</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//取得查询字符串并去掉开头的问号</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> qs = (location.search.length &gt; <span class=\"number\">0</span> ? location.search.substring(<span class=\"number\">1</span>) : <span class=\"string\">\"\"</span> ),</span><br><span class=\"line\">        <span class=\"comment\">//保存数据的对象</span></span><br><span class=\"line\">        args = &#123;&#125;,</span><br><span class=\"line\">        <span class=\"comment\">//取得每一项</span></span><br><span class=\"line\">        items = qs.length ? qs.split(<span class=\"string\">'&amp;'</span>) : [],</span><br><span class=\"line\">        item = <span class=\"literal\">null</span>,</span><br><span class=\"line\">        name = <span class=\"literal\">null</span>,</span><br><span class=\"line\">        value = <span class=\"literal\">null</span>,</span><br><span class=\"line\">        <span class=\"comment\">//在for循环中使用</span></span><br><span class=\"line\">        i = <span class=\"number\">0</span>,</span><br><span class=\"line\">        len = items.length;</span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"comment\">//逐个将每一项添加到args对象中</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>;i &lt; len; i++)&#123;</span><br><span class=\"line\">        item = items[i].split(<span class=\"string\">':'</span>);</span><br><span class=\"line\">        name = <span class=\"built_in\">decodeURIComponent</span>(item[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        value = <span class=\"built_in\">decodeURIComponent</span>(item[<span class=\"number\">1</span>]);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(name.length)&#123;</span><br><span class=\"line\">            args[name] = value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> args;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4><span id=\"位置操作\">位置操作</span></h4>\n<p>使用location 对象可以通过很多方式来改变浏览器的位置。首先，也是最常用的方式，就是使用<br>\nassign()方法并为其传递一个URL，如下所示。</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location.assign(<span class=\"string\">\"http://www.qxy.com\"</span>)<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<p>这样，就可以立即打开新URL 并在浏览器的历史记录中生成一条记录。如果是将<code>location.href</code><br>\n或<code>window.location</code> 设置为一个URL 值，也会以该值调用<code>assign()</code>方法。例如，下列两行代码与<br>\n显式调用<code>assign()</code>方法的效果完全一样。</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window.location = <span class=\"string\">\"http://www.wrox.com\"</span><span class=\"comment\">;</span></span><br><span class=\"line\">location.href = <span class=\"string\">\"http://www.wrox.com\"</span><span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<p>在这些改变浏览器位置的方法中，最常用的是设置<code>location.href</code>属性。</p>\n<p>修改location 对象的其他属性也可以改变当前加载的页面</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"regexp\">//</span>假设初始URL 为http:<span class=\"regexp\">//</span>www.wrox.com<span class=\"regexp\">/WileyCDA/</span></span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.wrox.com/WileyCDA/#section1\"</span></span><br><span class=\"line\">location.hash = <span class=\"string\">\"#section1\"</span>;</span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.wrox.com/WileyCDA/?q=javascript\"</span></span><br><span class=\"line\">location.search = <span class=\"string\">\"?q=javascript\"</span>;</span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.yahoo.com/WileyCDA/\"</span></span><br><span class=\"line\">location.hostname = <span class=\"string\">\"www.yahoo.com\"</span>;</span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.yahoo.com/mydir/\"</span></span><br><span class=\"line\">location.pathname = <span class=\"string\">\"mydir\"</span>;</span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.yahoo.com:8080/WileyCDA/\"</span></span><br><span class=\"line\">location.port = <span class=\"number\">8080</span>;</span><br></pre></td></tr></table></figure>\n<p>每次修改location 的属性（hash 除外），页面都会以新URL 重新加载。</p>\n<blockquote>\n<p>在IE8、Firefox 1、Safari 2+、Opera 9+和Chrome 中，修改hash 的值会在浏览<br>\n器的历史记录中生成一条新记录。在IE 的早期版本中，hash 属性不会在用户单击“后<br>\n退”和“前进”按钮时被更新，而只会在用户单击包含hash 的URL 时才会被更新。</p>\n</blockquote>\n<blockquote>\n<p>replace()方法。这个方法<br>\n只接受一个参数，即要导航到的URL；结果虽然会导致浏览器位置改变，但不会在历史记录中生成新记<br>\n录。在调用replace()方法之后，用户不能回到前一个页面</p>\n</blockquote>\n<figure class=\"highlight lisp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setTimeout(<span class=\"name\">function</span> () &#123;</span><br><span class=\"line\">location.replace(<span class=\"string\">\"http://www.wrox.com/\"</span>)<span class=\"comment\">;</span></span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>)<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>reload()，作用是重新加载当前显示的页面</p>\n</blockquote>\n<p>如果调用reload()<br>\n时不传递任何参数，页面就会以最有效的方式重新加载。也就是说，如果页面自上次请求以来并没有改<br>\n变过，页面就会从浏览器缓存中重新加载。如果要强制从服务器重新加载，则需要像下面这样为该方法<br>\n传递参数true。</p>\n<figure class=\"highlight glsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">location</span>.reload(); <span class=\"comment\">//重新加载（有可能从缓存中加载）</span></span><br><span class=\"line\"><span class=\"keyword\">location</span>.reload(<span class=\"literal\">true</span>); <span class=\"comment\">//重新加载（从服务器重新加载）</span></span><br></pre></td></tr></table></figure>\n<p>位于reload()调用之后的代码可能会也可能不会执行，这要取决于网络延迟或系统资源等因素。<br>\n为此，最好将reload()放在代码的最后一行。</p>\n","site":{"data":{}},"excerpt":"<ul>\n<li>它提供了与当前窗口中加载的文档有关的信息，还提供了一些导航功能。</li>\n<li><code>location</code>对象很特别，它既是<code>window</code>对象的属性，又是<code>document</code>对象的属性。</li>\n</ul>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window.<span class=\"keyword\">location</span> <span class=\"title\">=== document</span>.<span class=\"keyword\">location</span>  <span class=\"title\">//true</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>location对象的用处不只表现在它保存当前文档和信息，还表现在它将URL解析为独立的片段。</li>\n</ul>","more":"<blockquote>\n<p>属性</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>例子</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hash</td>\n<td>“#contents”</td>\n<td>返回URL中hash(#号后跟零或多个字符)，如果URL中不包含散列，则返回空字符串</td>\n</tr>\n<tr>\n<td>host</td>\n<td>“<a href=\"http://www.qxy.com:80\" target=\"_blank\" rel=\"noopener\">www.qxy.com:80</a>”</td>\n<td>返回服务器名称和端口号（如果有）</td>\n</tr>\n<tr>\n<td>hostname</td>\n<td>“<a href=\"http://www.qxy.com\" target=\"_blank\" rel=\"noopener\">www.qxy.com</a>”</td>\n<td>返回不带端口号的服务器名称</td>\n</tr>\n<tr>\n<td>href</td>\n<td>“<a href=\"http://www.qxy.com\" target=\"_blank\" rel=\"noopener\">http://www.qxy.com</a>”</td>\n<td>返回当前加载页面的完整URL。而location对象的toString()方法也返回这个值</td>\n</tr>\n<tr>\n<td>pathname</td>\n<td>“/blog/”</td>\n<td>返回URL中的目录和（或）文件名</td>\n</tr>\n<tr>\n<td>port</td>\n<td>“8080”</td>\n<td>返回URL中指定的端口号。如果URL中不包含端口号，则这个属性返回空字符串</td>\n</tr>\n<tr>\n<td>protocol</td>\n<td>“http:”</td>\n<td>返回页面使用的协议。通常是http:或https:</td>\n</tr>\n<tr>\n<td>search</td>\n<td>“?q=javascript”</td>\n<td>返回URL的查询字符串。这个字符串以问号开头</td>\n</tr>\n</tbody>\n</table>\n<h4>查询字符串参数</h4>\n<p>虽然通过上面的属性可以访问到location 对象的大多数信息，但其中访问URL 包含的查询字符<br>\n串的属性并不方便。尽管location.search 返回从问号到URL 末尾的所有内容，但却没有办法逐个<br>\n访问其中的每个查询字符串参数。为此，可以像下面这样创建一个函数，用以解析查询字符串，然后返<br>\n回包含所有参数的一个对象：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getQueryStringArgs</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//取得查询字符串并去掉开头的问号</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> qs = (location.search.length &gt; <span class=\"number\">0</span> ? location.search.substring(<span class=\"number\">1</span>) : <span class=\"string\">\"\"</span> ),</span><br><span class=\"line\">        <span class=\"comment\">//保存数据的对象</span></span><br><span class=\"line\">        args = &#123;&#125;,</span><br><span class=\"line\">        <span class=\"comment\">//取得每一项</span></span><br><span class=\"line\">        items = qs.length ? qs.split(<span class=\"string\">'&amp;'</span>) : [],</span><br><span class=\"line\">        item = <span class=\"literal\">null</span>,</span><br><span class=\"line\">        name = <span class=\"literal\">null</span>,</span><br><span class=\"line\">        value = <span class=\"literal\">null</span>,</span><br><span class=\"line\">        <span class=\"comment\">//在for循环中使用</span></span><br><span class=\"line\">        i = <span class=\"number\">0</span>,</span><br><span class=\"line\">        len = items.length;</span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"comment\">//逐个将每一项添加到args对象中</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>;i &lt; len; i++)&#123;</span><br><span class=\"line\">        item = items[i].split(<span class=\"string\">':'</span>);</span><br><span class=\"line\">        name = <span class=\"built_in\">decodeURIComponent</span>(item[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        value = <span class=\"built_in\">decodeURIComponent</span>(item[<span class=\"number\">1</span>]);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(name.length)&#123;</span><br><span class=\"line\">            args[name] = value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> args;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4>位置操作</h4>\n<p>使用location 对象可以通过很多方式来改变浏览器的位置。首先，也是最常用的方式，就是使用<br>\nassign()方法并为其传递一个URL，如下所示。</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location.assign(<span class=\"string\">\"http://www.qxy.com\"</span>)<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<p>这样，就可以立即打开新URL 并在浏览器的历史记录中生成一条记录。如果是将<code>location.href</code><br>\n或<code>window.location</code> 设置为一个URL 值，也会以该值调用<code>assign()</code>方法。例如，下列两行代码与<br>\n显式调用<code>assign()</code>方法的效果完全一样。</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window.location = <span class=\"string\">\"http://www.wrox.com\"</span><span class=\"comment\">;</span></span><br><span class=\"line\">location.href = <span class=\"string\">\"http://www.wrox.com\"</span><span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<p>在这些改变浏览器位置的方法中，最常用的是设置<code>location.href</code>属性。</p>\n<p>修改location 对象的其他属性也可以改变当前加载的页面</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"regexp\">//</span>假设初始URL 为http:<span class=\"regexp\">//</span>www.wrox.com<span class=\"regexp\">/WileyCDA/</span></span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.wrox.com/WileyCDA/#section1\"</span></span><br><span class=\"line\">location.hash = <span class=\"string\">\"#section1\"</span>;</span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.wrox.com/WileyCDA/?q=javascript\"</span></span><br><span class=\"line\">location.search = <span class=\"string\">\"?q=javascript\"</span>;</span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.yahoo.com/WileyCDA/\"</span></span><br><span class=\"line\">location.hostname = <span class=\"string\">\"www.yahoo.com\"</span>;</span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.yahoo.com/mydir/\"</span></span><br><span class=\"line\">location.pathname = <span class=\"string\">\"mydir\"</span>;</span><br><span class=\"line\"><span class=\"regexp\">//</span>将URL 修改为<span class=\"string\">\"http://www.yahoo.com:8080/WileyCDA/\"</span></span><br><span class=\"line\">location.port = <span class=\"number\">8080</span>;</span><br></pre></td></tr></table></figure>\n<p>每次修改location 的属性（hash 除外），页面都会以新URL 重新加载。</p>\n<blockquote>\n<p>在IE8、Firefox 1、Safari 2+、Opera 9+和Chrome 中，修改hash 的值会在浏览<br>\n器的历史记录中生成一条新记录。在IE 的早期版本中，hash 属性不会在用户单击“后<br>\n退”和“前进”按钮时被更新，而只会在用户单击包含hash 的URL 时才会被更新。</p>\n</blockquote>\n<blockquote>\n<p>replace()方法。这个方法<br>\n只接受一个参数，即要导航到的URL；结果虽然会导致浏览器位置改变，但不会在历史记录中生成新记<br>\n录。在调用replace()方法之后，用户不能回到前一个页面</p>\n</blockquote>\n<figure class=\"highlight lisp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setTimeout(<span class=\"name\">function</span> () &#123;</span><br><span class=\"line\">location.replace(<span class=\"string\">\"http://www.wrox.com/\"</span>)<span class=\"comment\">;</span></span><br><span class=\"line\">&#125;, <span class=\"number\">1000</span>)<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>reload()，作用是重新加载当前显示的页面</p>\n</blockquote>\n<p>如果调用reload()<br>\n时不传递任何参数，页面就会以最有效的方式重新加载。也就是说，如果页面自上次请求以来并没有改<br>\n变过，页面就会从浏览器缓存中重新加载。如果要强制从服务器重新加载，则需要像下面这样为该方法<br>\n传递参数true。</p>\n<figure class=\"highlight glsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">location</span>.reload(); <span class=\"comment\">//重新加载（有可能从缓存中加载）</span></span><br><span class=\"line\"><span class=\"keyword\">location</span>.reload(<span class=\"literal\">true</span>); <span class=\"comment\">//重新加载（从服务器重新加载）</span></span><br></pre></td></tr></table></figure>\n<p>位于reload()调用之后的代码可能会也可能不会执行，这要取决于网络延迟或系统资源等因素。<br>\n为此，最好将reload()放在代码的最后一行。</p>"},{"title":"div模拟textarea文本域轻松实现高度自适应","date":"2017-08-14T03:53:07.000Z","_content":"\n\n> 在工作中会用到textarea文本域自适应输入的内容的情况，今天我们根据HTML5的新属性contenteditable来实现这个功能。\n\n\n\n","source":"_posts/contenteditable.md","raw":"---\ntitle: div模拟textarea文本域轻松实现高度自适应\ndate: 2017-08-14 11:53:07\ntags: [html5,contenteditable]\n---\n\n\n> 在工作中会用到textarea文本域自适应输入的内容的情况，今天我们根据HTML5的新属性contenteditable来实现这个功能。\n\n\n\n","slug":"contenteditable","published":1,"updated":"2018-11-29T07:54:12.464Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrv30008j2s48wyracqs","content":"<blockquote>\n<p>在工作中会用到textarea文本域自适应输入的内容的情况，今天我们根据HTML5的新属性contenteditable来实现这个功能。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>在工作中会用到textarea文本域自适应输入的内容的情况，今天我们根据HTML5的新属性contenteditable来实现这个功能。</p>\n</blockquote>\n"},{"title":"[Hexo] Theme BeanTech","catalog":true,"date":"2017-03-18T02:51:24.000Z","subtitle":"This is hexo theme Demo.","header-img":"Demo.png","catagories":["Hexo"],"_content":"> Ported Theme of [Hux Blog](https://github.com/Huxpro/huxpro.github.io), Thank [Huxpro](https://github.com/Huxpro) for designing such a flawless theme.\n> \n> This BeanTech theme created by [YuHsuan](http://beantech.org) modified from the original Porter [Kaijun](http://kaijun.rocks/hexo-theme-huxblog/)\n\n# [Live Demo](http://beantech.org)\n---\n![BeanTech Desktop](http://beantech.org/img/beantech-desktop.png)\n\n# Usage\n---\nI publish the whole project for your convenience, so you can just follow the instruction down below, then you can easily customiz your own blog!\n\nLet's begin!!!\n\n## Init\n---\n```bash\ngit clone https://github.com/YenYuHsuan/hexo-theme-beantech.git ./hexo-beantech\ncd hexo-beantech\nnpm install\n```\n\n## Modify\n---\nModify `_config.yml` file with your own info.\nEspecially the section:\n### Deployment\nReplace to your own repo!\n```yml\ndeploy:\n  type: git\n  repo: https://github.com/<yourAccount>/<repo>\n  branch: <your-branch>\n```\n\n### Sidebar settings\nCopy your avatar image to `<root>/img/` and modify the `_config.yml`:\n```yml\nsidebar: true    # whether or not using Sidebar.\nsidebar-about-description: \"<your description>\"\nsidebar-avatar: img/<your avatar path>\n```\nand activate your personal widget you like\n```yml\nwidgets:         # here are widget you can use, you can comment out\n- featured-tags\n- short-about\n- recent-posts\n- friends-blog\n- archive\n- category\n```\nif you want to add sidebar widget, please add at `layout/_widget`.\n### Signature Setup\nCopy your signature image to `<root>/img/signature` and modify the `_config.yml`:\n```yml\nsignature: true   # show signature\nsignature-img: img/signature/<your-signature-ID>\n```\n### Go to top icon Setup\nMy icon is using iron man, you can change to your own icon at `css/image`.\n\n### Post tag\nYou can decide to show post tags or not.\n```yml\nhome_posts_tag: true\n```\n![home_posts_tag-true](home_posts_tag-true.png)\n```yml\nhome_posts_tag: false\n```\n![home_posts_tag-false](home_posts_tag-false.png)\n\n### Markdown render\nMy markdown render engine plugin is [hexo-renderer-markdown-it](https://github.com/celsomiranda/hexo-renderer-markdown-it).\n```yml\n# Markdown-it config\n## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki\nmarkdown:\n  render:\n    html: true\n    xhtmlOut: false\n    breaks: true\n    linkify: true\n    typographer: true\n    quotes: '“”‘’'\n```\nand if you want to change the header anchor 'ℬ', you can go to `layout/post.ejs` to change it.\n```javascript\nasync(\"https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js\",function(){\n        anchors.options = {\n          visible: 'hover',\n          placement: 'left',\n          icon: ℬ // this is the header anchor \"unicode\" icon\n        };\n```\n\n## Hexo Basics\n---\nSome hexo command:\n```bash\nhexo new post \"<post name>\" # you can change post to another layout if you want\nhexo clean && hexo generate # generate the static file\nhexo server # run hexo in local environment\nhexo deploy # hexo will push the static files automatically into the specific branch(gh-pages) of your repo!\n```\n\n# Have fun ^_^ \n---\n<!-- Place this tag in your head or just before your close body tag. -->\n<script async defer src=\"https://buttons.github.io/buttons.js\"></script>\n<!-- Place this tag where you want the button to render. -->\n\nPlease <a class=\"github-button\" href=\"https://github.com/YenYuHsuan/hexo-theme-beantech\" data-icon=\"octicon-star\" aria-label=\"Star YenYuHsuan/hexo-theme-beantech on GitHub\">Star</a> this Project if you like it! <a class=\"github-button\" href=\"https://github.com/YenYuHsuan\" aria-label=\"Follow @YenYuHsuan on GitHub\">Follow</a> would also be appreciated!\nPeace!\n","source":"_posts/hexo-theme-beantech.md","raw":"---\ntitle: \"[Hexo] Theme BeanTech\"\ncatalog: true\ndate: 2017-03-18 10:51:24\nsubtitle: \"This is hexo theme Demo.\"\nheader-img: \"Demo.png\"\ntags:\n- Hexo\n- Blog\ncatagories:\n- Hexo\n---\n> Ported Theme of [Hux Blog](https://github.com/Huxpro/huxpro.github.io), Thank [Huxpro](https://github.com/Huxpro) for designing such a flawless theme.\n> \n> This BeanTech theme created by [YuHsuan](http://beantech.org) modified from the original Porter [Kaijun](http://kaijun.rocks/hexo-theme-huxblog/)\n\n# [Live Demo](http://beantech.org)\n---\n![BeanTech Desktop](http://beantech.org/img/beantech-desktop.png)\n\n# Usage\n---\nI publish the whole project for your convenience, so you can just follow the instruction down below, then you can easily customiz your own blog!\n\nLet's begin!!!\n\n## Init\n---\n```bash\ngit clone https://github.com/YenYuHsuan/hexo-theme-beantech.git ./hexo-beantech\ncd hexo-beantech\nnpm install\n```\n\n## Modify\n---\nModify `_config.yml` file with your own info.\nEspecially the section:\n### Deployment\nReplace to your own repo!\n```yml\ndeploy:\n  type: git\n  repo: https://github.com/<yourAccount>/<repo>\n  branch: <your-branch>\n```\n\n### Sidebar settings\nCopy your avatar image to `<root>/img/` and modify the `_config.yml`:\n```yml\nsidebar: true    # whether or not using Sidebar.\nsidebar-about-description: \"<your description>\"\nsidebar-avatar: img/<your avatar path>\n```\nand activate your personal widget you like\n```yml\nwidgets:         # here are widget you can use, you can comment out\n- featured-tags\n- short-about\n- recent-posts\n- friends-blog\n- archive\n- category\n```\nif you want to add sidebar widget, please add at `layout/_widget`.\n### Signature Setup\nCopy your signature image to `<root>/img/signature` and modify the `_config.yml`:\n```yml\nsignature: true   # show signature\nsignature-img: img/signature/<your-signature-ID>\n```\n### Go to top icon Setup\nMy icon is using iron man, you can change to your own icon at `css/image`.\n\n### Post tag\nYou can decide to show post tags or not.\n```yml\nhome_posts_tag: true\n```\n![home_posts_tag-true](home_posts_tag-true.png)\n```yml\nhome_posts_tag: false\n```\n![home_posts_tag-false](home_posts_tag-false.png)\n\n### Markdown render\nMy markdown render engine plugin is [hexo-renderer-markdown-it](https://github.com/celsomiranda/hexo-renderer-markdown-it).\n```yml\n# Markdown-it config\n## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki\nmarkdown:\n  render:\n    html: true\n    xhtmlOut: false\n    breaks: true\n    linkify: true\n    typographer: true\n    quotes: '“”‘’'\n```\nand if you want to change the header anchor 'ℬ', you can go to `layout/post.ejs` to change it.\n```javascript\nasync(\"https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js\",function(){\n        anchors.options = {\n          visible: 'hover',\n          placement: 'left',\n          icon: ℬ // this is the header anchor \"unicode\" icon\n        };\n```\n\n## Hexo Basics\n---\nSome hexo command:\n```bash\nhexo new post \"<post name>\" # you can change post to another layout if you want\nhexo clean && hexo generate # generate the static file\nhexo server # run hexo in local environment\nhexo deploy # hexo will push the static files automatically into the specific branch(gh-pages) of your repo!\n```\n\n# Have fun ^_^ \n---\n<!-- Place this tag in your head or just before your close body tag. -->\n<script async defer src=\"https://buttons.github.io/buttons.js\"></script>\n<!-- Place this tag where you want the button to render. -->\n\nPlease <a class=\"github-button\" href=\"https://github.com/YenYuHsuan/hexo-theme-beantech\" data-icon=\"octicon-star\" aria-label=\"Star YenYuHsuan/hexo-theme-beantech on GitHub\">Star</a> this Project if you like it! <a class=\"github-button\" href=\"https://github.com/YenYuHsuan\" aria-label=\"Follow @YenYuHsuan on GitHub\">Follow</a> would also be appreciated!\nPeace!\n","slug":"hexo-theme-beantech","published":1,"updated":"2018-11-29T07:41:16.920Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrv70009j2s4tm4zc0es","content":"<blockquote>\n<p>Ported Theme of <a href=\"https://github.com/Huxpro/huxpro.github.io\" target=\"_blank\" rel=\"noopener\">Hux Blog</a>, Thank <a href=\"https://github.com/Huxpro\" target=\"_blank\" rel=\"noopener\">Huxpro</a> for designing such a flawless theme.</p>\n<p>This BeanTech theme created by <a href=\"http://beantech.org\" target=\"_blank\" rel=\"noopener\">YuHsuan</a> modified from the original Porter <a href=\"http://kaijun.rocks/hexo-theme-huxblog/\" target=\"_blank\" rel=\"noopener\">Kaijun</a></p>\n</blockquote>\n<h1><span id=\"live-demo\"></span></h1>\n<hr>\n<p><img src=\"http://beantech.org/img/beantech-desktop.png\" alt=\"BeanTech Desktop\"></p>\n<h1><span id=\"usage\">Usage</span></h1>\n<hr>\n<p>I publish the whole project for your convenience, so you can just follow the instruction down below, then you can easily customiz your own blog!</p>\n<p>Let’s begin!!!</p>\n<h2><span id=\"init\">Init</span></h2>\n<hr>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/YenYuHsuan/hexo-theme-beantech.git ./hexo-beantech</span><br><span class=\"line\"><span class=\"built_in\">cd</span> hexo-beantech</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n<h2><span id=\"modify\">Modify</span></h2>\n<hr>\n<p>Modify <code>_config.yml</code> file with your own info.<br>\nEspecially the section:</p>\n<h3><span id=\"deployment\">Deployment</span></h3>\n<p>Replace to your own repo!</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"><span class=\"attr\">  type:</span> <span class=\"string\">git</span></span><br><span class=\"line\"><span class=\"attr\">  repo:</span> <span class=\"attr\">https://github.com/&lt;yourAccount&gt;/&lt;repo&gt;</span></span><br><span class=\"line\"><span class=\"attr\">  branch:</span> <span class=\"string\">&lt;your-branch&gt;</span></span><br></pre></td></tr></table></figure>\n<h3><span id=\"sidebar-settings\">Sidebar settings</span></h3>\n<p>Copy your avatar image to <code>&lt;root&gt;/img/</code> and modify the <code>_config.yml</code>:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">sidebar:</span> <span class=\"literal\">true</span>    <span class=\"comment\"># whether or not using Sidebar.</span></span><br><span class=\"line\"><span class=\"attr\">sidebar-about-description:</span> <span class=\"string\">\"&lt;your description&gt;\"</span></span><br><span class=\"line\"><span class=\"attr\">sidebar-avatar:</span> <span class=\"string\">img/&lt;your</span> <span class=\"string\">avatar</span> <span class=\"string\">path&gt;</span></span><br></pre></td></tr></table></figure>\n<p>and activate your personal widget you like</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">widgets:</span>         <span class=\"comment\"># here are widget you can use, you can comment out</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">featured-tags</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">short-about</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">recent-posts</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">friends-blog</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">archive</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">category</span></span><br></pre></td></tr></table></figure>\n<p>if you want to add sidebar widget, please add at <code>layout/_widget</code>.</p>\n<h3><span id=\"signature-setup\">Signature Setup</span></h3>\n<p>Copy your signature image to <code>&lt;root&gt;/img/signature</code> and modify the <code>_config.yml</code>:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">signature:</span> <span class=\"literal\">true</span>   <span class=\"comment\"># show signature</span></span><br><span class=\"line\"><span class=\"attr\">signature-img:</span> <span class=\"string\">img/signature/&lt;your-signature-ID&gt;</span></span><br></pre></td></tr></table></figure>\n<h3><span id=\"go-to-top-icon-setup\">Go to top icon Setup</span></h3>\n<p>My icon is using iron man, you can change to your own icon at <code>css/image</code>.</p>\n<h3><span id=\"post-tag\">Post tag</span></h3>\n<p>You can decide to show post tags or not.</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">home_posts_tag:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"home_posts_tag-true.png\" alt=\"home_posts_tag-true\"></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">home_posts_tag:</span> <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"home_posts_tag-false.png\" alt=\"home_posts_tag-false\"></p>\n<h3><span id=\"markdown-render\">Markdown render</span></h3>\n<p>My markdown render engine plugin is <a href=\"https://github.com/celsomiranda/hexo-renderer-markdown-it\" target=\"_blank\" rel=\"noopener\">hexo-renderer-markdown-it</a>.</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Markdown-it config</span></span><br><span class=\"line\"><span class=\"comment\">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span></span><br><span class=\"line\"><span class=\"attr\">markdown:</span></span><br><span class=\"line\"><span class=\"attr\">  render:</span></span><br><span class=\"line\"><span class=\"attr\">    html:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    xhtmlOut:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">    breaks:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    linkify:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    typographer:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    quotes:</span> <span class=\"string\">'“”‘’'</span></span><br></pre></td></tr></table></figure>\n<p>and if you want to change the header anchor ‘ℬ’, you can go to <code>layout/post.ejs</code> to change it.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span>(<span class=\"string\">\"https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        anchors.options = &#123;</span><br><span class=\"line\">          visible: <span class=\"string\">'hover'</span>,</span><br><span class=\"line\">          placement: <span class=\"string\">'left'</span>,</span><br><span class=\"line\">          icon: ℬ <span class=\"comment\">// this is the header anchor \"unicode\" icon</span></span><br><span class=\"line\">        &#125;;</span><br></pre></td></tr></table></figure>\n<h2><span id=\"hexo-basics\">Hexo Basics</span></h2>\n<hr>\n<p>Some hexo command:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new post <span class=\"string\">\"&lt;post name&gt;\"</span> <span class=\"comment\"># you can change post to another layout if you want</span></span><br><span class=\"line\">hexo clean &amp;&amp; hexo generate <span class=\"comment\"># generate the static file</span></span><br><span class=\"line\">hexo server <span class=\"comment\"># run hexo in local environment</span></span><br><span class=\"line\">hexo deploy <span class=\"comment\"># hexo will push the static files automatically into the specific branch(gh-pages) of your repo!</span></span><br></pre></td></tr></table></figure>\n<h1><span id=\"have-fun-_\">Have fun ^_^</span></h1>\n<hr>\n<!-- Place this tag in your head or just before your close body tag. -->\n<script async defer src=\"https://buttons.github.io/buttons.js\"></script>\n<!-- Place this tag where you want the button to render. -->\n<p>Please <a class=\"github-button\" href=\"https://github.com/YenYuHsuan/hexo-theme-beantech\" data-icon=\"octicon-star\" aria-label=\"Star YenYuHsuan/hexo-theme-beantech on GitHub\" target=\"_blank\" rel=\"noopener\">Star</a> this Project if you like it! <a class=\"github-button\" href=\"https://github.com/YenYuHsuan\" aria-label=\"Follow @YenYuHsuan on GitHub\" target=\"_blank\" rel=\"noopener\">Follow</a> would also be appreciated!<br>\nPeace!</p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>Ported Theme of <a href=\"https://github.com/Huxpro/huxpro.github.io\" target=\"_blank\" rel=\"noopener\">Hux Blog</a>, Thank <a href=\"https://github.com/Huxpro\" target=\"_blank\" rel=\"noopener\">Huxpro</a> for designing such a flawless theme.</p>\n<p>This BeanTech theme created by <a href=\"http://beantech.org\" target=\"_blank\" rel=\"noopener\">YuHsuan</a> modified from the original Porter <a href=\"http://kaijun.rocks/hexo-theme-huxblog/\" target=\"_blank\" rel=\"noopener\">Kaijun</a></p>\n</blockquote>\n<h1><a href=\"http://beantech.org\" target=\"_blank\" rel=\"noopener\">Live Demo</a></h1>\n<hr>\n<p><img src=\"http://beantech.org/img/beantech-desktop.png\" alt=\"BeanTech Desktop\"></p>\n<h1>Usage</h1>\n<hr>\n<p>I publish the whole project for your convenience, so you can just follow the instruction down below, then you can easily customiz your own blog!</p>\n<p>Let’s begin!!!</p>\n<h2>Init</h2>\n<hr>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/YenYuHsuan/hexo-theme-beantech.git ./hexo-beantech</span><br><span class=\"line\"><span class=\"built_in\">cd</span> hexo-beantech</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n<h2>Modify</h2>\n<hr>\n<p>Modify <code>_config.yml</code> file with your own info.<br>\nEspecially the section:</p>\n<h3>Deployment</h3>\n<p>Replace to your own repo!</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"><span class=\"attr\">  type:</span> <span class=\"string\">git</span></span><br><span class=\"line\"><span class=\"attr\">  repo:</span> <span class=\"attr\">https://github.com/&lt;yourAccount&gt;/&lt;repo&gt;</span></span><br><span class=\"line\"><span class=\"attr\">  branch:</span> <span class=\"string\">&lt;your-branch&gt;</span></span><br></pre></td></tr></table></figure>\n<h3>Sidebar settings</h3>\n<p>Copy your avatar image to <code>&lt;root&gt;/img/</code> and modify the <code>_config.yml</code>:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">sidebar:</span> <span class=\"literal\">true</span>    <span class=\"comment\"># whether or not using Sidebar.</span></span><br><span class=\"line\"><span class=\"attr\">sidebar-about-description:</span> <span class=\"string\">\"&lt;your description&gt;\"</span></span><br><span class=\"line\"><span class=\"attr\">sidebar-avatar:</span> <span class=\"string\">img/&lt;your</span> <span class=\"string\">avatar</span> <span class=\"string\">path&gt;</span></span><br></pre></td></tr></table></figure>\n<p>and activate your personal widget you like</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">widgets:</span>         <span class=\"comment\"># here are widget you can use, you can comment out</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">featured-tags</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">short-about</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">recent-posts</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">friends-blog</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">archive</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">category</span></span><br></pre></td></tr></table></figure>\n<p>if you want to add sidebar widget, please add at <code>layout/_widget</code>.</p>\n<h3>Signature Setup</h3>\n<p>Copy your signature image to <code>&lt;root&gt;/img/signature</code> and modify the <code>_config.yml</code>:</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">signature:</span> <span class=\"literal\">true</span>   <span class=\"comment\"># show signature</span></span><br><span class=\"line\"><span class=\"attr\">signature-img:</span> <span class=\"string\">img/signature/&lt;your-signature-ID&gt;</span></span><br></pre></td></tr></table></figure>\n<h3>Go to top icon Setup</h3>\n<p>My icon is using iron man, you can change to your own icon at <code>css/image</code>.</p>\n<h3>Post tag</h3>\n<p>You can decide to show post tags or not.</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">home_posts_tag:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"home_posts_tag-true.png\" alt=\"home_posts_tag-true\"></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">home_posts_tag:</span> <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"home_posts_tag-false.png\" alt=\"home_posts_tag-false\"></p>\n<h3>Markdown render</h3>\n<p>My markdown render engine plugin is <a href=\"https://github.com/celsomiranda/hexo-renderer-markdown-it\" target=\"_blank\" rel=\"noopener\">hexo-renderer-markdown-it</a>.</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Markdown-it config</span></span><br><span class=\"line\"><span class=\"comment\">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span></span><br><span class=\"line\"><span class=\"attr\">markdown:</span></span><br><span class=\"line\"><span class=\"attr\">  render:</span></span><br><span class=\"line\"><span class=\"attr\">    html:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    xhtmlOut:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">    breaks:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    linkify:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    typographer:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    quotes:</span> <span class=\"string\">'“”‘’'</span></span><br></pre></td></tr></table></figure>\n<p>and if you want to change the header anchor ‘ℬ’, you can go to <code>layout/post.ejs</code> to change it.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span>(<span class=\"string\">\"https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        anchors.options = &#123;</span><br><span class=\"line\">          visible: <span class=\"string\">'hover'</span>,</span><br><span class=\"line\">          placement: <span class=\"string\">'left'</span>,</span><br><span class=\"line\">          icon: ℬ <span class=\"comment\">// this is the header anchor \"unicode\" icon</span></span><br><span class=\"line\">        &#125;;</span><br></pre></td></tr></table></figure>\n<h2>Hexo Basics</h2>\n<hr>\n<p>Some hexo command:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new post <span class=\"string\">\"&lt;post name&gt;\"</span> <span class=\"comment\"># you can change post to another layout if you want</span></span><br><span class=\"line\">hexo clean &amp;&amp; hexo generate <span class=\"comment\"># generate the static file</span></span><br><span class=\"line\">hexo server <span class=\"comment\"># run hexo in local environment</span></span><br><span class=\"line\">hexo deploy <span class=\"comment\"># hexo will push the static files automatically into the specific branch(gh-pages) of your repo!</span></span><br></pre></td></tr></table></figure>\n<h1>Have fun ^_^</h1>\n<hr>\n<!-- Place this tag in your head or just before your close body tag. -->\n<script async defer src=\"https://buttons.github.io/buttons.js\"></script>\n<!-- Place this tag where you want the button to render. -->\n<p>Please <a class=\"github-button\" href=\"https://github.com/YenYuHsuan/hexo-theme-beantech\" data-icon=\"octicon-star\" aria-label=\"Star YenYuHsuan/hexo-theme-beantech on GitHub\" target=\"_blank\" rel=\"noopener\">Star</a> this Project if you like it! <a class=\"github-button\" href=\"https://github.com/YenYuHsuan\" aria-label=\"Follow @YenYuHsuan on GitHub\" target=\"_blank\" rel=\"noopener\">Follow</a> would also be appreciated!<br>\nPeace!</p>\n"},{"title":"初识React-native（一）","date":"2017-08-15T01:59:44.000Z","_content":"\n### 安装node.js\n\n### 设置淘宝镜像\n\n> 在node.js安装目录  => node_modules => npm => npmrc添加下面代码\n\n```\nregistry=https://registry.npm.taobao.org\n```\n<!-- more -->\n### 安装react-native\n\n```\nnpm install react-native-cli\n```\n\n### 初始化项目\n\n```\nreact-native init <项目名>\n```\n\n### 启动项目\n\n```\nTo run your app on iOS:\n   cd E:\\mine\\yuzexia\\myFirstRNApp\n   react-native run-ios\n   - or -\n   Open ios\\myFirstRNApp.xcodeproj in Xcode\n   Hit the Run button\nTo run your app on Android:\n   cd E:\\mine\\yuzexia\\myFirstRNApp\n   Have an Android emulator running (quickest way to get started), or a device connected\n   react-native run-android\n```\n","source":"_posts/react-native-1.md","raw":"---\ntitle: 初识React-native（一）\ndate: 2017-08-15 09:59:44\ntags: [javascript, react-native]\n---\n\n### 安装node.js\n\n### 设置淘宝镜像\n\n> 在node.js安装目录  => node_modules => npm => npmrc添加下面代码\n\n```\nregistry=https://registry.npm.taobao.org\n```\n<!-- more -->\n### 安装react-native\n\n```\nnpm install react-native-cli\n```\n\n### 初始化项目\n\n```\nreact-native init <项目名>\n```\n\n### 启动项目\n\n```\nTo run your app on iOS:\n   cd E:\\mine\\yuzexia\\myFirstRNApp\n   react-native run-ios\n   - or -\n   Open ios\\myFirstRNApp.xcodeproj in Xcode\n   Hit the Run button\nTo run your app on Android:\n   cd E:\\mine\\yuzexia\\myFirstRNApp\n   Have an Android emulator running (quickest way to get started), or a device connected\n   react-native run-android\n```\n","slug":"react-native-1","published":1,"updated":"2018-11-29T07:54:12.465Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrvb000bj2s4z4keqhdq","content":"<h3><span id=\"安装nodejs\">安装node.js</span></h3>\n<h3><span id=\"设置淘宝镜像\">设置淘宝镜像</span></h3>\n<blockquote>\n<p>在node.js安装目录  =&gt; node_modules =&gt; npm =&gt; npmrc添加下面代码</p>\n</blockquote>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">registry=<span class=\"string\">https:</span><span class=\"comment\">//registry.npm.taobao.org</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3><span id=\"安装react-native\">安装react-native</span></h3>\n<figure class=\"highlight livescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">npm</span> install react-<span class=\"keyword\">native</span>-cli</span><br></pre></td></tr></table></figure>\n<h3><span id=\"初始化项目\">初始化项目</span></h3>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">react-<span class=\"keyword\">native</span> <span class=\"keyword\">init</span> &lt;项目名&gt;</span><br></pre></td></tr></table></figure>\n<h3><span id=\"启动项目\">启动项目</span></h3>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">To <span class=\"built_in\">run</span> your app <span class=\"keyword\">on</span> iOS:</span><br><span class=\"line\">   cd E:\\mine\\yuzexia\\myFirstRNApp</span><br><span class=\"line\">   react-native <span class=\"built_in\">run</span>-ios</span><br><span class=\"line\">   - <span class=\"keyword\">or</span> -</span><br><span class=\"line\">   Open ios\\myFirstRNApp.xcodeproj <span class=\"keyword\">in</span> Xcode</span><br><span class=\"line\">   Hit <span class=\"keyword\">the</span> Run button</span><br><span class=\"line\">To <span class=\"built_in\">run</span> your app <span class=\"keyword\">on</span> Android:</span><br><span class=\"line\">   cd E:\\mine\\yuzexia\\myFirstRNApp</span><br><span class=\"line\">   Have an Android emulator <span class=\"built_in\">running</span> (quickest way <span class=\"keyword\">to</span> <span class=\"keyword\">get</span> started), <span class=\"keyword\">or</span> a device connected</span><br><span class=\"line\">   react-native <span class=\"built_in\">run</span>-android</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<h3>安装node.js</h3>\n<h3>设置淘宝镜像</h3>\n<blockquote>\n<p>在node.js安装目录  =&gt; node_modules =&gt; npm =&gt; npmrc添加下面代码</p>\n</blockquote>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">registry=<span class=\"string\">https:</span><span class=\"comment\">//registry.npm.taobao.org</span></span><br></pre></td></tr></table></figure>","more":"<h3>安装react-native</h3>\n<figure class=\"highlight livescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">npm</span> install react-<span class=\"keyword\">native</span>-cli</span><br></pre></td></tr></table></figure>\n<h3>初始化项目</h3>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">react-<span class=\"keyword\">native</span> <span class=\"keyword\">init</span> &lt;项目名&gt;</span><br></pre></td></tr></table></figure>\n<h3>启动项目</h3>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">To <span class=\"built_in\">run</span> your app <span class=\"keyword\">on</span> iOS:</span><br><span class=\"line\">   cd E:\\mine\\yuzexia\\myFirstRNApp</span><br><span class=\"line\">   react-native <span class=\"built_in\">run</span>-ios</span><br><span class=\"line\">   - <span class=\"keyword\">or</span> -</span><br><span class=\"line\">   Open ios\\myFirstRNApp.xcodeproj <span class=\"keyword\">in</span> Xcode</span><br><span class=\"line\">   Hit <span class=\"keyword\">the</span> Run button</span><br><span class=\"line\">To <span class=\"built_in\">run</span> your app <span class=\"keyword\">on</span> Android:</span><br><span class=\"line\">   cd E:\\mine\\yuzexia\\myFirstRNApp</span><br><span class=\"line\">   Have an Android emulator <span class=\"built_in\">running</span> (quickest way <span class=\"keyword\">to</span> <span class=\"keyword\">get</span> started), <span class=\"keyword\">or</span> a device connected</span><br><span class=\"line\">   react-native <span class=\"built_in\">run</span>-android</span><br></pre></td></tr></table></figure>"},{"title":"shell命令实现批量精准剪切视频","catalog":true,"date":"2018-12-20T03:22:14.000Z","subtitle":null,"header-img":null,"_content":"\n# shell命令截取视频\n\n[参考链接1:用 ffmpeg 实现批量剪切视频](https://blog.csdn.net/miao9999/article/details/79189534)\n\n[参考链接2:ffmpeg视频精准剪切](https://blog.csdn.net/matrix_laboratory/article/details/53157383)\n\n\n```shell\n#!/bin/bash\n\n# $1 为输入的文件名\n# $2 为需要截取的长度（秒）\n\n# 开始时间\nstartTime=0\n# 结束时间\nendTime=0\n# 获取视频长度\nduration=$(ffmpeg -i $1 2>&1 | grep \"Duration\" | cut -d \" \" -f 4 | sed s/,//)\n# 00:02:20\narray=(${duration//:/ })\n# 视频长度\nlength=`expr ${array[0]} \\* 3600 + ${array[1]} \\* 60 + ${array[2]%%.*}`\necho $length\ni=0\nstr=$1\ndir=${str%%.*}\ninterval=15\nls -al $1\n\nmkdir $dir\nif [ -n \"$2\" ] ; then\n    interval=$2\nfi\nwhile [ $endTime -le $length ]; do\n    #statements\n    i=$[$i+1]\n    endTime=$[$startTime+$interval]\n    ffmpeg -ss $startTime -t $interval -accurate_seek -i $1 -acodec copy -vcodec copy -avoid_negative_ts 1 $dir/$i.mp4\n    startTime=$[endTime]\n\ndone\n```","source":"_posts/shell命令实现批量精准剪切视频.md","raw":"---\ntitle: shell命令实现批量精准剪切视频\ncatalog: true\ndate: 2018-12-20 11:22:14\nsubtitle:\nheader-img:\ntags: [ffmpeg, 视频剪辑, shell]\n---\n\n# shell命令截取视频\n\n[参考链接1:用 ffmpeg 实现批量剪切视频](https://blog.csdn.net/miao9999/article/details/79189534)\n\n[参考链接2:ffmpeg视频精准剪切](https://blog.csdn.net/matrix_laboratory/article/details/53157383)\n\n\n```shell\n#!/bin/bash\n\n# $1 为输入的文件名\n# $2 为需要截取的长度（秒）\n\n# 开始时间\nstartTime=0\n# 结束时间\nendTime=0\n# 获取视频长度\nduration=$(ffmpeg -i $1 2>&1 | grep \"Duration\" | cut -d \" \" -f 4 | sed s/,//)\n# 00:02:20\narray=(${duration//:/ })\n# 视频长度\nlength=`expr ${array[0]} \\* 3600 + ${array[1]} \\* 60 + ${array[2]%%.*}`\necho $length\ni=0\nstr=$1\ndir=${str%%.*}\ninterval=15\nls -al $1\n\nmkdir $dir\nif [ -n \"$2\" ] ; then\n    interval=$2\nfi\nwhile [ $endTime -le $length ]; do\n    #statements\n    i=$[$i+1]\n    endTime=$[$startTime+$interval]\n    ffmpeg -ss $startTime -t $interval -accurate_seek -i $1 -acodec copy -vcodec copy -avoid_negative_ts 1 $dir/$i.mp4\n    startTime=$[endTime]\n\ndone\n```","slug":"shell命令实现批量精准剪切视频","published":1,"updated":"2018-12-20T03:24:52.101Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrvh000cj2s4xgqd2vxr","content":"<h1><span id=\"shell命令截取视频\">shell命令截取视频</span></h1>\n<p><a href=\"https://blog.csdn.net/miao9999/article/details/79189534\" target=\"_blank\" rel=\"noopener\">参考链接1:用 ffmpeg 实现批量剪切视频</a></p>\n<p><a href=\"https://blog.csdn.net/matrix_laboratory/article/details/53157383\" target=\"_blank\" rel=\"noopener\">参考链接2:ffmpeg视频精准剪切</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"variable\">$1</span> 为输入的文件名</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"variable\">$2</span> 为需要截取的长度（秒）</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 开始时间</span></span><br><span class=\"line\">startTime=0</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 结束时间</span></span><br><span class=\"line\">endTime=0</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 获取视频长度</span></span><br><span class=\"line\">duration=$(ffmpeg -i $1 2&gt;&amp;1 | grep \"Duration\" | cut -d \" \" -f 4 | sed s/,//)</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 00:02:20</span></span><br><span class=\"line\">array=($&#123;duration//:/ &#125;)</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 视频长度</span></span><br><span class=\"line\">length=`expr $&#123;array[0]&#125; \\* 3600 + $&#123;array[1]&#125; \\* 60 + $&#123;array[2]%%.*&#125;`</span><br><span class=\"line\">echo $length</span><br><span class=\"line\">i=0</span><br><span class=\"line\">str=$1</span><br><span class=\"line\">dir=$&#123;str%%.*&#125;</span><br><span class=\"line\">interval=15</span><br><span class=\"line\">ls -al $1</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir $dir</span><br><span class=\"line\">if [ -n \"$2\" ] ; then</span><br><span class=\"line\">    interval=$2</span><br><span class=\"line\">fi</span><br><span class=\"line\">while [ $endTime -le $length ]; do</span><br><span class=\"line\">    #statements</span><br><span class=\"line\">    i=$[$i+1]</span><br><span class=\"line\">    endTime=$[$startTime+$interval]</span><br><span class=\"line\">    ffmpeg -ss $startTime -t $interval -accurate_seek -i $1 -acodec copy -vcodec copy -avoid_negative_ts 1 $dir/$i.mp4</span><br><span class=\"line\">    startTime=$[endTime]</span><br><span class=\"line\"></span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1>shell命令截取视频</h1>\n<p><a href=\"https://blog.csdn.net/miao9999/article/details/79189534\" target=\"_blank\" rel=\"noopener\">参考链接1:用 ffmpeg 实现批量剪切视频</a></p>\n<p><a href=\"https://blog.csdn.net/matrix_laboratory/article/details/53157383\" target=\"_blank\" rel=\"noopener\">参考链接2:ffmpeg视频精准剪切</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"variable\">$1</span> 为输入的文件名</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"variable\">$2</span> 为需要截取的长度（秒）</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 开始时间</span></span><br><span class=\"line\">startTime=0</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 结束时间</span></span><br><span class=\"line\">endTime=0</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 获取视频长度</span></span><br><span class=\"line\">duration=$(ffmpeg -i $1 2&gt;&amp;1 | grep \"Duration\" | cut -d \" \" -f 4 | sed s/,//)</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 00:02:20</span></span><br><span class=\"line\">array=($&#123;duration//:/ &#125;)</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 视频长度</span></span><br><span class=\"line\">length=`expr $&#123;array[0]&#125; \\* 3600 + $&#123;array[1]&#125; \\* 60 + $&#123;array[2]%%.*&#125;`</span><br><span class=\"line\">echo $length</span><br><span class=\"line\">i=0</span><br><span class=\"line\">str=$1</span><br><span class=\"line\">dir=$&#123;str%%.*&#125;</span><br><span class=\"line\">interval=15</span><br><span class=\"line\">ls -al $1</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir $dir</span><br><span class=\"line\">if [ -n \"$2\" ] ; then</span><br><span class=\"line\">    interval=$2</span><br><span class=\"line\">fi</span><br><span class=\"line\">while [ $endTime -le $length ]; do</span><br><span class=\"line\">    #statements</span><br><span class=\"line\">    i=$[$i+1]</span><br><span class=\"line\">    endTime=$[$startTime+$interval]</span><br><span class=\"line\">    ffmpeg -ss $startTime -t $interval -accurate_seek -i $1 -acodec copy -vcodec copy -avoid_negative_ts 1 $dir/$i.mp4</span><br><span class=\"line\">    startTime=$[endTime]</span><br><span class=\"line\"></span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>"},{"title":"ueditor去除自动保存","date":"2017-09-06T03:43:10.000Z","_content":"","source":"_posts/ueditor去除自动保存-md.md","raw":"---\ntitle: 'ueditor去除自动保存'\ndate: 2017-09-06 11:43:10\ntags: [javascript, ueditor, 富文本编辑器]\n---\n","slug":"ueditor去除自动保存-md","published":1,"updated":"2018-11-29T09:22:56.147Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrvq000ej2s4vlga3tl0","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"使用webpack从零开始搭建react项目","catalog":true,"date":"2018-12-21T06:45:17.000Z","subtitle":null,"header-img":null,"_content":"\n## 使用webpack从零开始搭建react项目\n\n[webpack中文文档](https://webpack.docschina.org/)\n\n![yarn语法](https://note.youdao.com/yws/res/16810/WEBRESOURCE5e9deae4ba81f2d9d1631772395a9a40)\n\n#### webpack的安装\n\n![webpack的安装](https://note.youdao.com/yws/res/16815/WEBRESOURCE952f785a54e37cc1cbd1c0cb168a7dd5)\n\n```\nyarn add webpack@3.10.1 --dev\n```\n#### 需要处理的文件类型\n\n![文件类型](https://note.youdao.com/yws/res/16821/WEBRESOURCEe3931234abcfdb25f16f6f72a75893fb)\n\n#### webpack常用模块\n\n![webpack常用模块](https://note.youdao.com/yws/res/16827/WEBRESOURCE26f6eb42de497c5d062a8eca60e2a1ea)\n\n#### webpack-dev-server\n\n![webpack-dev-server](https://note.youdao.com/yws/res/16832/WEBRESOURCE5dcf8d2cd6c1af757623e5d31892ceac)\n\n```\nyarn add webpack-dev-server@2.9.7 --dev\n```\n\n\n#### webpack用法\n\n> 创建webpack.config.js文件\n\n```js\nconst path = require('path');\n\nmodule.exports = {\n    entry: './src/app.js', //入口文件\n    output: {\n        path: path.resolve(__dirname, 'dist'),\n        filename: 'app.js'\n    }\n};\n```\n\n> 执行命令\n\n```\nnode_module/.bin/webpack\n```\n\n##### 打包html的配置\n\n> htmlWebpackPlugin\n\n```\n// 安装html-webpakc-plugin\nyarn add html-webpack-plugin --dev\n```\n> 自定义html模版(title,mate等信息)\n\n[配置链接](https://github.com/jantimon/html-webpack-plugin#options)\n\n```\n// webpack.config.js文件\nplugins: [\n    new HtmlWebpackPlugin({\n        template: './src/index.html'\n    })\n]\n\n```\n\n##### 安装babel\n\n[参考链接](https://webpack.docschina.org/loaders/babel-loader/#src/components/Sidebar/Sidebar.jsx)\n\n```\n// 安装\n// 多个插件之间空格分隔\nyarn add babel-core@6.26.0 babel-present-env@1.6.1 babel-loader@7.1.2 --dev\n\n// webpack.config.js配置\nmodule: {\n  rules: [\n    {\n      test: /\\.js$/,\n      exclude: /(node_modules|bower_components)/,\n      use: {\n        loader: 'babel-loader',\n        options: {\n          presets: ['@babel/preset-env'],\n          plugins: [require('@babel/plugin-transform-object-rest-spread')]\n        }\n      }\n    }\n  ]\n}\n```\n\n##### 安装处理React的插件\n\n> `babel-preset-react`\n\n```\n//babel-preset-react\nyarn add babel-preset-react@6.24.1 --dev\n```\n##### 如额使用React\n```\n// 安装react react-dom\nyarn add react react-dom\n\n```\n\n##### 加载CSS\n\n> `style-loader`与`css-loader`\n\n```\nmodule:{\n    rules: [\n        {\n            test: /\\.css$/,\n            use: [\n                'style-loader',\n                'css-loader'\n            ]\n        }\n    ]\n}\n\n```\n\n\n##### 将文件提取出来\n\n> `ExtractTextWebpackPlugin`\n\n[ExtractTextWebpackPlugin: 将包或包中的文本提取到单独的文件中。](https://webpack.docschina.org/plugins/extract-text-webpack-plugin/#src/components/Sidebar/Sidebar.jsx)\n\n> 配置\n\n```\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nmodule:{\n    rules: [\n        {\n            test: /\\.css$/,\n            use: ExtractTextPlugin.extract({\n                  fallback: \"style-loader\",\n                  use: \"css-loader\"\n            })\n        }\n    ]\n},\nplugins: [\n    new ExtractTextPlugin(\"styles.css\"),\n]\n```\n\n##### 处理sass\n\n> `sass-loader`, `sass-loader`依赖`node-sass`与`webpack`\n\n```\nyarn add sass-loader node-sass\n```\n\n##### 图片资源处理 \n\n> 用`file-loader`与`url-loader`处理图片资源，`url-loader`依赖`file-loader`\n\n```\n// 安装\nyarn add url-loader file-loader --dev\n\n// 配置\n\nmodule: {\n    rules: [\n        {\n            test: /\\.(png|jpg|gif)$/,\n            use: [\n                {\n                    loader: 'url-loader',\n                    options: {\n                        limit: 8192\n                    }\n                }\n            ]\n        }\n    ]\n}\n```\n\n##### font-awesome\n\n```\nyarn add font-awesome\n\n// jsx中引入css\nimport 'font-awesome/css/font-awesome.min.css';\n```\n\n##### CommonsChunkPlugin\n\n```\nnew webpack.optimize.CommonsChunkPlugin({\n    name: 'common',\n    filename: 'js/base.js'\n})\n```\n\n\n#### webpack-dev-server\n\n```\n// 安装\nyarn webpack-dev-server@2.9.7\n\n// webpack.config.js中 配置\n\ndevServer: {\n    contentBase: './dist'\n    port: 8086\n}\n\n// 更改启动方式 package.json\n\"scripts\": {\n    \"dev\" : \"node_modulse/.bin/webpack-dev-server\",\n    \"dist\": \"node_modules/.bin/webpack -p\" //添加-p为线上打包\n}\n```\n\n##### resolve\n\n> object\n\n配置模块如何解析，例如，挡在ES2015中调用`import \"loadsh\"`, `resolve`选项能够对webpack查找`\"lodash\"`的方式去做修改。\n\n###### resolve.alias\n\n> object\n\n创建`import`或`require`的别名，来确保模块引入变得更简单，例如一些位于`src/`文件夹下的常用模块\n\n```\n// webpack.config.js 配置\nmodule.exports = {\n    // ...\n    resolve: {\n        alias: {\n            Utilities: path.resolve(__dirname, 'src/utilities/'),\n            Templates: path.resolve(__dirname, 'src/templates/')\n        }\n    }\n}\n```\n\n现在，替换【在导入时使用相对路径】这种方式，就像这样：\n```\nimport Utility from '../../utilities/utility';\n```\n可以这样使用别名\n```\nimport Utility from 'Utilities/utility';\n```\n\n###### devServer.historyApiFallback\n\n当使用 `HTML5 History API` 时，任意的 404 响应都可能需要被替代为 `index.html`。通过传入以下启用：\n\n```\nmodule.exports = {\n    // ...\n    devServer = {\n        historyApiFallback: {\n            index: '/dist/index.html'\n        }\n    }\n}\n```\n###### 接口Api代理`devServer.proxy`\n\n[参考地址](https://webpack.docschina.org/configuration/dev-server/#devserver-proxy)\n\n如果你有单独的后端开发服务器 API，并且希望在同域名下发送 API 请求 ，那么代理某些 URL 会很有用(可以避免浏览器跨域报错)。\n\n在 localhost:3000 上有后端服务的话，你可以这样启用代理：\n\n```\n// webpack.config.js配置\nmodule.exports = {\n    // ...\n    devServer: {\n        proxy: {\n            '/api': 'http://localhost:3000'\n        }\n    }\n}\n\n```\n请求到 `/api/users` 现在会被代理到请求 `http://localhost:3000/api/users`。\n\n```\nmodule.exports = {\n    // ...\n    devServer: {\n        proxy: {\n            '/manage': {\n                    target: 'http://admintest.happymmall.com',\n                    changeOrigin: true\n                },\n                '/user/logout.do': {\n                    target: 'http://admintest.happymmall.com',\n                    changeOrigin: true\n                }\n        }\n    }\n}\n```\n\n","source":"_posts/使用webpack从零开始搭建react项目.md","raw":"---\ntitle: 使用webpack从零开始搭建react项目\ncatalog: true\ndate: 2018-12-21 14:45:17\nsubtitle:\nheader-img:\ntags:\n---\n\n## 使用webpack从零开始搭建react项目\n\n[webpack中文文档](https://webpack.docschina.org/)\n\n![yarn语法](https://note.youdao.com/yws/res/16810/WEBRESOURCE5e9deae4ba81f2d9d1631772395a9a40)\n\n#### webpack的安装\n\n![webpack的安装](https://note.youdao.com/yws/res/16815/WEBRESOURCE952f785a54e37cc1cbd1c0cb168a7dd5)\n\n```\nyarn add webpack@3.10.1 --dev\n```\n#### 需要处理的文件类型\n\n![文件类型](https://note.youdao.com/yws/res/16821/WEBRESOURCEe3931234abcfdb25f16f6f72a75893fb)\n\n#### webpack常用模块\n\n![webpack常用模块](https://note.youdao.com/yws/res/16827/WEBRESOURCE26f6eb42de497c5d062a8eca60e2a1ea)\n\n#### webpack-dev-server\n\n![webpack-dev-server](https://note.youdao.com/yws/res/16832/WEBRESOURCE5dcf8d2cd6c1af757623e5d31892ceac)\n\n```\nyarn add webpack-dev-server@2.9.7 --dev\n```\n\n\n#### webpack用法\n\n> 创建webpack.config.js文件\n\n```js\nconst path = require('path');\n\nmodule.exports = {\n    entry: './src/app.js', //入口文件\n    output: {\n        path: path.resolve(__dirname, 'dist'),\n        filename: 'app.js'\n    }\n};\n```\n\n> 执行命令\n\n```\nnode_module/.bin/webpack\n```\n\n##### 打包html的配置\n\n> htmlWebpackPlugin\n\n```\n// 安装html-webpakc-plugin\nyarn add html-webpack-plugin --dev\n```\n> 自定义html模版(title,mate等信息)\n\n[配置链接](https://github.com/jantimon/html-webpack-plugin#options)\n\n```\n// webpack.config.js文件\nplugins: [\n    new HtmlWebpackPlugin({\n        template: './src/index.html'\n    })\n]\n\n```\n\n##### 安装babel\n\n[参考链接](https://webpack.docschina.org/loaders/babel-loader/#src/components/Sidebar/Sidebar.jsx)\n\n```\n// 安装\n// 多个插件之间空格分隔\nyarn add babel-core@6.26.0 babel-present-env@1.6.1 babel-loader@7.1.2 --dev\n\n// webpack.config.js配置\nmodule: {\n  rules: [\n    {\n      test: /\\.js$/,\n      exclude: /(node_modules|bower_components)/,\n      use: {\n        loader: 'babel-loader',\n        options: {\n          presets: ['@babel/preset-env'],\n          plugins: [require('@babel/plugin-transform-object-rest-spread')]\n        }\n      }\n    }\n  ]\n}\n```\n\n##### 安装处理React的插件\n\n> `babel-preset-react`\n\n```\n//babel-preset-react\nyarn add babel-preset-react@6.24.1 --dev\n```\n##### 如额使用React\n```\n// 安装react react-dom\nyarn add react react-dom\n\n```\n\n##### 加载CSS\n\n> `style-loader`与`css-loader`\n\n```\nmodule:{\n    rules: [\n        {\n            test: /\\.css$/,\n            use: [\n                'style-loader',\n                'css-loader'\n            ]\n        }\n    ]\n}\n\n```\n\n\n##### 将文件提取出来\n\n> `ExtractTextWebpackPlugin`\n\n[ExtractTextWebpackPlugin: 将包或包中的文本提取到单独的文件中。](https://webpack.docschina.org/plugins/extract-text-webpack-plugin/#src/components/Sidebar/Sidebar.jsx)\n\n> 配置\n\n```\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nmodule:{\n    rules: [\n        {\n            test: /\\.css$/,\n            use: ExtractTextPlugin.extract({\n                  fallback: \"style-loader\",\n                  use: \"css-loader\"\n            })\n        }\n    ]\n},\nplugins: [\n    new ExtractTextPlugin(\"styles.css\"),\n]\n```\n\n##### 处理sass\n\n> `sass-loader`, `sass-loader`依赖`node-sass`与`webpack`\n\n```\nyarn add sass-loader node-sass\n```\n\n##### 图片资源处理 \n\n> 用`file-loader`与`url-loader`处理图片资源，`url-loader`依赖`file-loader`\n\n```\n// 安装\nyarn add url-loader file-loader --dev\n\n// 配置\n\nmodule: {\n    rules: [\n        {\n            test: /\\.(png|jpg|gif)$/,\n            use: [\n                {\n                    loader: 'url-loader',\n                    options: {\n                        limit: 8192\n                    }\n                }\n            ]\n        }\n    ]\n}\n```\n\n##### font-awesome\n\n```\nyarn add font-awesome\n\n// jsx中引入css\nimport 'font-awesome/css/font-awesome.min.css';\n```\n\n##### CommonsChunkPlugin\n\n```\nnew webpack.optimize.CommonsChunkPlugin({\n    name: 'common',\n    filename: 'js/base.js'\n})\n```\n\n\n#### webpack-dev-server\n\n```\n// 安装\nyarn webpack-dev-server@2.9.7\n\n// webpack.config.js中 配置\n\ndevServer: {\n    contentBase: './dist'\n    port: 8086\n}\n\n// 更改启动方式 package.json\n\"scripts\": {\n    \"dev\" : \"node_modulse/.bin/webpack-dev-server\",\n    \"dist\": \"node_modules/.bin/webpack -p\" //添加-p为线上打包\n}\n```\n\n##### resolve\n\n> object\n\n配置模块如何解析，例如，挡在ES2015中调用`import \"loadsh\"`, `resolve`选项能够对webpack查找`\"lodash\"`的方式去做修改。\n\n###### resolve.alias\n\n> object\n\n创建`import`或`require`的别名，来确保模块引入变得更简单，例如一些位于`src/`文件夹下的常用模块\n\n```\n// webpack.config.js 配置\nmodule.exports = {\n    // ...\n    resolve: {\n        alias: {\n            Utilities: path.resolve(__dirname, 'src/utilities/'),\n            Templates: path.resolve(__dirname, 'src/templates/')\n        }\n    }\n}\n```\n\n现在，替换【在导入时使用相对路径】这种方式，就像这样：\n```\nimport Utility from '../../utilities/utility';\n```\n可以这样使用别名\n```\nimport Utility from 'Utilities/utility';\n```\n\n###### devServer.historyApiFallback\n\n当使用 `HTML5 History API` 时，任意的 404 响应都可能需要被替代为 `index.html`。通过传入以下启用：\n\n```\nmodule.exports = {\n    // ...\n    devServer = {\n        historyApiFallback: {\n            index: '/dist/index.html'\n        }\n    }\n}\n```\n###### 接口Api代理`devServer.proxy`\n\n[参考地址](https://webpack.docschina.org/configuration/dev-server/#devserver-proxy)\n\n如果你有单独的后端开发服务器 API，并且希望在同域名下发送 API 请求 ，那么代理某些 URL 会很有用(可以避免浏览器跨域报错)。\n\n在 localhost:3000 上有后端服务的话，你可以这样启用代理：\n\n```\n// webpack.config.js配置\nmodule.exports = {\n    // ...\n    devServer: {\n        proxy: {\n            '/api': 'http://localhost:3000'\n        }\n    }\n}\n\n```\n请求到 `/api/users` 现在会被代理到请求 `http://localhost:3000/api/users`。\n\n```\nmodule.exports = {\n    // ...\n    devServer: {\n        proxy: {\n            '/manage': {\n                    target: 'http://admintest.happymmall.com',\n                    changeOrigin: true\n                },\n                '/user/logout.do': {\n                    target: 'http://admintest.happymmall.com',\n                    changeOrigin: true\n                }\n        }\n    }\n}\n```\n\n","slug":"使用webpack从零开始搭建react项目","published":1,"updated":"2018-12-21T06:45:28.825Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrvr000fj2s4k7nymcud","content":"<h2><span id=\"使用webpack从零开始搭建react项目\">使用webpack从零开始搭建react项目</span></h2>\n<p><a href=\"https://webpack.docschina.org/\" target=\"_blank\" rel=\"noopener\">webpack中文文档</a></p>\n<p><img src=\"https://note.youdao.com/yws/res/16810/WEBRESOURCE5e9deae4ba81f2d9d1631772395a9a40\" alt=\"yarn语法\"></p>\n<h4><span id=\"webpack的安装\">webpack的安装</span></h4>\n<p><img src=\"https://note.youdao.com/yws/res/16815/WEBRESOURCE952f785a54e37cc1cbd1c0cb168a7dd5\" alt=\"webpack的安装\"></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">yarn</span> <span class=\"selector-tag\">add</span> <span class=\"selector-tag\">webpack</span>@<span class=\"keyword\">3</span>.<span class=\"keyword\">10</span>.<span class=\"keyword\">1</span> --dev</span><br></pre></td></tr></table></figure>\n<h4><span id=\"需要处理的文件类型\">需要处理的文件类型</span></h4>\n<p><img src=\"https://note.youdao.com/yws/res/16821/WEBRESOURCEe3931234abcfdb25f16f6f72a75893fb\" alt=\"文件类型\"></p>\n<h4><span id=\"webpack常用模块\">webpack常用模块</span></h4>\n<p><img src=\"https://note.youdao.com/yws/res/16827/WEBRESOURCE26f6eb42de497c5d062a8eca60e2a1ea\" alt=\"webpack常用模块\"></p>\n<h4><span id=\"webpack-dev-server\">webpack-dev-server</span></h4>\n<p><img src=\"https://note.youdao.com/yws/res/16832/WEBRESOURCE5dcf8d2cd6c1af757623e5d31892ceac\" alt=\"webpack-dev-server\"></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">yarn</span> <span class=\"selector-tag\">add</span> <span class=\"selector-tag\">webpack-dev-server</span>@<span class=\"keyword\">2</span>.<span class=\"keyword\">9</span>.<span class=\"keyword\">7</span> --dev</span><br></pre></td></tr></table></figure>\n<h4><span id=\"webpack用法\">webpack用法</span></h4>\n<blockquote>\n<p>创建webpack.config.js文件</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    entry: <span class=\"string\">'./src/app.js'</span>, <span class=\"comment\">//入口文件</span></span><br><span class=\"line\">    output: &#123;</span><br><span class=\"line\">        path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">        filename: <span class=\"string\">'app.js'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>执行命令</p>\n</blockquote>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node_module<span class=\"regexp\">/.bin/</span>webpack</span><br></pre></td></tr></table></figure>\n<h5><span id=\"打包html的配置\">打包html的配置</span></h5>\n<blockquote>\n<p>htmlWebpackPlugin</p>\n</blockquote>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 安装html-webpakc-plugin</span></span><br><span class=\"line\">yarn <span class=\"keyword\">add</span> html-webpack-plugin --dev</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>自定义html模版(title,mate等信息)</p>\n</blockquote>\n<p><a href=\"https://github.com/jantimon/html-webpack-plugin#options\" target=\"_blank\" rel=\"noopener\">配置链接</a></p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js文件</span></span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">        <span class=\"keyword\">template</span>: <span class=\"string\">'./src/index.html'</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h5><span id=\"安装babel\">安装babel</span></h5>\n<p><a href=\"https://webpack.docschina.org/loaders/babel-loader/#src/components/Sidebar/Sidebar.jsx\" target=\"_blank\" rel=\"noopener\">参考链接</a></p>\n<figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 安装</span></span><br><span class=\"line\"><span class=\"comment\">// 多个插件之间空格分隔</span></span><br><span class=\"line\">yarn add babel-core@6<span class=\"number\">.26</span><span class=\"number\">.0</span> babel-present-<span class=\"keyword\">env</span>@1<span class=\"number\">.6</span><span class=\"number\">.1</span> babel-loader@7<span class=\"number\">.1</span><span class=\"number\">.2</span> --dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// webpack.config.js配置</span></span><br><span class=\"line\">module: &#123;</span><br><span class=\"line\">  rules: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      test: /\\.js$/,</span><br><span class=\"line\">      exclude: /(node_modules|bower_components)/,</span><br><span class=\"line\">      use: &#123;</span><br><span class=\"line\">        loader: <span class=\"string\">'babel-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          presets: [<span class=\"string\">'@babel/preset-env'</span>],</span><br><span class=\"line\">          plugins: [require(<span class=\"string\">'@babel/plugin-transform-object-rest-spread'</span>)]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5><span id=\"安装处理react的插件\">安装处理React的插件</span></h5>\n<blockquote>\n<p><code>babel-preset-react</code></p>\n</blockquote>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//<span class=\"keyword\">babel-preset-react</span></span><br><span class=\"line\"><span class=\"keyword\">yarn </span><span class=\"keyword\">add </span><span class=\"keyword\">babel-preset-react@6.24.1 </span>--dev</span><br></pre></td></tr></table></figure>\n<h5><span id=\"如额使用react\">如额使用React</span></h5>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 安装react react-dom</span></span><br><span class=\"line\">yarn <span class=\"keyword\">add</span> react react-dom</span><br></pre></td></tr></table></figure>\n<h5><span id=\"加载css\">加载CSS</span></h5>\n<blockquote>\n<p><code>style-loader</code>与<code>css-loader</code></p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">module</span>:&#123;</span><br><span class=\"line\">    <span class=\"attribute\">rules</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            test: /\\.css$/,</span><br><span class=\"line\">            use: [</span><br><span class=\"line\">                <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">                <span class=\"string\">'css-loader'</span></span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5><span id=\"将文件提取出来\">将文件提取出来</span></h5>\n<blockquote>\n<p><code>ExtractTextWebpackPlugin</code></p>\n</blockquote>\n<p><a href=\"https://webpack.docschina.org/plugins/extract-text-webpack-plugin/#src/components/Sidebar/Sidebar.jsx\" target=\"_blank\" rel=\"noopener\">ExtractTextWebpackPlugin: 将包或包中的文本提取到单独的文件中。</a></p>\n<blockquote>\n<p>配置</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">module</span>:&#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">            use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">                  fallback: <span class=\"string\">\"style-loader\"</span>,</span><br><span class=\"line\">                  use: <span class=\"string\">\"css-loader\"</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">\"styles.css\"</span>),</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h5><span id=\"处理sass\">处理sass</span></h5>\n<blockquote>\n<p><code>sass-loader</code>, <code>sass-loader</code>依赖<code>node-sass</code>与<code>webpack</code></p>\n</blockquote>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add sass-loader <span class=\"keyword\">node</span><span class=\"title\">-sass</span></span><br></pre></td></tr></table></figure>\n<h5><span id=\"图片资源处理\">图片资源处理</span></h5>\n<blockquote>\n<p>用<code>file-loader</code>与<code>url-loader</code>处理图片资源，<code>url-loader</code>依赖<code>file-loader</code></p>\n</blockquote>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">安装</span></span><br><span class=\"line\"><span class=\"string\">yarn</span> <span class=\"string\">add</span> <span class=\"string\">url-loader</span> <span class=\"string\">file-loader</span> <span class=\"bullet\">--dev</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">配置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">module:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    rules:</span> <span class=\"string\">[</span></span><br><span class=\"line\">        <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">            test:</span> <span class=\"string\">/\\.(png|jpg|gif)$/,</span></span><br><span class=\"line\"><span class=\"attr\">            use:</span> <span class=\"string\">[</span></span><br><span class=\"line\">                <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">                    loader:</span> <span class=\"string\">'url-loader'</span><span class=\"string\">,</span></span><br><span class=\"line\"><span class=\"attr\">                    options:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">                        limit:</span> <span class=\"number\">8192</span></span><br><span class=\"line\">                    <span class=\"string\">&#125;</span></span><br><span class=\"line\">                <span class=\"string\">&#125;</span></span><br><span class=\"line\">            <span class=\"string\">]</span></span><br><span class=\"line\">        <span class=\"string\">&#125;</span></span><br><span class=\"line\">    <span class=\"string\">]</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<h5><span id=\"font-awesome\">font-awesome</span></h5>\n<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add <span class=\"built_in\">font</span>-awesome</span><br><span class=\"line\"></span><br><span class=\"line\">// jsx中引入css</span><br><span class=\"line\">import '<span class=\"built_in\">font</span>-awesome/css/<span class=\"built_in\">font</span>-awesome.<span class=\"built_in\">min</span>.css';</span><br></pre></td></tr></table></figure>\n<h5><span id=\"commonschunkplugin\">CommonsChunkPlugin</span></h5>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">new</span> <span class=\"selector-tag\">webpack</span><span class=\"selector-class\">.optimize</span><span class=\"selector-class\">.CommonsChunkPlugin</span>(&#123;</span><br><span class=\"line\">    <span class=\"attribute\">name</span>: <span class=\"string\">'common'</span>,</span><br><span class=\"line\">    filename: <span class=\"string\">'js/base.js'</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h4><span id=\"webpack-dev-server\">webpack-dev-server</span></h4>\n<figure class=\"highlight axapta\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 安装</span></span><br><span class=\"line\">yarn webpack-dev-<span class=\"keyword\">server</span>@<span class=\"number\">2.9</span><span class=\"number\">.7</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// webpack.config.js中 配置</span></span><br><span class=\"line\"></span><br><span class=\"line\">devServer: &#123;</span><br><span class=\"line\">    contentBase: <span class=\"string\">'./dist'</span></span><br><span class=\"line\">    port: <span class=\"number\">8086</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 更改启动方式 package.json</span></span><br><span class=\"line\"><span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"dev\"</span> : <span class=\"string\">\"node_modulse/.bin/webpack-dev-server\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"dist\"</span>: <span class=\"string\">\"node_modules/.bin/webpack -p\"</span> <span class=\"comment\">//添加-p为线上打包</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5><span id=\"resolve\">resolve</span></h5>\n<blockquote>\n<p>object</p>\n</blockquote>\n<p>配置模块如何解析，例如，挡在ES2015中调用<code>import &quot;loadsh&quot;</code>, <code>resolve</code>选项能够对webpack查找<code>&quot;lodash&quot;</code>的方式去做修改。</p>\n<h6><span id=\"resolvealias\">resolve.alias</span></h6>\n<blockquote>\n<p>object</p>\n</blockquote>\n<p>创建<code>import</code>或<code>require</code>的别名，来确保模块引入变得更简单，例如一些位于<code>src/</code>文件夹下的常用模块</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// webpack.config.js 配置</span><br><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">    <span class=\"built_in\">resolve</span>: &#123;</span><br><span class=\"line\">        alia<span class=\"variable\">s:</span> &#123;</span><br><span class=\"line\">            Utilitie<span class=\"variable\">s:</span> path.<span class=\"built_in\">resolve</span>(__dirname, <span class=\"string\">'src/utilities/'</span>),</span><br><span class=\"line\">            Template<span class=\"variable\">s:</span> path.<span class=\"built_in\">resolve</span>(__dirname, <span class=\"string\">'src/templates/'</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在，替换【在导入时使用相对路径】这种方式，就像这样：</p>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Utility <span class=\"keyword\">from</span> <span class=\"string\">'../../utilities/utility'</span>;</span><br></pre></td></tr></table></figure>\n<p>可以这样使用别名</p>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Utility <span class=\"keyword\">from</span> <span class=\"string\">'Utilities/utility'</span>;</span><br></pre></td></tr></table></figure>\n<h6><span id=\"devserverhistoryapifallback\">devServer.historyApiFallback</span></h6>\n<p>当使用 <code>HTML5 History API</code> 时，任意的 404 响应都可能需要被替代为 <code>index.html</code>。通过传入以下启用：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">module</span>.<span class=\"keyword\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    devServer = &#123;</span><br><span class=\"line\">        historyApiFallback: &#123;</span><br><span class=\"line\">            index: <span class=\"string\">'/dist/index.html'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6><span id=\"接口api代理devserverproxy\">接口Api代理<code>devServer.proxy</code></span></h6>\n<p><a href=\"https://webpack.docschina.org/configuration/dev-server/#devserver-proxy\" target=\"_blank\" rel=\"noopener\">参考地址</a></p>\n<p>如果你有单独的后端开发服务器 API，并且希望在同域名下发送 API 请求 ，那么代理某些 URL 会很有用(可以避免浏览器跨域报错)。</p>\n<p>在 localhost:3000 上有后端服务的话，你可以这样启用代理：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js配置</span></span><br><span class=\"line\"><span class=\"keyword\">module</span>.<span class=\"keyword\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    devServer: &#123;</span><br><span class=\"line\">        proxy: &#123;</span><br><span class=\"line\">            <span class=\"string\">'/api'</span>: <span class=\"string\">'http://localhost:3000'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>请求到 <code>/api/users</code> 现在会被代理到请求 <code>http://localhost:3000/api/users</code>。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">module.exports</span> <span class=\"string\">=</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\">    <span class=\"string\">//</span> <span class=\"string\">...</span></span><br><span class=\"line\"><span class=\"attr\">    devServer:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">        proxy:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\">            <span class=\"string\">'/manage'</span><span class=\"string\">:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">                    target:</span> <span class=\"string\">'http://admintest.happymmall.com'</span><span class=\"string\">,</span></span><br><span class=\"line\"><span class=\"attr\">                    changeOrigin:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"string\">&#125;,</span></span><br><span class=\"line\">                <span class=\"string\">'/user/logout.do'</span><span class=\"string\">:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">                    target:</span> <span class=\"string\">'http://admintest.happymmall.com'</span><span class=\"string\">,</span></span><br><span class=\"line\"><span class=\"attr\">                    changeOrigin:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"string\">&#125;</span></span><br><span class=\"line\">        <span class=\"string\">&#125;</span></span><br><span class=\"line\">    <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2>使用webpack从零开始搭建react项目</h2>\n<p><a href=\"https://webpack.docschina.org/\" target=\"_blank\" rel=\"noopener\">webpack中文文档</a></p>\n<p><img src=\"https://note.youdao.com/yws/res/16810/WEBRESOURCE5e9deae4ba81f2d9d1631772395a9a40\" alt=\"yarn语法\"></p>\n<h4>webpack的安装</h4>\n<p><img src=\"https://note.youdao.com/yws/res/16815/WEBRESOURCE952f785a54e37cc1cbd1c0cb168a7dd5\" alt=\"webpack的安装\"></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">yarn</span> <span class=\"selector-tag\">add</span> <span class=\"selector-tag\">webpack</span>@<span class=\"keyword\">3</span>.<span class=\"keyword\">10</span>.<span class=\"keyword\">1</span> --dev</span><br></pre></td></tr></table></figure>\n<h4>需要处理的文件类型</h4>\n<p><img src=\"https://note.youdao.com/yws/res/16821/WEBRESOURCEe3931234abcfdb25f16f6f72a75893fb\" alt=\"文件类型\"></p>\n<h4>webpack常用模块</h4>\n<p><img src=\"https://note.youdao.com/yws/res/16827/WEBRESOURCE26f6eb42de497c5d062a8eca60e2a1ea\" alt=\"webpack常用模块\"></p>\n<h4>webpack-dev-server</h4>\n<p><img src=\"https://note.youdao.com/yws/res/16832/WEBRESOURCE5dcf8d2cd6c1af757623e5d31892ceac\" alt=\"webpack-dev-server\"></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">yarn</span> <span class=\"selector-tag\">add</span> <span class=\"selector-tag\">webpack-dev-server</span>@<span class=\"keyword\">2</span>.<span class=\"keyword\">9</span>.<span class=\"keyword\">7</span> --dev</span><br></pre></td></tr></table></figure>\n<h4>webpack用法</h4>\n<blockquote>\n<p>创建webpack.config.js文件</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    entry: <span class=\"string\">'./src/app.js'</span>, <span class=\"comment\">//入口文件</span></span><br><span class=\"line\">    output: &#123;</span><br><span class=\"line\">        path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">        filename: <span class=\"string\">'app.js'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>执行命令</p>\n</blockquote>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node_module<span class=\"regexp\">/.bin/</span>webpack</span><br></pre></td></tr></table></figure>\n<h5>打包html的配置</h5>\n<blockquote>\n<p>htmlWebpackPlugin</p>\n</blockquote>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 安装html-webpakc-plugin</span></span><br><span class=\"line\">yarn <span class=\"keyword\">add</span> html-webpack-plugin --dev</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>自定义html模版(title,mate等信息)</p>\n</blockquote>\n<p><a href=\"https://github.com/jantimon/html-webpack-plugin#options\" target=\"_blank\" rel=\"noopener\">配置链接</a></p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js文件</span></span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">        <span class=\"keyword\">template</span>: <span class=\"string\">'./src/index.html'</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h5>安装babel</h5>\n<p><a href=\"https://webpack.docschina.org/loaders/babel-loader/#src/components/Sidebar/Sidebar.jsx\" target=\"_blank\" rel=\"noopener\">参考链接</a></p>\n<figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 安装</span></span><br><span class=\"line\"><span class=\"comment\">// 多个插件之间空格分隔</span></span><br><span class=\"line\">yarn add babel-core@6<span class=\"number\">.26</span><span class=\"number\">.0</span> babel-present-<span class=\"keyword\">env</span>@1<span class=\"number\">.6</span><span class=\"number\">.1</span> babel-loader@7<span class=\"number\">.1</span><span class=\"number\">.2</span> --dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// webpack.config.js配置</span></span><br><span class=\"line\">module: &#123;</span><br><span class=\"line\">  rules: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      test: /\\.js$/,</span><br><span class=\"line\">      exclude: /(node_modules|bower_components)/,</span><br><span class=\"line\">      use: &#123;</span><br><span class=\"line\">        loader: <span class=\"string\">'babel-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          presets: [<span class=\"string\">'@babel/preset-env'</span>],</span><br><span class=\"line\">          plugins: [require(<span class=\"string\">'@babel/plugin-transform-object-rest-spread'</span>)]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5>安装处理React的插件</h5>\n<blockquote>\n<p><code>babel-preset-react</code></p>\n</blockquote>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//<span class=\"keyword\">babel-preset-react</span></span><br><span class=\"line\"><span class=\"keyword\">yarn </span><span class=\"keyword\">add </span><span class=\"keyword\">babel-preset-react@6.24.1 </span>--dev</span><br></pre></td></tr></table></figure>\n<h5>如额使用React</h5>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 安装react react-dom</span></span><br><span class=\"line\">yarn <span class=\"keyword\">add</span> react react-dom</span><br></pre></td></tr></table></figure>\n<h5>加载CSS</h5>\n<blockquote>\n<p><code>style-loader</code>与<code>css-loader</code></p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">module</span>:&#123;</span><br><span class=\"line\">    <span class=\"attribute\">rules</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            test: /\\.css$/,</span><br><span class=\"line\">            use: [</span><br><span class=\"line\">                <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">                <span class=\"string\">'css-loader'</span></span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5>将文件提取出来</h5>\n<blockquote>\n<p><code>ExtractTextWebpackPlugin</code></p>\n</blockquote>\n<p><a href=\"https://webpack.docschina.org/plugins/extract-text-webpack-plugin/#src/components/Sidebar/Sidebar.jsx\" target=\"_blank\" rel=\"noopener\">ExtractTextWebpackPlugin: 将包或包中的文本提取到单独的文件中。</a></p>\n<blockquote>\n<p>配置</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">module</span>:&#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">            use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">                  fallback: <span class=\"string\">\"style-loader\"</span>,</span><br><span class=\"line\">                  use: <span class=\"string\">\"css-loader\"</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">\"styles.css\"</span>),</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h5>处理sass</h5>\n<blockquote>\n<p><code>sass-loader</code>, <code>sass-loader</code>依赖<code>node-sass</code>与<code>webpack</code></p>\n</blockquote>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add sass-loader <span class=\"keyword\">node</span><span class=\"title\">-sass</span></span><br></pre></td></tr></table></figure>\n<h5>图片资源处理</h5>\n<blockquote>\n<p>用<code>file-loader</code>与<code>url-loader</code>处理图片资源，<code>url-loader</code>依赖<code>file-loader</code></p>\n</blockquote>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">安装</span></span><br><span class=\"line\"><span class=\"string\">yarn</span> <span class=\"string\">add</span> <span class=\"string\">url-loader</span> <span class=\"string\">file-loader</span> <span class=\"bullet\">--dev</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">配置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">module:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">    rules:</span> <span class=\"string\">[</span></span><br><span class=\"line\">        <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">            test:</span> <span class=\"string\">/\\.(png|jpg|gif)$/,</span></span><br><span class=\"line\"><span class=\"attr\">            use:</span> <span class=\"string\">[</span></span><br><span class=\"line\">                <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">                    loader:</span> <span class=\"string\">'url-loader'</span><span class=\"string\">,</span></span><br><span class=\"line\"><span class=\"attr\">                    options:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">                        limit:</span> <span class=\"number\">8192</span></span><br><span class=\"line\">                    <span class=\"string\">&#125;</span></span><br><span class=\"line\">                <span class=\"string\">&#125;</span></span><br><span class=\"line\">            <span class=\"string\">]</span></span><br><span class=\"line\">        <span class=\"string\">&#125;</span></span><br><span class=\"line\">    <span class=\"string\">]</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<h5>font-awesome</h5>\n<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add <span class=\"built_in\">font</span>-awesome</span><br><span class=\"line\"></span><br><span class=\"line\">// jsx中引入css</span><br><span class=\"line\">import '<span class=\"built_in\">font</span>-awesome/css/<span class=\"built_in\">font</span>-awesome.<span class=\"built_in\">min</span>.css';</span><br></pre></td></tr></table></figure>\n<h5>CommonsChunkPlugin</h5>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">new</span> <span class=\"selector-tag\">webpack</span><span class=\"selector-class\">.optimize</span><span class=\"selector-class\">.CommonsChunkPlugin</span>(&#123;</span><br><span class=\"line\">    <span class=\"attribute\">name</span>: <span class=\"string\">'common'</span>,</span><br><span class=\"line\">    filename: <span class=\"string\">'js/base.js'</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h4>webpack-dev-server</h4>\n<figure class=\"highlight axapta\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 安装</span></span><br><span class=\"line\">yarn webpack-dev-<span class=\"keyword\">server</span>@<span class=\"number\">2.9</span><span class=\"number\">.7</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// webpack.config.js中 配置</span></span><br><span class=\"line\"></span><br><span class=\"line\">devServer: &#123;</span><br><span class=\"line\">    contentBase: <span class=\"string\">'./dist'</span></span><br><span class=\"line\">    port: <span class=\"number\">8086</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 更改启动方式 package.json</span></span><br><span class=\"line\"><span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"dev\"</span> : <span class=\"string\">\"node_modulse/.bin/webpack-dev-server\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"dist\"</span>: <span class=\"string\">\"node_modules/.bin/webpack -p\"</span> <span class=\"comment\">//添加-p为线上打包</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5>resolve</h5>\n<blockquote>\n<p>object</p>\n</blockquote>\n<p>配置模块如何解析，例如，挡在ES2015中调用<code>import &quot;loadsh&quot;</code>, <code>resolve</code>选项能够对webpack查找<code>&quot;lodash&quot;</code>的方式去做修改。</p>\n<h6>resolve.alias</h6>\n<blockquote>\n<p>object</p>\n</blockquote>\n<p>创建<code>import</code>或<code>require</code>的别名，来确保模块引入变得更简单，例如一些位于<code>src/</code>文件夹下的常用模块</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// webpack.config.js 配置</span><br><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">    // ...</span><br><span class=\"line\">    <span class=\"built_in\">resolve</span>: &#123;</span><br><span class=\"line\">        alia<span class=\"variable\">s:</span> &#123;</span><br><span class=\"line\">            Utilitie<span class=\"variable\">s:</span> path.<span class=\"built_in\">resolve</span>(__dirname, <span class=\"string\">'src/utilities/'</span>),</span><br><span class=\"line\">            Template<span class=\"variable\">s:</span> path.<span class=\"built_in\">resolve</span>(__dirname, <span class=\"string\">'src/templates/'</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在，替换【在导入时使用相对路径】这种方式，就像这样：</p>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Utility <span class=\"keyword\">from</span> <span class=\"string\">'../../utilities/utility'</span>;</span><br></pre></td></tr></table></figure>\n<p>可以这样使用别名</p>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Utility <span class=\"keyword\">from</span> <span class=\"string\">'Utilities/utility'</span>;</span><br></pre></td></tr></table></figure>\n<h6>devServer.historyApiFallback</h6>\n<p>当使用 <code>HTML5 History API</code> 时，任意的 404 响应都可能需要被替代为 <code>index.html</code>。通过传入以下启用：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">module</span>.<span class=\"keyword\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    devServer = &#123;</span><br><span class=\"line\">        historyApiFallback: &#123;</span><br><span class=\"line\">            index: <span class=\"string\">'/dist/index.html'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6>接口Api代理<code>devServer.proxy</code></h6>\n<p><a href=\"https://webpack.docschina.org/configuration/dev-server/#devserver-proxy\" target=\"_blank\" rel=\"noopener\">参考地址</a></p>\n<p>如果你有单独的后端开发服务器 API，并且希望在同域名下发送 API 请求 ，那么代理某些 URL 会很有用(可以避免浏览器跨域报错)。</p>\n<p>在 localhost:3000 上有后端服务的话，你可以这样启用代理：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js配置</span></span><br><span class=\"line\"><span class=\"keyword\">module</span>.<span class=\"keyword\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    devServer: &#123;</span><br><span class=\"line\">        proxy: &#123;</span><br><span class=\"line\">            <span class=\"string\">'/api'</span>: <span class=\"string\">'http://localhost:3000'</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>请求到 <code>/api/users</code> 现在会被代理到请求 <code>http://localhost:3000/api/users</code>。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">module.exports</span> <span class=\"string\">=</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\">    <span class=\"string\">//</span> <span class=\"string\">...</span></span><br><span class=\"line\"><span class=\"attr\">    devServer:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">        proxy:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\">            <span class=\"string\">'/manage'</span><span class=\"string\">:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">                    target:</span> <span class=\"string\">'http://admintest.happymmall.com'</span><span class=\"string\">,</span></span><br><span class=\"line\"><span class=\"attr\">                    changeOrigin:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"string\">&#125;,</span></span><br><span class=\"line\">                <span class=\"string\">'/user/logout.do'</span><span class=\"string\">:</span> <span class=\"string\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">                    target:</span> <span class=\"string\">'http://admintest.happymmall.com'</span><span class=\"string\">,</span></span><br><span class=\"line\"><span class=\"attr\">                    changeOrigin:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"string\">&#125;</span></span><br><span class=\"line\">        <span class=\"string\">&#125;</span></span><br><span class=\"line\">    <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"string-function","date":"2017-09-22T01:58:05.000Z","_content":"\n### 操作方法\n\n##### 字符串截取sub,substing,slice\n\n- 一个参数\n\n```javascript\n var str = 'what are you doing?';\n //参数为正数\n str.sub(1);        //'hat are you doing?'\n str.substring(1);  //'hat are you doing?'\n str.slice(1);      //'hat are you doing?'\n //参数为负数\n str.sub(-1);       //'?'\n str.substring(-1); //'what are you doing?'\n str.slice(-1);     //'?'\n```\n> sub,slice支持参数为正数和负数(等价于字符串长度+负数)，\nsubstring只支持参数为正数，如果为负数会返回整个字符串\n\n<!-- more -->\n\n- 两个参数\n\n```javascript\nvar str = 'what are you doing?';\n// 两个参数都为正数\n str.substr(1,4);      //'hat '\n str.substring(1,4);   //'hat'\n str.slice(1,4);       //'hat'\n\n// 有负数参数\n str.substr(-5,4);  //'oing'\n str.substring(-5,4);//'what'\n str.slice(-5,4);    //''\n```\n\n> substr，第二个参数代表的是截取字符串的长度，第二个参数不能为负数;\nsubsting，参数为负数会自动转换为0，并且数值小的为起点。\nslice，第二个参数的数值小于第一个参数的数值返回空值。\n\n\n","source":"_posts/string-function.md","raw":"---\ntitle: 'string-function'\ndate: 2017-09-22 09:58:05\ntags: [javascript, string]\n---\n\n### 操作方法\n\n##### 字符串截取sub,substing,slice\n\n- 一个参数\n\n```javascript\n var str = 'what are you doing?';\n //参数为正数\n str.sub(1);        //'hat are you doing?'\n str.substring(1);  //'hat are you doing?'\n str.slice(1);      //'hat are you doing?'\n //参数为负数\n str.sub(-1);       //'?'\n str.substring(-1); //'what are you doing?'\n str.slice(-1);     //'?'\n```\n> sub,slice支持参数为正数和负数(等价于字符串长度+负数)，\nsubstring只支持参数为正数，如果为负数会返回整个字符串\n\n<!-- more -->\n\n- 两个参数\n\n```javascript\nvar str = 'what are you doing?';\n// 两个参数都为正数\n str.substr(1,4);      //'hat '\n str.substring(1,4);   //'hat'\n str.slice(1,4);       //'hat'\n\n// 有负数参数\n str.substr(-5,4);  //'oing'\n str.substring(-5,4);//'what'\n str.slice(-5,4);    //''\n```\n\n> substr，第二个参数代表的是截取字符串的长度，第二个参数不能为负数;\nsubsting，参数为负数会自动转换为0，并且数值小的为起点。\nslice，第二个参数的数值小于第一个参数的数值返回空值。\n\n\n","slug":"string-function","published":1,"updated":"2018-11-29T09:22:04.944Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrvt000hj2s4qmx248q5","content":"<h3><span id=\"操作方法\">操作方法</span></h3>\n<h5><span id=\"字符串截取subsubstingslice\">字符串截取sub,substing,slice</span></h5>\n<ul>\n<li>一个参数</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">'what are you doing?'</span>;</span><br><span class=\"line\"><span class=\"comment\">//参数为正数</span></span><br><span class=\"line\">str.sub(<span class=\"number\">1</span>);        <span class=\"comment\">//'hat are you doing?'</span></span><br><span class=\"line\">str.substring(<span class=\"number\">1</span>);  <span class=\"comment\">//'hat are you doing?'</span></span><br><span class=\"line\">str.slice(<span class=\"number\">1</span>);      <span class=\"comment\">//'hat are you doing?'</span></span><br><span class=\"line\"><span class=\"comment\">//参数为负数</span></span><br><span class=\"line\">str.sub(<span class=\"number\">-1</span>);       <span class=\"comment\">//'?'</span></span><br><span class=\"line\">str.substring(<span class=\"number\">-1</span>); <span class=\"comment\">//'what are you doing?'</span></span><br><span class=\"line\">str.slice(<span class=\"number\">-1</span>);     <span class=\"comment\">//'?'</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>sub,slice支持参数为正数和负数(等价于字符串长度+负数)，<br>\nsubstring只支持参数为正数，如果为负数会返回整个字符串</p>\n</blockquote>\n<a id=\"more\"></a>\n<ul>\n<li>两个参数</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">'what are you doing?'</span>;</span><br><span class=\"line\"><span class=\"comment\">// 两个参数都为正数</span></span><br><span class=\"line\"> str.substr(<span class=\"number\">1</span>,<span class=\"number\">4</span>);      <span class=\"comment\">//'hat '</span></span><br><span class=\"line\"> str.substring(<span class=\"number\">1</span>,<span class=\"number\">4</span>);   <span class=\"comment\">//'hat'</span></span><br><span class=\"line\"> str.slice(<span class=\"number\">1</span>,<span class=\"number\">4</span>);       <span class=\"comment\">//'hat'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有负数参数</span></span><br><span class=\"line\"> str.substr(<span class=\"number\">-5</span>,<span class=\"number\">4</span>);  <span class=\"comment\">//'oing'</span></span><br><span class=\"line\"> str.substring(<span class=\"number\">-5</span>,<span class=\"number\">4</span>);<span class=\"comment\">//'what'</span></span><br><span class=\"line\"> str.slice(<span class=\"number\">-5</span>,<span class=\"number\">4</span>);    <span class=\"comment\">//''</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>substr，第二个参数代表的是截取字符串的长度，第二个参数不能为负数;<br>\nsubsting，参数为负数会自动转换为0，并且数值小的为起点。<br>\nslice，第二个参数的数值小于第一个参数的数值返回空值。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h3>操作方法</h3>\n<h5>字符串截取sub,substing,slice</h5>\n<ul>\n<li>一个参数</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">'what are you doing?'</span>;</span><br><span class=\"line\"><span class=\"comment\">//参数为正数</span></span><br><span class=\"line\">str.sub(<span class=\"number\">1</span>);        <span class=\"comment\">//'hat are you doing?'</span></span><br><span class=\"line\">str.substring(<span class=\"number\">1</span>);  <span class=\"comment\">//'hat are you doing?'</span></span><br><span class=\"line\">str.slice(<span class=\"number\">1</span>);      <span class=\"comment\">//'hat are you doing?'</span></span><br><span class=\"line\"><span class=\"comment\">//参数为负数</span></span><br><span class=\"line\">str.sub(<span class=\"number\">-1</span>);       <span class=\"comment\">//'?'</span></span><br><span class=\"line\">str.substring(<span class=\"number\">-1</span>); <span class=\"comment\">//'what are you doing?'</span></span><br><span class=\"line\">str.slice(<span class=\"number\">-1</span>);     <span class=\"comment\">//'?'</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>sub,slice支持参数为正数和负数(等价于字符串长度+负数)，<br>\nsubstring只支持参数为正数，如果为负数会返回整个字符串</p>\n</blockquote>","more":"<ul>\n<li>两个参数</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">'what are you doing?'</span>;</span><br><span class=\"line\"><span class=\"comment\">// 两个参数都为正数</span></span><br><span class=\"line\"> str.substr(<span class=\"number\">1</span>,<span class=\"number\">4</span>);      <span class=\"comment\">//'hat '</span></span><br><span class=\"line\"> str.substring(<span class=\"number\">1</span>,<span class=\"number\">4</span>);   <span class=\"comment\">//'hat'</span></span><br><span class=\"line\"> str.slice(<span class=\"number\">1</span>,<span class=\"number\">4</span>);       <span class=\"comment\">//'hat'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 有负数参数</span></span><br><span class=\"line\"> str.substr(<span class=\"number\">-5</span>,<span class=\"number\">4</span>);  <span class=\"comment\">//'oing'</span></span><br><span class=\"line\"> str.substring(<span class=\"number\">-5</span>,<span class=\"number\">4</span>);<span class=\"comment\">//'what'</span></span><br><span class=\"line\"> str.slice(<span class=\"number\">-5</span>,<span class=\"number\">4</span>);    <span class=\"comment\">//''</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>substr，第二个参数代表的是截取字符串的长度，第二个参数不能为负数;<br>\nsubsting，参数为负数会自动转换为0，并且数值小的为起点。<br>\nslice，第二个参数的数值小于第一个参数的数值返回空值。</p>\n</blockquote>"},{"title":"使用canvas给图片添加水印","catalog":true,"date":"2018-12-12T09:44:46.000Z","subtitle":null,"header-img":null,"_content":"\n## 使用canvas给图片添加水印\n\n### css部分\n\n```css\n    .clip {\n        position: absolute;\n        clip: rect(0 0 0 0);\n    }\n```\n\n### html部分\n\n```html\n    <input type=\"file\" id=\"uploadFile\" class=\"clip\" accept=\"image/*\">\n    <label class=\"ui-button ui-button-primary\" for=\"uploadFile\">选择图片</label>\n    <img id=\"imgCover\" src=\"./images/googlelogo_color_272x92dp.png\" class=\"clip\">\n    <p id=\"imgUploadX\"></p>\n```\n\n### js部分\n\n```javascript\n    var eleUploadFile = document.getElementById('uploadFile');\n    var eleImgCover = document.getElementById('imgCover');\n    var eleImgUploadX = document.getElementById('imgUploadX');\n\n    eleUploadFile.addEventListener('change', function(event) {\n        // dataTransfer是拖拽操作的对象\n        var file = event.target.files[0] || event.target.dataTransfer.files[0];\n\n        var reader = new FileReader();\n\n        reader.onload = function(e) {\n            var base64 = e.target.result;\n\n            // canvas压缩图片，并且回调显示\n            imgTogether(base64, function(url) {\n                eleImgUploadX.innerHTML = '<img src=\"' + url + '\"/>';\n            })\n        }\n        reader.readAsDataURL(file);\n    });\n\n    var imgTogether = function(url, callback) {\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n\n        // image实例对象\n        var imageUpload = new Image();\n        imageUpload.onload = function() {\n            console.log('imageUpload', imageUpload);\n            canvas.width = imageUpload.width;\n            canvas.height = imageUpload.height;\n            // canvas绘制图片\n            context.drawImage(imageUpload, 0, 0);\n            // 绘制水印\n             context.drawImage(eleImgCover, 0, 0);\n            // 回调\n            callback(canvas.toDataURL('image/jpeg'));\n        }\n        imageUpload.src = url;\n    }\n```\n\n\n","source":"_posts/使用canvas给图片添加水印.md","raw":"---\ntitle: 使用canvas给图片添加水印\ncatalog: true\ndate: 2018-12-12 17:44:46\nsubtitle:\nheader-img:\ntags: [javascript, html, css, canvas]\n---\n\n## 使用canvas给图片添加水印\n\n### css部分\n\n```css\n    .clip {\n        position: absolute;\n        clip: rect(0 0 0 0);\n    }\n```\n\n### html部分\n\n```html\n    <input type=\"file\" id=\"uploadFile\" class=\"clip\" accept=\"image/*\">\n    <label class=\"ui-button ui-button-primary\" for=\"uploadFile\">选择图片</label>\n    <img id=\"imgCover\" src=\"./images/googlelogo_color_272x92dp.png\" class=\"clip\">\n    <p id=\"imgUploadX\"></p>\n```\n\n### js部分\n\n```javascript\n    var eleUploadFile = document.getElementById('uploadFile');\n    var eleImgCover = document.getElementById('imgCover');\n    var eleImgUploadX = document.getElementById('imgUploadX');\n\n    eleUploadFile.addEventListener('change', function(event) {\n        // dataTransfer是拖拽操作的对象\n        var file = event.target.files[0] || event.target.dataTransfer.files[0];\n\n        var reader = new FileReader();\n\n        reader.onload = function(e) {\n            var base64 = e.target.result;\n\n            // canvas压缩图片，并且回调显示\n            imgTogether(base64, function(url) {\n                eleImgUploadX.innerHTML = '<img src=\"' + url + '\"/>';\n            })\n        }\n        reader.readAsDataURL(file);\n    });\n\n    var imgTogether = function(url, callback) {\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n\n        // image实例对象\n        var imageUpload = new Image();\n        imageUpload.onload = function() {\n            console.log('imageUpload', imageUpload);\n            canvas.width = imageUpload.width;\n            canvas.height = imageUpload.height;\n            // canvas绘制图片\n            context.drawImage(imageUpload, 0, 0);\n            // 绘制水印\n             context.drawImage(eleImgCover, 0, 0);\n            // 回调\n            callback(canvas.toDataURL('image/jpeg'));\n        }\n        imageUpload.src = url;\n    }\n```\n\n\n","slug":"使用canvas给图片添加水印","published":1,"updated":"2018-12-12T09:45:59.256Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrvv000ij2s4l78w9rct","content":"<h2><span id=\"使用canvas给图片添加水印\">使用canvas给图片添加水印</span></h2>\n<h3><span id=\"css部分\">css部分</span></h3>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.clip</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">clip</span>: <span class=\"built_in\">rect</span>(0 0 0 0);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3><span id=\"html部分\">html部分</span></h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"uploadFile\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"clip\"</span> <span class=\"attr\">accept</span>=<span class=\"string\">\"image/*\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ui-button ui-button-primary\"</span> <span class=\"attr\">for</span>=<span class=\"string\">\"uploadFile\"</span>&gt;</span>选择图片<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">\"imgCover\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./images/googlelogo_color_272x92dp.png\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"clip\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">\"imgUploadX\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3><span id=\"js部分\">js部分</span></h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> eleUploadFile = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'uploadFile'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> eleImgCover = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'imgCover'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> eleImgUploadX = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'imgUploadX'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">eleUploadFile.addEventListener(<span class=\"string\">'change'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// dataTransfer是拖拽操作的对象</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> file = event.target.files[<span class=\"number\">0</span>] || event.target.dataTransfer.files[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> reader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\"></span><br><span class=\"line\">    reader.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> base64 = e.target.result;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// canvas压缩图片，并且回调显示</span></span><br><span class=\"line\">        imgTogether(base64, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">url</span>) </span>&#123;</span><br><span class=\"line\">            eleImgUploadX.innerHTML = <span class=\"string\">'&lt;img src=\"'</span> + url + <span class=\"string\">'\"/&gt;'</span>;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    reader.readAsDataURL(file);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> imgTogether = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">url, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'canvas'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = canvas.getContext(<span class=\"string\">'2d'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// image实例对象</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> imageUpload = <span class=\"keyword\">new</span> Image();</span><br><span class=\"line\">    imageUpload.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'imageUpload'</span>, imageUpload);</span><br><span class=\"line\">        canvas.width = imageUpload.width;</span><br><span class=\"line\">        canvas.height = imageUpload.height;</span><br><span class=\"line\">        <span class=\"comment\">// canvas绘制图片</span></span><br><span class=\"line\">        context.drawImage(imageUpload, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 绘制水印</span></span><br><span class=\"line\">         context.drawImage(eleImgCover, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 回调</span></span><br><span class=\"line\">        callback(canvas.toDataURL(<span class=\"string\">'image/jpeg'</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    imageUpload.src = url;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2>使用canvas给图片添加水印</h2>\n<h3>css部分</h3>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.clip</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">clip</span>: <span class=\"built_in\">rect</span>(0 0 0 0);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3>html部分</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"uploadFile\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"clip\"</span> <span class=\"attr\">accept</span>=<span class=\"string\">\"image/*\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ui-button ui-button-primary\"</span> <span class=\"attr\">for</span>=<span class=\"string\">\"uploadFile\"</span>&gt;</span>选择图片<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">\"imgCover\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"./images/googlelogo_color_272x92dp.png\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"clip\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">\"imgUploadX\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3>js部分</h3>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> eleUploadFile = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'uploadFile'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> eleImgCover = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'imgCover'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> eleImgUploadX = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'imgUploadX'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">eleUploadFile.addEventListener(<span class=\"string\">'change'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// dataTransfer是拖拽操作的对象</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> file = event.target.files[<span class=\"number\">0</span>] || event.target.dataTransfer.files[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> reader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\"></span><br><span class=\"line\">    reader.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> base64 = e.target.result;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// canvas压缩图片，并且回调显示</span></span><br><span class=\"line\">        imgTogether(base64, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">url</span>) </span>&#123;</span><br><span class=\"line\">            eleImgUploadX.innerHTML = <span class=\"string\">'&lt;img src=\"'</span> + url + <span class=\"string\">'\"/&gt;'</span>;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    reader.readAsDataURL(file);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> imgTogether = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">url, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'canvas'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = canvas.getContext(<span class=\"string\">'2d'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// image实例对象</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> imageUpload = <span class=\"keyword\">new</span> Image();</span><br><span class=\"line\">    imageUpload.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'imageUpload'</span>, imageUpload);</span><br><span class=\"line\">        canvas.width = imageUpload.width;</span><br><span class=\"line\">        canvas.height = imageUpload.height;</span><br><span class=\"line\">        <span class=\"comment\">// canvas绘制图片</span></span><br><span class=\"line\">        context.drawImage(imageUpload, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 绘制水印</span></span><br><span class=\"line\">         context.drawImage(eleImgCover, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 回调</span></span><br><span class=\"line\">        callback(canvas.toDataURL(<span class=\"string\">'image/jpeg'</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    imageUpload.src = url;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"清除浮动带来的影响","catalog":true,"date":"2018-12-13T15:42:49.000Z","subtitle":null,"header-img":null,"_content":"\n\n## 清除浮动带来的影响\n\n> 浮动造成父元素高度塌陷\n\n### 清除浮动的方法\n- 底部插入有`clear:both;`的元素\n- 父元素BFC(IE8+)或haslayout(IE6/IE7)\n\n\n### 清除浮动方法的差异\n\n#### clear:both\n1. 与外界接触\n2. margin重叠\n\n#### BFC/haslayout\n1. 封闭结构，内部声明不会对外部造成任何影响\n\n\n### clear通常应用形式\n\n#### clear:both\n- HTML block水平元素底部走起\n\n```\n<div ...></div>\n```\n\n- Css after 伪元素底部生成\n\n```\n.clearfix:after{}\n```\n\n#### 两种形式的不足\n- div元素--很多裸露的div标签\n- after伪元素--不兼容IE6/IE7\n\n\n#### BFC/haslayout通常声明\n- float:left/right\n- position:absolute/fixed\n- overflow:hidden/scroll(IE7+)\n- display:inline-block/table-cell(IE8+)\n- width/height/zoom:1/...(IE6/IE7)\n\n> 因BFC不能“一方通行”\n\n#### 权衡后的策略\n\n```\n// IE8+\n.clearfix:after{\n    content:'';\n    display:block;\n    height:0;\n    overflow:hidden;\n    clear:both;\n}\n// IE6/IE7\n.clearfix{\n    *zoom:1;\n}\n```\n\n#### 更好的方法\n\n```\n// IE8+\n.clearfix:after{\n    content:'';\n    display:table;\n    clear:both;\n}\n// IE6/IE7\n.clearfix{\n    *zoom:1;\n}\n```\n\n> `.clearfix`只需要应用到包含浮动子元素的父元素上，切勿滥用","source":"_posts/清除浮动带来的影响.md","raw":"---\ntitle: 清除浮动带来的影响\ncatalog: true\ndate: 2018-12-13 23:42:49\nsubtitle:\nheader-img:\ntags: [html, css, float, clear, BFC]\n---\n\n\n## 清除浮动带来的影响\n\n> 浮动造成父元素高度塌陷\n\n### 清除浮动的方法\n- 底部插入有`clear:both;`的元素\n- 父元素BFC(IE8+)或haslayout(IE6/IE7)\n\n\n### 清除浮动方法的差异\n\n#### clear:both\n1. 与外界接触\n2. margin重叠\n\n#### BFC/haslayout\n1. 封闭结构，内部声明不会对外部造成任何影响\n\n\n### clear通常应用形式\n\n#### clear:both\n- HTML block水平元素底部走起\n\n```\n<div ...></div>\n```\n\n- Css after 伪元素底部生成\n\n```\n.clearfix:after{}\n```\n\n#### 两种形式的不足\n- div元素--很多裸露的div标签\n- after伪元素--不兼容IE6/IE7\n\n\n#### BFC/haslayout通常声明\n- float:left/right\n- position:absolute/fixed\n- overflow:hidden/scroll(IE7+)\n- display:inline-block/table-cell(IE8+)\n- width/height/zoom:1/...(IE6/IE7)\n\n> 因BFC不能“一方通行”\n\n#### 权衡后的策略\n\n```\n// IE8+\n.clearfix:after{\n    content:'';\n    display:block;\n    height:0;\n    overflow:hidden;\n    clear:both;\n}\n// IE6/IE7\n.clearfix{\n    *zoom:1;\n}\n```\n\n#### 更好的方法\n\n```\n// IE8+\n.clearfix:after{\n    content:'';\n    display:table;\n    clear:both;\n}\n// IE6/IE7\n.clearfix{\n    *zoom:1;\n}\n```\n\n> `.clearfix`只需要应用到包含浮动子元素的父元素上，切勿滥用","slug":"清除浮动带来的影响","published":1,"updated":"2018-12-13T15:43:38.716Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrvx000kj2s4f71d9j8m","content":"<h2><span id=\"清除浮动带来的影响\">清除浮动带来的影响</span></h2>\n<blockquote>\n<p>浮动造成父元素高度塌陷</p>\n</blockquote>\n<h3><span id=\"清除浮动的方法\">清除浮动的方法</span></h3>\n<ul>\n<li>底部插入有<code>clear:both;</code>的元素</li>\n<li>父元素BFC(IE8+)或haslayout(IE6/IE7)</li>\n</ul>\n<h3><span id=\"清除浮动方法的差异\">清除浮动方法的差异</span></h3>\n<h4><span id=\"clearboth\">clear:both</span></h4>\n<ol>\n<li>与外界接触</li>\n<li>margin重叠</li>\n</ol>\n<h4><span id=\"bfchaslayout\">BFC/haslayout</span></h4>\n<ol>\n<li>封闭结构，内部声明不会对外部造成任何影响</li>\n</ol>\n<h3><span id=\"clear通常应用形式\">clear通常应用形式</span></h3>\n<h4><span id=\"clearboth\">clear:both</span></h4>\n<ul>\n<li>HTML block水平元素底部走起</li>\n</ul>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">&lt;div ...&gt;</span><span class=\"section\">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Css after 伪元素底部生成</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.clearfix</span><span class=\"selector-pseudo\">:after</span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n<h4><span id=\"两种形式的不足\">两种形式的不足</span></h4>\n<ul>\n<li>div元素–很多裸露的div标签</li>\n<li>after伪元素–不兼容IE6/IE7</li>\n</ul>\n<h4><span id=\"bfchaslayout通常声明\">BFC/haslayout通常声明</span></h4>\n<ul>\n<li>float:left/right</li>\n<li>position:absolute/fixed</li>\n<li>overflow:hidden/scroll(IE7+)</li>\n<li>display:inline-block/table-cell(IE8+)</li>\n<li>width/height/zoom:1/…(IE6/IE7)</li>\n</ul>\n<blockquote>\n<p>因BFC不能“一方通行”</p>\n</blockquote>\n<h4><span id=\"权衡后的策略\">权衡后的策略</span></h4>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// IE8+</span></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span>:after&#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>:<span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:block;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>:hidden;</span><br><span class=\"line\">    <span class=\"attribute\">clear</span>:both;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// IE6/IE7</span></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span>&#123;</span><br><span class=\"line\">    *zoom:<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4><span id=\"更好的方法\">更好的方法</span></h4>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// IE8+</span></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span>:after&#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>:<span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:table;</span><br><span class=\"line\">    <span class=\"attribute\">clear</span>:both;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// IE6/IE7</span></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span>&#123;</span><br><span class=\"line\">    *zoom:<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>.clearfix</code>只需要应用到包含浮动子元素的父元素上，切勿滥用</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2>清除浮动带来的影响</h2>\n<blockquote>\n<p>浮动造成父元素高度塌陷</p>\n</blockquote>\n<h3>清除浮动的方法</h3>\n<ul>\n<li>底部插入有<code>clear:both;</code>的元素</li>\n<li>父元素BFC(IE8+)或haslayout(IE6/IE7)</li>\n</ul>\n<h3>清除浮动方法的差异</h3>\n<h4>clear:both</h4>\n<ol>\n<li>与外界接触</li>\n<li>margin重叠</li>\n</ol>\n<h4>BFC/haslayout</h4>\n<ol>\n<li>封闭结构，内部声明不会对外部造成任何影响</li>\n</ol>\n<h3>clear通常应用形式</h3>\n<h4>clear:both</h4>\n<ul>\n<li>HTML block水平元素底部走起</li>\n</ul>\n<figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">&lt;div ...&gt;</span><span class=\"section\">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Css after 伪元素底部生成</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.clearfix</span><span class=\"selector-pseudo\">:after</span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n<h4>两种形式的不足</h4>\n<ul>\n<li>div元素–很多裸露的div标签</li>\n<li>after伪元素–不兼容IE6/IE7</li>\n</ul>\n<h4>BFC/haslayout通常声明</h4>\n<ul>\n<li>float:left/right</li>\n<li>position:absolute/fixed</li>\n<li>overflow:hidden/scroll(IE7+)</li>\n<li>display:inline-block/table-cell(IE8+)</li>\n<li>width/height/zoom:1/…(IE6/IE7)</li>\n</ul>\n<blockquote>\n<p>因BFC不能“一方通行”</p>\n</blockquote>\n<h4>权衡后的策略</h4>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// IE8+</span></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span>:after&#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>:<span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:block;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>:hidden;</span><br><span class=\"line\">    <span class=\"attribute\">clear</span>:both;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// IE6/IE7</span></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span>&#123;</span><br><span class=\"line\">    *zoom:<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4>更好的方法</h4>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// IE8+</span></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span>:after&#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>:<span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:table;</span><br><span class=\"line\">    <span class=\"attribute\">clear</span>:both;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// IE6/IE7</span></span><br><span class=\"line\"><span class=\"selector-class\">.clearfix</span>&#123;</span><br><span class=\"line\">    *zoom:<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>.clearfix</code>只需要应用到包含浮动子元素的父元素上，切勿滥用</p>\n</blockquote>\n"},{"title":"解决vue props拿不到值的问题","catalog":true,"date":"2019-01-10T11:35:39.000Z","subtitle":null,"header-img":null,"_content":"\n> vue开发中，子组件经常出现props中获取不到父组件传过来的值，发现以下两种方法可以解决这种问题\n\n### 方法一\n\n> 在父组件调用子组件时，设置`v-if=\"status\"`，初始值设置为`false`,在成功获取数据之后设置为`true`\n\n```\n// 子组件\n <child :datas=\"conditionStatisticsData\" v-if=\"status\"></child>\n// 成功获取数据后 status设置成true\n homeResource.getConditionData().then((res) => {\n this.status = true\n  if (res.data.status === 0) {\n   console.log('条件', res.data.data)\n   this.conditionStatisticsData = res.data.data\n  }\n })\n```\n\n### 方法二\n\n> watch 监听`props`传递过来的值\n\n```\nwatch: {\n data: function (val) {\n   this.initdata(val)\n  }\n }\n```\n\n> 希望能够帮得到大家。","source":"_posts/解决vue-props拿不到值的问题.md","raw":"---\ntitle: 解决vue props拿不到值的问题\ncatalog: true\ndate: 2019-01-10 19:35:39\nsubtitle:\nheader-img:\ntags: 【vue, props, watch】\n---\n\n> vue开发中，子组件经常出现props中获取不到父组件传过来的值，发现以下两种方法可以解决这种问题\n\n### 方法一\n\n> 在父组件调用子组件时，设置`v-if=\"status\"`，初始值设置为`false`,在成功获取数据之后设置为`true`\n\n```\n// 子组件\n <child :datas=\"conditionStatisticsData\" v-if=\"status\"></child>\n// 成功获取数据后 status设置成true\n homeResource.getConditionData().then((res) => {\n this.status = true\n  if (res.data.status === 0) {\n   console.log('条件', res.data.data)\n   this.conditionStatisticsData = res.data.data\n  }\n })\n```\n\n### 方法二\n\n> watch 监听`props`传递过来的值\n\n```\nwatch: {\n data: function (val) {\n   this.initdata(val)\n  }\n }\n```\n\n> 希望能够帮得到大家。","slug":"解决vue-props拿不到值的问题","published":1,"updated":"2019-01-10T11:42:14.927Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrvy000lj2s4wnyij02z","content":"<blockquote>\n<p>vue开发中，子组件经常出现props中获取不到父组件传过来的值，发现以下两种方法可以解决这种问题</p>\n</blockquote>\n<h3><span id=\"方法一\">方法一</span></h3>\n<blockquote>\n<p>在父组件调用子组件时，设置<code>v-if=&quot;status&quot;</code>，初始值设置为<code>false</code>,在成功获取数据之后设置为<code>true</code></p>\n</blockquote>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 子组件</span></span><br><span class=\"line\"> &lt;child :datas=<span class=\"string\">\"conditionStatisticsData\"</span> v-<span class=\"keyword\">if</span>=<span class=\"string\">\"status\"</span>&gt;&lt;/child&gt;</span><br><span class=\"line\"><span class=\"comment\">// 成功获取数据后 status设置成true</span></span><br><span class=\"line\"> homeResource.getConditionData().then((res) =&gt; &#123;</span><br><span class=\"line\"> <span class=\"keyword\">this</span>.status = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (res.<span class=\"keyword\">data</span>.status === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">   console.log(<span class=\"string\">'条件'</span>, res.<span class=\"keyword\">data</span>.<span class=\"keyword\">data</span>)</span><br><span class=\"line\">   <span class=\"keyword\">this</span>.conditionStatisticsData = res.<span class=\"keyword\">data</span>.<span class=\"keyword\">data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;)</span><br></pre></td></tr></table></figure>\n<h3><span id=\"方法二\">方法二</span></h3>\n<blockquote>\n<p>watch 监听<code>props</code>传递过来的值</p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">watch</span>: &#123;</span><br><span class=\"line\"> <span class=\"attribute\">data</span>: function (val) &#123;</span><br><span class=\"line\">   this.<span class=\"built_in\">initdata</span>(val)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>希望能够帮得到大家。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>vue开发中，子组件经常出现props中获取不到父组件传过来的值，发现以下两种方法可以解决这种问题</p>\n</blockquote>\n<h3>方法一</h3>\n<blockquote>\n<p>在父组件调用子组件时，设置<code>v-if=&quot;status&quot;</code>，初始值设置为<code>false</code>,在成功获取数据之后设置为<code>true</code></p>\n</blockquote>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 子组件</span></span><br><span class=\"line\"> &lt;child :datas=<span class=\"string\">\"conditionStatisticsData\"</span> v-<span class=\"keyword\">if</span>=<span class=\"string\">\"status\"</span>&gt;&lt;/child&gt;</span><br><span class=\"line\"><span class=\"comment\">// 成功获取数据后 status设置成true</span></span><br><span class=\"line\"> homeResource.getConditionData().then((res) =&gt; &#123;</span><br><span class=\"line\"> <span class=\"keyword\">this</span>.status = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (res.<span class=\"keyword\">data</span>.status === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">   console.log(<span class=\"string\">'条件'</span>, res.<span class=\"keyword\">data</span>.<span class=\"keyword\">data</span>)</span><br><span class=\"line\">   <span class=\"keyword\">this</span>.conditionStatisticsData = res.<span class=\"keyword\">data</span>.<span class=\"keyword\">data</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;)</span><br></pre></td></tr></table></figure>\n<h3>方法二</h3>\n<blockquote>\n<p>watch 监听<code>props</code>传递过来的值</p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">watch</span>: &#123;</span><br><span class=\"line\"> <span class=\"attribute\">data</span>: function (val) &#123;</span><br><span class=\"line\">   this.<span class=\"built_in\">initdata</span>(val)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>希望能够帮得到大家。</p>\n</blockquote>\n"},{"title":"终于成功了","date":"2017-05-08T14:28:28.000Z","_content":"终于成功了，搞了老子一天了，\n让我激动一会儿~~","source":"_posts/终于成功了.md","raw":"---\ntitle: 终于成功了\ndate: 2017-05-08 22:28:28\ntags:\n---\n终于成功了，搞了老子一天了，\n让我激动一会儿~~","slug":"终于成功了","published":1,"updated":"2018-11-29T07:54:12.470Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrw0000mj2s4fq77c635","content":"<p>终于成功了，搞了老子一天了，<br>\n让我激动一会儿~~</p>\n","site":{"data":{}},"excerpt":"","more":"<p>终于成功了，搞了老子一天了，<br>\n让我激动一会儿~~</p>\n"},{"title":"函数表达式","date":"2017-05-09T06:31:41.000Z","_content":"\n## 函数表达式\n\n1. 函数声明\n> 函数声明语法\n\n```javascript\nfunction funName(){\n    //函数体\n}\n```\nfunction是关键字，然后是函数名字，还有一个非标准的name属性，通过这个属性可以访问到函数指定的名字。这个属性的值永远等于跟在function关键字后面的标识符。\n```javascript\nconsole.log(funName.name); //funName可以使用arguments.callee自调用\n\n```\n<!-- more -->\n> 重要的特性\n\n函数声明提升(function declaration hoisting)，意思是在执行代码时会先读取函数声明，\n意味着，**可以把函数声明放在调用它的语句后面**\n\n```javascript\nabc();  //\"1\"\nfunction abc(){\n    console.log('1');\n}\n```\n上述代码能够正常执行\n\n2. 函数表达式\n\n> 函数声明的几种形式\n- 最常见的一种形式\n```javascript\nvar funcName = function(){\n    //函数体\n}\n```\n\n创建一个函数并将它赋值给变量funcName。这种情况下创建的函数为**匿名函数(anonymous function)**，因为function后面没有标识符。\n> 匿名函数有时候也叫拉姆达函数，匿名函数的name属性是空字符串。\n\n函数表达式与其他表达式一样，在使用前必须先赋值，要不能会报错。\n```javascript\nabc();\nvar abc = function(){\n    console.log(\"1\");\n}\n//报错：Uncaught TypeError: abc is not a function\n```\n\n理解函数提升的关键，就是理解函数声明与函数表达式之间的区别：\n> 思考题\n```javascript\n//不要这么做\nif(isOk){\n    function sayHello(){\n        console.log('hello');\n    }\n}else{\n    function sayHello(){\n        console.log('world');\n    }\n}\n```\n结果是什么？\n> 从表面上看，上述代码表示在isOk为true时，使用一个sayHello()的定义，否则，使用另一个sayHello()的定义    \n实际上，在ECMAScript中属于无效语法，javascript引擎会尝试修正错误，将其转换为合理的状态。    \n但是问题是各个浏览器尝试修正错误的做法并不一致。大多数浏览器会返回第一个声明，    \n因此使用这种方式很危险\n\n使用函数表达式就不会有这种问题\n```javascript\n//可以这样做\nvar sayHello;\nif(isOk){\n    sayHello = function(){\n        alert('hello');\n    }\n}else{\n    sayHello = function(){\n        alert('world!');\n    }\n}\n```\n能够创建函数再赋值给变量，也就能够把函数作为其他函数的返回值。\n\n\n#### 7.1 递归\n> 递归函数是在一个函数通过名字调用自身的情况下构成的\n\n```javascript\nfunction count(num){\n    if(num <= 1){\n        return 1;\n    }else{\n        return num * count(num-1);\n    }\n}\n```\n> 上述代码是经典的阶乘函数    \n虽然这个函数从表面上看来没什么问题，但下面的代码却可能导致它出错\n\n```javascript\nvar anotherCount = count;\ncount = null;\nalert(anotherCount(4))  // 报错:count is not a function\n```\n>上面代码，先把函数count()保存在变量anotherCount中，然后将count变量设置为null，结果指向原始函数的引用只剩下一个。    \n但是在调用anotherCount()时，需要执行count()，而count已经不在是一个函数，所以导致出错\"count is not a function\"\n\n> 在这种情况下，使用arguments.callee可以解决这个问题    \narguments.callee是一个指向正在执行的函数的指针，因此可以用它来实现函数的递归调用\n\n```javascript\nfunction count(num){\n    if(num <= 1){\n        return 1;\n    }else{\n        return num * arguments.callee(num-1);\n    }\n}\n```\n\n通过使用`arguments.callee`代替函数名，可以确保无论怎么样调用函数都不会出问题，    \n因此，在编写函数递归调用时，使用`arguments.callee`总比使用函数名更保险。\n\n> 不过在严格模式下，\"严格模式\"（strict mode）不能通过脚本访问`arguments.callee`，访问这个属性将会报错。    \n不过可以使用命名函数表达式来达成相同的结果。\n\n```javascript\n'strict mode'   //严格模式\nvar count = (function f(num){\n    if(num <= 1){\n        return 1;\n    }else{\n        return num * f(num-1);\n    }\n});\n```\n>以上代码创建一个名为f()的命名函数表达式，然后将它赋值给变量count。即便是函数赋值给另一个变量   \n函数的名字f仍让有效，所以递归调用照样能正常完成。这种方式在严格模式和非严格模式都行的通。\n\n#### 7.2 闭包\n###### 概念\n> 闭包是指有权访问另一个函数作用域中的变量的函数\n创建闭包最常见的方式，就是在一个函数内部创建另一个函数。\n\n为什么还能够访问内部变量？\n>  是因为内部函数的作用域中包含父函数的作用域。\n\n###### 作用域链\n> 当某个函数被调用时，会创建一个执行环境（execution context）及相应的作用域链接。   \n-->   \n然后使用arguments和其他命名参数的值来初始化函数的活动对象（activation object）。   \n-->   \n但在作用域链中，外部函数的活动对象始终处于第二位，外部函数的外部函数的活动对象处于第三位，...     \n直至作为作用域链终点的全局执行环境。   \n\n> 在函数执行过程中，为读取和写入变量的值，就需要在作用域链中查找变量。\n```javascript\nfunction compare(value1, value2){\n    if(value1 < value2){\n        return -1;\n    } else if(value1 > value2){\n        return 1;\n    } else {\n        return 0;\n    }\n}\n```\n上述代码：\n1. 定义compare()函数\n2. 在全局作用域中调用它\n3. 当调用compare()时，会创建一个包含arguments,value1,value2的活动对象\n4. 全局执行环境的变量对象（包括result和compare）在compare()执行的作用域链中处于第二位。\n\n\ncompare()函数执行时的作用域链关系图\n\n![图片](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1489995952212&di=de4fccb3e1965772e5ac835604c69019&imgtype=0&src=http%3A%2F%2Fimages2015.cnblogs.com%2Fblog%2F740839%2F201509%2F740839-20150914151133867-323877975.jpg)\n\n后台每个执行环境都有一个表示变量的对象----**变量对象**。   \n**全局环境**的变量对象始终存在，而像`compare()`函数这样的**局部环境**的变量对象   \n则只在*函数执行*的过程中存在。\n\n- 在创建`compare()`函数时，会创建一个预先包含全局变量对象的作用域链，这个作用域链被保存在内部的`[[Scope]]`属性中\n- 当调用`compare()`函数时，会为函数创建一个*执行环境*，然后通过复制函数的`[[Scope]]`属性中的对象构建起执行环境的作用域链接。\n- 此后，又有一个活动对象（在此作为变量对象使用）被创建并推入执行环境作用域链的前端\n\n> 对于上述例子而言，compare()函数的执行环境，其作用域链中包含两个变量：\n1. 本地变量对象\n2. 全局变量对象\n> 作用域链*本质上*是一个指向*变量对象*的*指针列表*，它只包含**引用**但不实际包含**对象**。\n\n在函数中访问一个变量时，就会从作用域链中搜索具有相应名字的变量。   \n一般来讲，当函数执行完毕后，局部活动对象机会被销毁，内存中仅保存全局作用域（全局执行环境的变量对象）   \n但是，***闭包***的情况又有所不同。\n\n在另一个函数内部定义的函数会将包含函数(即外部函数)的活动对象添加到它的作用域链中。在匿名函数从createComparisonFunction()中被返回后，它的作用域链被初始化为包含createComparisonFunction()函数的活动对象和全局变量对象。这样匿名函数就可以访问在createComparisonFunction()中定义的所有变量。更为重要的是createComparisonFunction()函数在执行完毕后，其活动对象也不会被销毁，因为匿名函数的作用域链仍然在引用这个活动对象。换句话说，当createComparisonFunction()函数返回后，其执行环境的作用域链会被销毁，但它的活动对象仍然留在内存中；直到匿名函数被销毁后，createComparisonFunction()的活动对象才被销毁\n\n> [注意]由于闭包会携带包含它的函数的作用域链，因此会比其他函数占用更多的内存。过度使用闭包可能会导致内存占用过多，所以只在绝对必要时使用闭包。\n\n```javascript\n//创建函数\nvar compareNames = createComparisonFunction(\"name\");\n//调用函数\nvar result = compareNames({name:\"Nicholas\"},{name:\"Greg\"});\n//解除对匿名函数的引用(以便释放内存)\ncompareNames = null;\n/*首先，创建的比较函数被保存在变量compareNames中，\n而通过将compareNames设置为等于null，解除该函数的引用，\n就等于通知垃圾回收例程将其清除。随着匿名函数的作用域链被销毁，\n其他作用域(除了全局作用域)也都安全地销毁了。*/\n```\n\n![](http://images2015.cnblogs.com/blog/740839/201509/740839-20150914151358039-898068634.jpg)\n\n> 由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。   \n过度使用闭包可能会导致内存占用过多，   \nV8 javascript引擎会尝试回收被闭包占用的内存。\n\n##### 7.2.1 闭包和变量\n> 作用域链的这种配置机制引起了一个值得注意的副作用，即闭包只能取得包含函数中任何变量的最后一个值。    \n\n闭包保存的是**整个变量对象**，而不是**某个特殊的值**。\n\n```javascript\nfunction createFunctions (){\n    var result = new Array();\n    \n    for (var i=0;i<10;i++){\n        result[i] = function(){\n            return i;\n        };\n    }\n    return result;\n}\n```\n这个函数会返回一个值。结果是每个函数都返回10.   \n因为每个函数的作用域中都保存着createFunctions()函数的活动对象，\n所以他们引用的都是同一个变量i。\n当createFunctions()函数返回后，变量i的值是10，此时每个函数都引用着保存变量i\n的同一个变量对象，\n所以每个函数内部i的值都是10。\n\n![闭包](http://images.cnblogs.com/cnblogs_com/White-Quality/969463/o_%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_20170321125523.png)\n```\nScopes[2]\nClosure (createFunctions)\ni:10\n```\n我们可以通过创建另一个匿名函数强制让闭包的行为符合预期\n\n```\nfunction createFunctions(){\n    var result = new Array();\n    \n    for(var i = 0;i < 10; i++){\n        result[i] = function(num){\n           return function(){\n               return num;\n           } \n        }(i)\n    }\n    return result;\n}\n```\n![closure-2](http://images.cnblogs.com/cnblogs_com/White-Quality/969463/o_closure.png)\n\n改写后的createFunctions()函数，每个函数都会返回不同的索引值了。\n没有直接把闭包赋值给数组，而是定义了一个匿名函数，并将立即执行该匿名函数的结果赋值给数组。\n这里的匿名函数有一个参数num，也就是最终要返回的值。\n在调用每个匿名函数时，我们出入变量i。\n由于函数参数是按值传递的，所以就会将变量i的当前值赋值给参数num。\n而在这个匿名函数内部，又创建了一个访问num的闭包，\n这样一来，result数组中的每个函数都有自己num变量的副本，\n因此就可以返回各自不同的数值了。\n\n##### 7.2.2关于this对象\n> this对象是在运行时基于函数的执行环境绑定的：   \n在全局函数中：thiis等于window；\n而在函数被当做某个对象的方法调用时：this等于那个对象。   \n不过匿名函数的执行环境具有全局性，因此匿名函数的this对象通常也指向window；   \n在通过call()和apply()改变函数执行环境的情况下，this就会指向其他对象。\n\n```\nvar name = \"the window\";\nvar object = {\n  name:\"my object\",\n  getNameFunc:function(){\n    return function(){\n        return this.name\n    }\n  }\n};\n\nobject.getNameFunc()();   //\"the window\"\n```\n为什么匿名函数没有取得其包含作用域（或外部作用域）的this对象呢？\n\n> 前面提到过，每个函数再被调用的时候会自动取得两个特殊变量 `this` 和 `arguments`。内部函数再搜索这两个变量时，只会搜索到其活动对象为止，因此永远不可能直接访问外部函数中的这两个变量(详见下图)。\n\n![](http://images2015.cnblogs.com/blog/740839/201509/740839-20150914151358039-898068634.jpg)\n\n不过，把外部函数作用域中的this对象保存在一个闭包能够访问到的变量里面，就可以让闭包访问该对象了。\n```\nvar name = \"the window\";\nvar object = {\n  name:\"my object\",\n  getNameFunc:function(){\n    var that = this;\n    return function(){\n        return that.name\n    }\n  }\n};\n\nobject.getNameFunc()();   //\"my object\"\n```\n> tips: `this` 和 `arguments`也存在同样的问题，如果想访问作用域中的arguments对象，必须将对该对象的引用保存到另一个闭包能够访问的变量中。\n\n在几种特殊情况下，this的值可能会意外地改变\n```\nvar name = \"the window\";\nvar object = {\n  name:\"my object\",\n  getNameFunc:function(){\n    return this.name\n  }\n};\n\nobject.getNameFunc();  //'my object'\n(object.getNameFunc)();  //'my object'\n(object.getNameFunc = object.getNameFunc)(); //'the window'\n```\n> 上述代码：第一种方式跟平常一样调用了`object.getNameFunc()`,返回`my object`,因为`this.name`就是`object.name`。   \n第二种方式在调用这个方法前添加了括号，虽然添加了括号，就好像只是在引用一个函数，但this的值得到了维持，因为`object.getNameFunc`和`object.getNameFunc`定义是相同的。    \n第三种方式：先执行了一条赋值语句，然后在调用赋值后的结果。因为这个赋值表达式的值是函数本身，所以this的值得不到维持，结果返回`the window`。\n","source":"_posts/函数表达式.md","raw":"---\ntitle: 函数表达式\ndate: 2017-05-09 14:31:41\ntags: [javascript]\n---\n\n## 函数表达式\n\n1. 函数声明\n> 函数声明语法\n\n```javascript\nfunction funName(){\n    //函数体\n}\n```\nfunction是关键字，然后是函数名字，还有一个非标准的name属性，通过这个属性可以访问到函数指定的名字。这个属性的值永远等于跟在function关键字后面的标识符。\n```javascript\nconsole.log(funName.name); //funName可以使用arguments.callee自调用\n\n```\n<!-- more -->\n> 重要的特性\n\n函数声明提升(function declaration hoisting)，意思是在执行代码时会先读取函数声明，\n意味着，**可以把函数声明放在调用它的语句后面**\n\n```javascript\nabc();  //\"1\"\nfunction abc(){\n    console.log('1');\n}\n```\n上述代码能够正常执行\n\n2. 函数表达式\n\n> 函数声明的几种形式\n- 最常见的一种形式\n```javascript\nvar funcName = function(){\n    //函数体\n}\n```\n\n创建一个函数并将它赋值给变量funcName。这种情况下创建的函数为**匿名函数(anonymous function)**，因为function后面没有标识符。\n> 匿名函数有时候也叫拉姆达函数，匿名函数的name属性是空字符串。\n\n函数表达式与其他表达式一样，在使用前必须先赋值，要不能会报错。\n```javascript\nabc();\nvar abc = function(){\n    console.log(\"1\");\n}\n//报错：Uncaught TypeError: abc is not a function\n```\n\n理解函数提升的关键，就是理解函数声明与函数表达式之间的区别：\n> 思考题\n```javascript\n//不要这么做\nif(isOk){\n    function sayHello(){\n        console.log('hello');\n    }\n}else{\n    function sayHello(){\n        console.log('world');\n    }\n}\n```\n结果是什么？\n> 从表面上看，上述代码表示在isOk为true时，使用一个sayHello()的定义，否则，使用另一个sayHello()的定义    \n实际上，在ECMAScript中属于无效语法，javascript引擎会尝试修正错误，将其转换为合理的状态。    \n但是问题是各个浏览器尝试修正错误的做法并不一致。大多数浏览器会返回第一个声明，    \n因此使用这种方式很危险\n\n使用函数表达式就不会有这种问题\n```javascript\n//可以这样做\nvar sayHello;\nif(isOk){\n    sayHello = function(){\n        alert('hello');\n    }\n}else{\n    sayHello = function(){\n        alert('world!');\n    }\n}\n```\n能够创建函数再赋值给变量，也就能够把函数作为其他函数的返回值。\n\n\n#### 7.1 递归\n> 递归函数是在一个函数通过名字调用自身的情况下构成的\n\n```javascript\nfunction count(num){\n    if(num <= 1){\n        return 1;\n    }else{\n        return num * count(num-1);\n    }\n}\n```\n> 上述代码是经典的阶乘函数    \n虽然这个函数从表面上看来没什么问题，但下面的代码却可能导致它出错\n\n```javascript\nvar anotherCount = count;\ncount = null;\nalert(anotherCount(4))  // 报错:count is not a function\n```\n>上面代码，先把函数count()保存在变量anotherCount中，然后将count变量设置为null，结果指向原始函数的引用只剩下一个。    \n但是在调用anotherCount()时，需要执行count()，而count已经不在是一个函数，所以导致出错\"count is not a function\"\n\n> 在这种情况下，使用arguments.callee可以解决这个问题    \narguments.callee是一个指向正在执行的函数的指针，因此可以用它来实现函数的递归调用\n\n```javascript\nfunction count(num){\n    if(num <= 1){\n        return 1;\n    }else{\n        return num * arguments.callee(num-1);\n    }\n}\n```\n\n通过使用`arguments.callee`代替函数名，可以确保无论怎么样调用函数都不会出问题，    \n因此，在编写函数递归调用时，使用`arguments.callee`总比使用函数名更保险。\n\n> 不过在严格模式下，\"严格模式\"（strict mode）不能通过脚本访问`arguments.callee`，访问这个属性将会报错。    \n不过可以使用命名函数表达式来达成相同的结果。\n\n```javascript\n'strict mode'   //严格模式\nvar count = (function f(num){\n    if(num <= 1){\n        return 1;\n    }else{\n        return num * f(num-1);\n    }\n});\n```\n>以上代码创建一个名为f()的命名函数表达式，然后将它赋值给变量count。即便是函数赋值给另一个变量   \n函数的名字f仍让有效，所以递归调用照样能正常完成。这种方式在严格模式和非严格模式都行的通。\n\n#### 7.2 闭包\n###### 概念\n> 闭包是指有权访问另一个函数作用域中的变量的函数\n创建闭包最常见的方式，就是在一个函数内部创建另一个函数。\n\n为什么还能够访问内部变量？\n>  是因为内部函数的作用域中包含父函数的作用域。\n\n###### 作用域链\n> 当某个函数被调用时，会创建一个执行环境（execution context）及相应的作用域链接。   \n-->   \n然后使用arguments和其他命名参数的值来初始化函数的活动对象（activation object）。   \n-->   \n但在作用域链中，外部函数的活动对象始终处于第二位，外部函数的外部函数的活动对象处于第三位，...     \n直至作为作用域链终点的全局执行环境。   \n\n> 在函数执行过程中，为读取和写入变量的值，就需要在作用域链中查找变量。\n```javascript\nfunction compare(value1, value2){\n    if(value1 < value2){\n        return -1;\n    } else if(value1 > value2){\n        return 1;\n    } else {\n        return 0;\n    }\n}\n```\n上述代码：\n1. 定义compare()函数\n2. 在全局作用域中调用它\n3. 当调用compare()时，会创建一个包含arguments,value1,value2的活动对象\n4. 全局执行环境的变量对象（包括result和compare）在compare()执行的作用域链中处于第二位。\n\n\ncompare()函数执行时的作用域链关系图\n\n![图片](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1489995952212&di=de4fccb3e1965772e5ac835604c69019&imgtype=0&src=http%3A%2F%2Fimages2015.cnblogs.com%2Fblog%2F740839%2F201509%2F740839-20150914151133867-323877975.jpg)\n\n后台每个执行环境都有一个表示变量的对象----**变量对象**。   \n**全局环境**的变量对象始终存在，而像`compare()`函数这样的**局部环境**的变量对象   \n则只在*函数执行*的过程中存在。\n\n- 在创建`compare()`函数时，会创建一个预先包含全局变量对象的作用域链，这个作用域链被保存在内部的`[[Scope]]`属性中\n- 当调用`compare()`函数时，会为函数创建一个*执行环境*，然后通过复制函数的`[[Scope]]`属性中的对象构建起执行环境的作用域链接。\n- 此后，又有一个活动对象（在此作为变量对象使用）被创建并推入执行环境作用域链的前端\n\n> 对于上述例子而言，compare()函数的执行环境，其作用域链中包含两个变量：\n1. 本地变量对象\n2. 全局变量对象\n> 作用域链*本质上*是一个指向*变量对象*的*指针列表*，它只包含**引用**但不实际包含**对象**。\n\n在函数中访问一个变量时，就会从作用域链中搜索具有相应名字的变量。   \n一般来讲，当函数执行完毕后，局部活动对象机会被销毁，内存中仅保存全局作用域（全局执行环境的变量对象）   \n但是，***闭包***的情况又有所不同。\n\n在另一个函数内部定义的函数会将包含函数(即外部函数)的活动对象添加到它的作用域链中。在匿名函数从createComparisonFunction()中被返回后，它的作用域链被初始化为包含createComparisonFunction()函数的活动对象和全局变量对象。这样匿名函数就可以访问在createComparisonFunction()中定义的所有变量。更为重要的是createComparisonFunction()函数在执行完毕后，其活动对象也不会被销毁，因为匿名函数的作用域链仍然在引用这个活动对象。换句话说，当createComparisonFunction()函数返回后，其执行环境的作用域链会被销毁，但它的活动对象仍然留在内存中；直到匿名函数被销毁后，createComparisonFunction()的活动对象才被销毁\n\n> [注意]由于闭包会携带包含它的函数的作用域链，因此会比其他函数占用更多的内存。过度使用闭包可能会导致内存占用过多，所以只在绝对必要时使用闭包。\n\n```javascript\n//创建函数\nvar compareNames = createComparisonFunction(\"name\");\n//调用函数\nvar result = compareNames({name:\"Nicholas\"},{name:\"Greg\"});\n//解除对匿名函数的引用(以便释放内存)\ncompareNames = null;\n/*首先，创建的比较函数被保存在变量compareNames中，\n而通过将compareNames设置为等于null，解除该函数的引用，\n就等于通知垃圾回收例程将其清除。随着匿名函数的作用域链被销毁，\n其他作用域(除了全局作用域)也都安全地销毁了。*/\n```\n\n![](http://images2015.cnblogs.com/blog/740839/201509/740839-20150914151358039-898068634.jpg)\n\n> 由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。   \n过度使用闭包可能会导致内存占用过多，   \nV8 javascript引擎会尝试回收被闭包占用的内存。\n\n##### 7.2.1 闭包和变量\n> 作用域链的这种配置机制引起了一个值得注意的副作用，即闭包只能取得包含函数中任何变量的最后一个值。    \n\n闭包保存的是**整个变量对象**，而不是**某个特殊的值**。\n\n```javascript\nfunction createFunctions (){\n    var result = new Array();\n    \n    for (var i=0;i<10;i++){\n        result[i] = function(){\n            return i;\n        };\n    }\n    return result;\n}\n```\n这个函数会返回一个值。结果是每个函数都返回10.   \n因为每个函数的作用域中都保存着createFunctions()函数的活动对象，\n所以他们引用的都是同一个变量i。\n当createFunctions()函数返回后，变量i的值是10，此时每个函数都引用着保存变量i\n的同一个变量对象，\n所以每个函数内部i的值都是10。\n\n![闭包](http://images.cnblogs.com/cnblogs_com/White-Quality/969463/o_%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_20170321125523.png)\n```\nScopes[2]\nClosure (createFunctions)\ni:10\n```\n我们可以通过创建另一个匿名函数强制让闭包的行为符合预期\n\n```\nfunction createFunctions(){\n    var result = new Array();\n    \n    for(var i = 0;i < 10; i++){\n        result[i] = function(num){\n           return function(){\n               return num;\n           } \n        }(i)\n    }\n    return result;\n}\n```\n![closure-2](http://images.cnblogs.com/cnblogs_com/White-Quality/969463/o_closure.png)\n\n改写后的createFunctions()函数，每个函数都会返回不同的索引值了。\n没有直接把闭包赋值给数组，而是定义了一个匿名函数，并将立即执行该匿名函数的结果赋值给数组。\n这里的匿名函数有一个参数num，也就是最终要返回的值。\n在调用每个匿名函数时，我们出入变量i。\n由于函数参数是按值传递的，所以就会将变量i的当前值赋值给参数num。\n而在这个匿名函数内部，又创建了一个访问num的闭包，\n这样一来，result数组中的每个函数都有自己num变量的副本，\n因此就可以返回各自不同的数值了。\n\n##### 7.2.2关于this对象\n> this对象是在运行时基于函数的执行环境绑定的：   \n在全局函数中：thiis等于window；\n而在函数被当做某个对象的方法调用时：this等于那个对象。   \n不过匿名函数的执行环境具有全局性，因此匿名函数的this对象通常也指向window；   \n在通过call()和apply()改变函数执行环境的情况下，this就会指向其他对象。\n\n```\nvar name = \"the window\";\nvar object = {\n  name:\"my object\",\n  getNameFunc:function(){\n    return function(){\n        return this.name\n    }\n  }\n};\n\nobject.getNameFunc()();   //\"the window\"\n```\n为什么匿名函数没有取得其包含作用域（或外部作用域）的this对象呢？\n\n> 前面提到过，每个函数再被调用的时候会自动取得两个特殊变量 `this` 和 `arguments`。内部函数再搜索这两个变量时，只会搜索到其活动对象为止，因此永远不可能直接访问外部函数中的这两个变量(详见下图)。\n\n![](http://images2015.cnblogs.com/blog/740839/201509/740839-20150914151358039-898068634.jpg)\n\n不过，把外部函数作用域中的this对象保存在一个闭包能够访问到的变量里面，就可以让闭包访问该对象了。\n```\nvar name = \"the window\";\nvar object = {\n  name:\"my object\",\n  getNameFunc:function(){\n    var that = this;\n    return function(){\n        return that.name\n    }\n  }\n};\n\nobject.getNameFunc()();   //\"my object\"\n```\n> tips: `this` 和 `arguments`也存在同样的问题，如果想访问作用域中的arguments对象，必须将对该对象的引用保存到另一个闭包能够访问的变量中。\n\n在几种特殊情况下，this的值可能会意外地改变\n```\nvar name = \"the window\";\nvar object = {\n  name:\"my object\",\n  getNameFunc:function(){\n    return this.name\n  }\n};\n\nobject.getNameFunc();  //'my object'\n(object.getNameFunc)();  //'my object'\n(object.getNameFunc = object.getNameFunc)(); //'the window'\n```\n> 上述代码：第一种方式跟平常一样调用了`object.getNameFunc()`,返回`my object`,因为`this.name`就是`object.name`。   \n第二种方式在调用这个方法前添加了括号，虽然添加了括号，就好像只是在引用一个函数，但this的值得到了维持，因为`object.getNameFunc`和`object.getNameFunc`定义是相同的。    \n第三种方式：先执行了一条赋值语句，然后在调用赋值后的结果。因为这个赋值表达式的值是函数本身，所以this的值得不到维持，结果返回`the window`。\n","slug":"函数表达式","published":1,"updated":"2018-11-29T07:54:12.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrx8002aj2s4us57jfmw","content":"<h2><span id=\"函数表达式\">函数表达式</span></h2>\n<ol>\n<li>函数声明</li>\n</ol>\n<blockquote>\n<p>函数声明语法</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funName</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//函数体</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>function是关键字，然后是函数名字，还有一个非标准的name属性，通过这个属性可以访问到函数指定的名字。这个属性的值永远等于跟在function关键字后面的标识符。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(funName.name); <span class=\"comment\">//funName可以使用arguments.callee自调用</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<blockquote>\n<p>重要的特性</p>\n</blockquote>\n<p>函数声明提升(function declaration hoisting)，意思是在执行代码时会先读取函数声明，<br>\n意味着，<strong>可以把函数声明放在调用它的语句后面</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">abc();  <span class=\"comment\">//\"1\"</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">abc</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>上述代码能够正常执行</p>\n<ol start=\"2\">\n<li>函数表达式</li>\n</ol>\n<blockquote>\n<p>函数声明的几种形式</p>\n</blockquote>\n<ul>\n<li>最常见的一种形式</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> funcName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//函数体</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>创建一个函数并将它赋值给变量funcName。这种情况下创建的函数为<strong>匿名函数(anonymous function)</strong>，因为function后面没有标识符。</p>\n<blockquote>\n<p>匿名函数有时候也叫拉姆达函数，匿名函数的name属性是空字符串。</p>\n</blockquote>\n<p>函数表达式与其他表达式一样，在使用前必须先赋值，要不能会报错。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">abc();</span><br><span class=\"line\"><span class=\"keyword\">var</span> abc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"1\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//报错：Uncaught TypeError: abc is not a function</span></span><br></pre></td></tr></table></figure>\n<p>理解函数提升的关键，就是理解函数声明与函数表达式之间的区别：</p>\n<blockquote>\n<p>思考题</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//不要这么做</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(isOk)&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'world'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>结果是什么？</p>\n<blockquote>\n<p>从表面上看，上述代码表示在isOk为true时，使用一个sayHello()的定义，否则，使用另一个sayHello()的定义<br>\n实际上，在ECMAScript中属于无效语法，javascript引擎会尝试修正错误，将其转换为合理的状态。<br>\n但是问题是各个浏览器尝试修正错误的做法并不一致。大多数浏览器会返回第一个声明，<br>\n因此使用这种方式很危险</p>\n</blockquote>\n<p>使用函数表达式就不会有这种问题</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//可以这样做</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sayHello;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(isOk)&#123;</span><br><span class=\"line\">    sayHello = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    sayHello = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'world!'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>能够创建函数再赋值给变量，也就能够把函数作为其他函数的返回值。</p>\n<h4><span id=\"71-递归\">7.1 递归</span></h4>\n<blockquote>\n<p>递归函数是在一个函数通过名字调用自身的情况下构成的</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">count</span>(<span class=\"params\">num</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(num &lt;= <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> num * count(num<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>上述代码是经典的阶乘函数<br>\n虽然这个函数从表面上看来没什么问题，但下面的代码却可能导致它出错</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> anotherCount = count;</span><br><span class=\"line\">count = <span class=\"literal\">null</span>;</span><br><span class=\"line\">alert(anotherCount(<span class=\"number\">4</span>))  <span class=\"comment\">// 报错:count is not a function</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>上面代码，先把函数count()保存在变量anotherCount中，然后将count变量设置为null，结果指向原始函数的引用只剩下一个。<br>\n但是在调用anotherCount()时，需要执行count()，而count已经不在是一个函数，所以导致出错&quot;count is not a function&quot;</p>\n</blockquote>\n<blockquote>\n<p>在这种情况下，使用arguments.callee可以解决这个问题<br>\narguments.callee是一个指向正在执行的函数的指针，因此可以用它来实现函数的递归调用</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">count</span>(<span class=\"params\">num</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(num &lt;= <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> num * <span class=\"built_in\">arguments</span>.callee(num<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>通过使用<code>arguments.callee</code>代替函数名，可以确保无论怎么样调用函数都不会出问题，<br>\n因此，在编写函数递归调用时，使用<code>arguments.callee</code>总比使用函数名更保险。</p>\n<blockquote>\n<p>不过在严格模式下，“严格模式”（strict mode）不能通过脚本访问<code>arguments.callee</code>，访问这个属性将会报错。<br>\n不过可以使用命名函数表达式来达成相同的结果。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'strict mode'</span>   <span class=\"comment\">//严格模式</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> count = (<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">num</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(num &lt;= <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> num * f(num<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>以上代码创建一个名为f()的命名函数表达式，然后将它赋值给变量count。即便是函数赋值给另一个变量<br>\n函数的名字f仍让有效，所以递归调用照样能正常完成。这种方式在严格模式和非严格模式都行的通。</p>\n</blockquote>\n<h4><span id=\"72-闭包\">7.2 闭包</span></h4>\n<h6><span id=\"概念\">概念</span></h6>\n<blockquote>\n<p>闭包是指有权访问另一个函数作用域中的变量的函数<br>\n创建闭包最常见的方式，就是在一个函数内部创建另一个函数。</p>\n</blockquote>\n<p>为什么还能够访问内部变量？</p>\n<blockquote>\n<p>是因为内部函数的作用域中包含父函数的作用域。</p>\n</blockquote>\n<h6><span id=\"作用域链\">作用域链</span></h6>\n<blockquote>\n<p>当某个函数被调用时，会创建一个执行环境（execution context）及相应的作用域链接。<br>\n–&gt;<br>\n然后使用arguments和其他命名参数的值来初始化函数的活动对象（activation object）。<br>\n–&gt;<br>\n但在作用域链中，外部函数的活动对象始终处于第二位，外部函数的外部函数的活动对象处于第三位，…<br>\n直至作为作用域链终点的全局执行环境。</p>\n</blockquote>\n<blockquote>\n<p>在函数执行过程中，为读取和写入变量的值，就需要在作用域链中查找变量。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">value1, value2</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(value1 &lt; value2)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(value1 &gt; value2)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>上述代码：</p>\n<ol>\n<li>定义compare()函数</li>\n<li>在全局作用域中调用它</li>\n<li>当调用compare()时，会创建一个包含arguments,value1,value2的活动对象</li>\n<li>全局执行环境的变量对象（包括result和compare）在compare()执行的作用域链中处于第二位。</li>\n</ol>\n<p>compare()函数执行时的作用域链关系图</p>\n<p><img src=\"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1489995952212&amp;di=de4fccb3e1965772e5ac835604c69019&amp;imgtype=0&amp;src=http%3A%2F%2Fimages2015.cnblogs.com%2Fblog%2F740839%2F201509%2F740839-20150914151133867-323877975.jpg\" alt=\"图片\"></p>\n<p>后台每个执行环境都有一个表示变量的对象----<strong>变量对象</strong>。<br>\n<strong>全局环境</strong>的变量对象始终存在，而像<code>compare()</code>函数这样的<strong>局部环境</strong>的变量对象<br>\n则只在<em>函数执行</em>的过程中存在。</p>\n<ul>\n<li>在创建<code>compare()</code>函数时，会创建一个预先包含全局变量对象的作用域链，这个作用域链被保存在内部的<code>[[Scope]]</code>属性中</li>\n<li>当调用<code>compare()</code>函数时，会为函数创建一个<em>执行环境</em>，然后通过复制函数的<code>[[Scope]]</code>属性中的对象构建起执行环境的作用域链接。</li>\n<li>此后，又有一个活动对象（在此作为变量对象使用）被创建并推入执行环境作用域链的前端</li>\n</ul>\n<blockquote>\n<p>对于上述例子而言，compare()函数的执行环境，其作用域链中包含两个变量：</p>\n</blockquote>\n<ol>\n<li>本地变量对象</li>\n<li>全局变量对象</li>\n</ol>\n<blockquote>\n<p>作用域链<em>本质上</em>是一个指向<em>变量对象</em>的<em>指针列表</em>，它只包含<strong>引用</strong>但不实际包含<strong>对象</strong>。</p>\n</blockquote>\n<p>在函数中访问一个变量时，就会从作用域链中搜索具有相应名字的变量。<br>\n一般来讲，当函数执行完毕后，局部活动对象机会被销毁，内存中仅保存全局作用域（全局执行环境的变量对象）<br>\n但是，<strong><em>闭包</em></strong>的情况又有所不同。</p>\n<p>在另一个函数内部定义的函数会将包含函数(即外部函数)的活动对象添加到它的作用域链中。在匿名函数从createComparisonFunction()中被返回后，它的作用域链被初始化为包含createComparisonFunction()函数的活动对象和全局变量对象。这样匿名函数就可以访问在createComparisonFunction()中定义的所有变量。更为重要的是createComparisonFunction()函数在执行完毕后，其活动对象也不会被销毁，因为匿名函数的作用域链仍然在引用这个活动对象。换句话说，当createComparisonFunction()函数返回后，其执行环境的作用域链会被销毁，但它的活动对象仍然留在内存中；直到匿名函数被销毁后，createComparisonFunction()的活动对象才被销毁</p>\n<blockquote>\n<p>[注意]由于闭包会携带包含它的函数的作用域链，因此会比其他函数占用更多的内存。过度使用闭包可能会导致内存占用过多，所以只在绝对必要时使用闭包。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建函数</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> compareNames = createComparisonFunction(<span class=\"string\">\"name\"</span>);</span><br><span class=\"line\"><span class=\"comment\">//调用函数</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> result = compareNames(&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Nicholas\"</span>&#125;,&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Greg\"</span>&#125;);</span><br><span class=\"line\"><span class=\"comment\">//解除对匿名函数的引用(以便释放内存)</span></span><br><span class=\"line\">compareNames = <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"comment\">/*首先，创建的比较函数被保存在变量compareNames中，</span></span><br><span class=\"line\"><span class=\"comment\">而通过将compareNames设置为等于null，解除该函数的引用，</span></span><br><span class=\"line\"><span class=\"comment\">就等于通知垃圾回收例程将其清除。随着匿名函数的作用域链被销毁，</span></span><br><span class=\"line\"><span class=\"comment\">其他作用域(除了全局作用域)也都安全地销毁了。*/</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"http://images2015.cnblogs.com/blog/740839/201509/740839-20150914151358039-898068634.jpg\" alt=\"\"></p>\n<blockquote>\n<p>由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。<br>\n过度使用闭包可能会导致内存占用过多，<br>\nV8 javascript引擎会尝试回收被闭包占用的内存。</p>\n</blockquote>\n<h5><span id=\"721-闭包和变量\">7.2.1 闭包和变量</span></h5>\n<blockquote>\n<p>作用域链的这种配置机制引起了一个值得注意的副作用，即闭包只能取得包含函数中任何变量的最后一个值。</p>\n</blockquote>\n<p>闭包保存的是<strong>整个变量对象</strong>，而不是<strong>某个特殊的值</strong>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createFunctions</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">10</span>;i++)&#123;</span><br><span class=\"line\">        result[i] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个函数会返回一个值。结果是每个函数都返回10.<br>\n因为每个函数的作用域中都保存着createFunctions()函数的活动对象，<br>\n所以他们引用的都是同一个变量i。<br>\n当createFunctions()函数返回后，变量i的值是10，此时每个函数都引用着保存变量i<br>\n的同一个变量对象，<br>\n所以每个函数内部i的值都是10。</p>\n<p><img src=\"http://images.cnblogs.com/cnblogs_com/White-Quality/969463/o_%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_20170321125523.png\" alt=\"闭包\"></p>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">Scopes</span><span class=\"selector-attr\">[2]</span></span><br><span class=\"line\"><span class=\"selector-tag\">Closure</span> (createFunctions)</span><br><span class=\"line\"><span class=\"selector-tag\">i</span><span class=\"selector-pseudo\">:10</span></span><br></pre></td></tr></table></figure>\n<p>我们可以通过创建另一个匿名函数强制让闭包的行为符合预期</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createFunctions</span><span class=\"params\">()</span>&#123;</span></span><br><span class=\"line\">    var result = new Array();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(var <span class=\"built_in\">i</span> = <span class=\"number\">0</span>;<span class=\"built_in\">i</span> &lt; <span class=\"number\">10</span>; <span class=\"built_in\">i</span>++)&#123;</span><br><span class=\"line\">        result[<span class=\"built_in\">i</span>] = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(num)</span>&#123;</span></span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span>&#123;</span></span><br><span class=\"line\">               <span class=\"keyword\">return</span> num;</span><br><span class=\"line\">           &#125; </span><br><span class=\"line\">        &#125;(<span class=\"built_in\">i</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://images.cnblogs.com/cnblogs_com/White-Quality/969463/o_closure.png\" alt=\"closure-2\"></p>\n<p>改写后的createFunctions()函数，每个函数都会返回不同的索引值了。<br>\n没有直接把闭包赋值给数组，而是定义了一个匿名函数，并将立即执行该匿名函数的结果赋值给数组。<br>\n这里的匿名函数有一个参数num，也就是最终要返回的值。<br>\n在调用每个匿名函数时，我们出入变量i。<br>\n由于函数参数是按值传递的，所以就会将变量i的当前值赋值给参数num。<br>\n而在这个匿名函数内部，又创建了一个访问num的闭包，<br>\n这样一来，result数组中的每个函数都有自己num变量的副本，<br>\n因此就可以返回各自不同的数值了。</p>\n<h5><span id=\"722关于this对象\">7.2.2关于this对象</span></h5>\n<blockquote>\n<p>this对象是在运行时基于函数的执行环境绑定的：<br>\n在全局函数中：thiis等于window；<br>\n而在函数被当做某个对象的方法调用时：this等于那个对象。<br>\n不过匿名函数的执行环境具有全局性，因此匿名函数的this对象通常也指向window；<br>\n在通过call()和apply()改变函数执行环境的情况下，this就会指向其他对象。</p>\n</blockquote>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"the window\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> object = &#123;</span><br><span class=\"line\">  name:<span class=\"string\">\"my object\"</span>,</span><br><span class=\"line\">  getNameFunc:<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">object.getNameFunc()();   <span class=\"comment\">//\"the window\"</span></span><br></pre></td></tr></table></figure>\n<p>为什么匿名函数没有取得其包含作用域（或外部作用域）的this对象呢？</p>\n<blockquote>\n<p>前面提到过，每个函数再被调用的时候会自动取得两个特殊变量 <code>this</code> 和 <code>arguments</code>。内部函数再搜索这两个变量时，只会搜索到其活动对象为止，因此永远不可能直接访问外部函数中的这两个变量(详见下图)。</p>\n</blockquote>\n<p><img src=\"http://images2015.cnblogs.com/blog/740839/201509/740839-20150914151358039-898068634.jpg\" alt=\"\"></p>\n<p>不过，把外部函数作用域中的this对象保存在一个闭包能够访问到的变量里面，就可以让闭包访问该对象了。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"the window\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> object = &#123;</span><br><span class=\"line\">  name:<span class=\"string\">\"my object\"</span>,</span><br><span class=\"line\">  getNameFunc:<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> that.name</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">object.getNameFunc()();   <span class=\"comment\">//\"my object\"</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>tips: <code>this</code> 和 <code>arguments</code>也存在同样的问题，如果想访问作用域中的arguments对象，必须将对该对象的引用保存到另一个闭包能够访问的变量中。</p>\n</blockquote>\n<p>在几种特殊情况下，this的值可能会意外地改变</p>\n<figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"the window\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"class\"><span class=\"keyword\">object</span> </span>= &#123;</span><br><span class=\"line\">  name:<span class=\"string\">\"my object\"</span>,</span><br><span class=\"line\">  getNameFunc:function()&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">object</span>.<span class=\"title\">getNameFunc</span>(<span class=\"params\"></span>)</span>;  <span class=\"comment\">//'my object'</span></span><br><span class=\"line\">(<span class=\"class\"><span class=\"keyword\">object</span>.<span class=\"title\">getNameFunc</span>)(<span class=\"params\"></span>)</span>;  <span class=\"comment\">//'my object'</span></span><br><span class=\"line\">(<span class=\"class\"><span class=\"keyword\">object</span>.<span class=\"title\">getNameFunc</span> </span>= <span class=\"class\"><span class=\"keyword\">object</span>.<span class=\"title\">getNameFunc</span>)(<span class=\"params\"></span>)</span>; <span class=\"comment\">//'the window'</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>上述代码：第一种方式跟平常一样调用了<code>object.getNameFunc()</code>,返回<code>my object</code>,因为<code>this.name</code>就是<code>object.name</code>。<br>\n第二种方式在调用这个方法前添加了括号，虽然添加了括号，就好像只是在引用一个函数，但this的值得到了维持，因为<code>object.getNameFunc</code>和<code>object.getNameFunc</code>定义是相同的。<br>\n第三种方式：先执行了一条赋值语句，然后在调用赋值后的结果。因为这个赋值表达式的值是函数本身，所以this的值得不到维持，结果返回<code>the window</code>。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h2>函数表达式</h2>\n<ol>\n<li>函数声明</li>\n</ol>\n<blockquote>\n<p>函数声明语法</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">funName</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//函数体</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>function是关键字，然后是函数名字，还有一个非标准的name属性，通过这个属性可以访问到函数指定的名字。这个属性的值永远等于跟在function关键字后面的标识符。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(funName.name); <span class=\"comment\">//funName可以使用arguments.callee自调用</span></span><br></pre></td></tr></table></figure>","more":"<blockquote>\n<p>重要的特性</p>\n</blockquote>\n<p>函数声明提升(function declaration hoisting)，意思是在执行代码时会先读取函数声明，<br>\n意味着，<strong>可以把函数声明放在调用它的语句后面</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">abc();  <span class=\"comment\">//\"1\"</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">abc</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>上述代码能够正常执行</p>\n<ol start=\"2\">\n<li>函数表达式</li>\n</ol>\n<blockquote>\n<p>函数声明的几种形式</p>\n</blockquote>\n<ul>\n<li>最常见的一种形式</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> funcName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//函数体</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>创建一个函数并将它赋值给变量funcName。这种情况下创建的函数为<strong>匿名函数(anonymous function)</strong>，因为function后面没有标识符。</p>\n<blockquote>\n<p>匿名函数有时候也叫拉姆达函数，匿名函数的name属性是空字符串。</p>\n</blockquote>\n<p>函数表达式与其他表达式一样，在使用前必须先赋值，要不能会报错。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">abc();</span><br><span class=\"line\"><span class=\"keyword\">var</span> abc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"1\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//报错：Uncaught TypeError: abc is not a function</span></span><br></pre></td></tr></table></figure>\n<p>理解函数提升的关键，就是理解函数声明与函数表达式之间的区别：</p>\n<blockquote>\n<p>思考题</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//不要这么做</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(isOk)&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'world'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>结果是什么？</p>\n<blockquote>\n<p>从表面上看，上述代码表示在isOk为true时，使用一个sayHello()的定义，否则，使用另一个sayHello()的定义<br>\n实际上，在ECMAScript中属于无效语法，javascript引擎会尝试修正错误，将其转换为合理的状态。<br>\n但是问题是各个浏览器尝试修正错误的做法并不一致。大多数浏览器会返回第一个声明，<br>\n因此使用这种方式很危险</p>\n</blockquote>\n<p>使用函数表达式就不会有这种问题</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//可以这样做</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sayHello;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(isOk)&#123;</span><br><span class=\"line\">    sayHello = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    sayHello = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'world!'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>能够创建函数再赋值给变量，也就能够把函数作为其他函数的返回值。</p>\n<h4>7.1 递归</h4>\n<blockquote>\n<p>递归函数是在一个函数通过名字调用自身的情况下构成的</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">count</span>(<span class=\"params\">num</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(num &lt;= <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> num * count(num<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>上述代码是经典的阶乘函数<br>\n虽然这个函数从表面上看来没什么问题，但下面的代码却可能导致它出错</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> anotherCount = count;</span><br><span class=\"line\">count = <span class=\"literal\">null</span>;</span><br><span class=\"line\">alert(anotherCount(<span class=\"number\">4</span>))  <span class=\"comment\">// 报错:count is not a function</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>上面代码，先把函数count()保存在变量anotherCount中，然后将count变量设置为null，结果指向原始函数的引用只剩下一个。<br>\n但是在调用anotherCount()时，需要执行count()，而count已经不在是一个函数，所以导致出错&quot;count is not a function&quot;</p>\n</blockquote>\n<blockquote>\n<p>在这种情况下，使用arguments.callee可以解决这个问题<br>\narguments.callee是一个指向正在执行的函数的指针，因此可以用它来实现函数的递归调用</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">count</span>(<span class=\"params\">num</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(num &lt;= <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> num * <span class=\"built_in\">arguments</span>.callee(num<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>通过使用<code>arguments.callee</code>代替函数名，可以确保无论怎么样调用函数都不会出问题，<br>\n因此，在编写函数递归调用时，使用<code>arguments.callee</code>总比使用函数名更保险。</p>\n<blockquote>\n<p>不过在严格模式下，“严格模式”（strict mode）不能通过脚本访问<code>arguments.callee</code>，访问这个属性将会报错。<br>\n不过可以使用命名函数表达式来达成相同的结果。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'strict mode'</span>   <span class=\"comment\">//严格模式</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> count = (<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">num</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(num &lt;= <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> num * f(num<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>以上代码创建一个名为f()的命名函数表达式，然后将它赋值给变量count。即便是函数赋值给另一个变量<br>\n函数的名字f仍让有效，所以递归调用照样能正常完成。这种方式在严格模式和非严格模式都行的通。</p>\n</blockquote>\n<h4>7.2 闭包</h4>\n<h6>概念</h6>\n<blockquote>\n<p>闭包是指有权访问另一个函数作用域中的变量的函数<br>\n创建闭包最常见的方式，就是在一个函数内部创建另一个函数。</p>\n</blockquote>\n<p>为什么还能够访问内部变量？</p>\n<blockquote>\n<p>是因为内部函数的作用域中包含父函数的作用域。</p>\n</blockquote>\n<h6>作用域链</h6>\n<blockquote>\n<p>当某个函数被调用时，会创建一个执行环境（execution context）及相应的作用域链接。<br>\n–&gt;<br>\n然后使用arguments和其他命名参数的值来初始化函数的活动对象（activation object）。<br>\n–&gt;<br>\n但在作用域链中，外部函数的活动对象始终处于第二位，外部函数的外部函数的活动对象处于第三位，…<br>\n直至作为作用域链终点的全局执行环境。</p>\n</blockquote>\n<blockquote>\n<p>在函数执行过程中，为读取和写入变量的值，就需要在作用域链中查找变量。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compare</span>(<span class=\"params\">value1, value2</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(value1 &lt; value2)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(value1 &gt; value2)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>上述代码：</p>\n<ol>\n<li>定义compare()函数</li>\n<li>在全局作用域中调用它</li>\n<li>当调用compare()时，会创建一个包含arguments,value1,value2的活动对象</li>\n<li>全局执行环境的变量对象（包括result和compare）在compare()执行的作用域链中处于第二位。</li>\n</ol>\n<p>compare()函数执行时的作用域链关系图</p>\n<p><img src=\"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1489995952212&amp;di=de4fccb3e1965772e5ac835604c69019&amp;imgtype=0&amp;src=http%3A%2F%2Fimages2015.cnblogs.com%2Fblog%2F740839%2F201509%2F740839-20150914151133867-323877975.jpg\" alt=\"图片\"></p>\n<p>后台每个执行环境都有一个表示变量的对象----<strong>变量对象</strong>。<br>\n<strong>全局环境</strong>的变量对象始终存在，而像<code>compare()</code>函数这样的<strong>局部环境</strong>的变量对象<br>\n则只在<em>函数执行</em>的过程中存在。</p>\n<ul>\n<li>在创建<code>compare()</code>函数时，会创建一个预先包含全局变量对象的作用域链，这个作用域链被保存在内部的<code>[[Scope]]</code>属性中</li>\n<li>当调用<code>compare()</code>函数时，会为函数创建一个<em>执行环境</em>，然后通过复制函数的<code>[[Scope]]</code>属性中的对象构建起执行环境的作用域链接。</li>\n<li>此后，又有一个活动对象（在此作为变量对象使用）被创建并推入执行环境作用域链的前端</li>\n</ul>\n<blockquote>\n<p>对于上述例子而言，compare()函数的执行环境，其作用域链中包含两个变量：</p>\n</blockquote>\n<ol>\n<li>本地变量对象</li>\n<li>全局变量对象</li>\n</ol>\n<blockquote>\n<p>作用域链<em>本质上</em>是一个指向<em>变量对象</em>的<em>指针列表</em>，它只包含<strong>引用</strong>但不实际包含<strong>对象</strong>。</p>\n</blockquote>\n<p>在函数中访问一个变量时，就会从作用域链中搜索具有相应名字的变量。<br>\n一般来讲，当函数执行完毕后，局部活动对象机会被销毁，内存中仅保存全局作用域（全局执行环境的变量对象）<br>\n但是，<strong><em>闭包</em></strong>的情况又有所不同。</p>\n<p>在另一个函数内部定义的函数会将包含函数(即外部函数)的活动对象添加到它的作用域链中。在匿名函数从createComparisonFunction()中被返回后，它的作用域链被初始化为包含createComparisonFunction()函数的活动对象和全局变量对象。这样匿名函数就可以访问在createComparisonFunction()中定义的所有变量。更为重要的是createComparisonFunction()函数在执行完毕后，其活动对象也不会被销毁，因为匿名函数的作用域链仍然在引用这个活动对象。换句话说，当createComparisonFunction()函数返回后，其执行环境的作用域链会被销毁，但它的活动对象仍然留在内存中；直到匿名函数被销毁后，createComparisonFunction()的活动对象才被销毁</p>\n<blockquote>\n<p>[注意]由于闭包会携带包含它的函数的作用域链，因此会比其他函数占用更多的内存。过度使用闭包可能会导致内存占用过多，所以只在绝对必要时使用闭包。</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建函数</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> compareNames = createComparisonFunction(<span class=\"string\">\"name\"</span>);</span><br><span class=\"line\"><span class=\"comment\">//调用函数</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> result = compareNames(&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Nicholas\"</span>&#125;,&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Greg\"</span>&#125;);</span><br><span class=\"line\"><span class=\"comment\">//解除对匿名函数的引用(以便释放内存)</span></span><br><span class=\"line\">compareNames = <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"comment\">/*首先，创建的比较函数被保存在变量compareNames中，</span></span><br><span class=\"line\"><span class=\"comment\">而通过将compareNames设置为等于null，解除该函数的引用，</span></span><br><span class=\"line\"><span class=\"comment\">就等于通知垃圾回收例程将其清除。随着匿名函数的作用域链被销毁，</span></span><br><span class=\"line\"><span class=\"comment\">其他作用域(除了全局作用域)也都安全地销毁了。*/</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"http://images2015.cnblogs.com/blog/740839/201509/740839-20150914151358039-898068634.jpg\" alt=\"\"></p>\n<blockquote>\n<p>由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。<br>\n过度使用闭包可能会导致内存占用过多，<br>\nV8 javascript引擎会尝试回收被闭包占用的内存。</p>\n</blockquote>\n<h5>7.2.1 闭包和变量</h5>\n<blockquote>\n<p>作用域链的这种配置机制引起了一个值得注意的副作用，即闭包只能取得包含函数中任何变量的最后一个值。</p>\n</blockquote>\n<p>闭包保存的是<strong>整个变量对象</strong>，而不是<strong>某个特殊的值</strong>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createFunctions</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;<span class=\"number\">10</span>;i++)&#123;</span><br><span class=\"line\">        result[i] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个函数会返回一个值。结果是每个函数都返回10.<br>\n因为每个函数的作用域中都保存着createFunctions()函数的活动对象，<br>\n所以他们引用的都是同一个变量i。<br>\n当createFunctions()函数返回后，变量i的值是10，此时每个函数都引用着保存变量i<br>\n的同一个变量对象，<br>\n所以每个函数内部i的值都是10。</p>\n<p><img src=\"http://images.cnblogs.com/cnblogs_com/White-Quality/969463/o_%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_20170321125523.png\" alt=\"闭包\"></p>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">Scopes</span><span class=\"selector-attr\">[2]</span></span><br><span class=\"line\"><span class=\"selector-tag\">Closure</span> (createFunctions)</span><br><span class=\"line\"><span class=\"selector-tag\">i</span><span class=\"selector-pseudo\">:10</span></span><br></pre></td></tr></table></figure>\n<p>我们可以通过创建另一个匿名函数强制让闭包的行为符合预期</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createFunctions</span><span class=\"params\">()</span>&#123;</span></span><br><span class=\"line\">    var result = new Array();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(var <span class=\"built_in\">i</span> = <span class=\"number\">0</span>;<span class=\"built_in\">i</span> &lt; <span class=\"number\">10</span>; <span class=\"built_in\">i</span>++)&#123;</span><br><span class=\"line\">        result[<span class=\"built_in\">i</span>] = <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">(num)</span>&#123;</span></span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span>&#123;</span></span><br><span class=\"line\">               <span class=\"keyword\">return</span> num;</span><br><span class=\"line\">           &#125; </span><br><span class=\"line\">        &#125;(<span class=\"built_in\">i</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://images.cnblogs.com/cnblogs_com/White-Quality/969463/o_closure.png\" alt=\"closure-2\"></p>\n<p>改写后的createFunctions()函数，每个函数都会返回不同的索引值了。<br>\n没有直接把闭包赋值给数组，而是定义了一个匿名函数，并将立即执行该匿名函数的结果赋值给数组。<br>\n这里的匿名函数有一个参数num，也就是最终要返回的值。<br>\n在调用每个匿名函数时，我们出入变量i。<br>\n由于函数参数是按值传递的，所以就会将变量i的当前值赋值给参数num。<br>\n而在这个匿名函数内部，又创建了一个访问num的闭包，<br>\n这样一来，result数组中的每个函数都有自己num变量的副本，<br>\n因此就可以返回各自不同的数值了。</p>\n<h5>7.2.2关于this对象</h5>\n<blockquote>\n<p>this对象是在运行时基于函数的执行环境绑定的：<br>\n在全局函数中：thiis等于window；<br>\n而在函数被当做某个对象的方法调用时：this等于那个对象。<br>\n不过匿名函数的执行环境具有全局性，因此匿名函数的this对象通常也指向window；<br>\n在通过call()和apply()改变函数执行环境的情况下，this就会指向其他对象。</p>\n</blockquote>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"the window\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> object = &#123;</span><br><span class=\"line\">  name:<span class=\"string\">\"my object\"</span>,</span><br><span class=\"line\">  getNameFunc:<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">object.getNameFunc()();   <span class=\"comment\">//\"the window\"</span></span><br></pre></td></tr></table></figure>\n<p>为什么匿名函数没有取得其包含作用域（或外部作用域）的this对象呢？</p>\n<blockquote>\n<p>前面提到过，每个函数再被调用的时候会自动取得两个特殊变量 <code>this</code> 和 <code>arguments</code>。内部函数再搜索这两个变量时，只会搜索到其活动对象为止，因此永远不可能直接访问外部函数中的这两个变量(详见下图)。</p>\n</blockquote>\n<p><img src=\"http://images2015.cnblogs.com/blog/740839/201509/740839-20150914151358039-898068634.jpg\" alt=\"\"></p>\n<p>不过，把外部函数作用域中的this对象保存在一个闭包能够访问到的变量里面，就可以让闭包访问该对象了。</p>\n<figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"the window\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> object = &#123;</span><br><span class=\"line\">  name:<span class=\"string\">\"my object\"</span>,</span><br><span class=\"line\">  getNameFunc:<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> that.name</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">object.getNameFunc()();   <span class=\"comment\">//\"my object\"</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>tips: <code>this</code> 和 <code>arguments</code>也存在同样的问题，如果想访问作用域中的arguments对象，必须将对该对象的引用保存到另一个闭包能够访问的变量中。</p>\n</blockquote>\n<p>在几种特殊情况下，this的值可能会意外地改变</p>\n<figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">\"the window\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"class\"><span class=\"keyword\">object</span> </span>= &#123;</span><br><span class=\"line\">  name:<span class=\"string\">\"my object\"</span>,</span><br><span class=\"line\">  getNameFunc:function()&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">object</span>.<span class=\"title\">getNameFunc</span>(<span class=\"params\"></span>)</span>;  <span class=\"comment\">//'my object'</span></span><br><span class=\"line\">(<span class=\"class\"><span class=\"keyword\">object</span>.<span class=\"title\">getNameFunc</span>)(<span class=\"params\"></span>)</span>;  <span class=\"comment\">//'my object'</span></span><br><span class=\"line\">(<span class=\"class\"><span class=\"keyword\">object</span>.<span class=\"title\">getNameFunc</span> </span>= <span class=\"class\"><span class=\"keyword\">object</span>.<span class=\"title\">getNameFunc</span>)(<span class=\"params\"></span>)</span>; <span class=\"comment\">//'the window'</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>上述代码：第一种方式跟平常一样调用了<code>object.getNameFunc()</code>,返回<code>my object</code>,因为<code>this.name</code>就是<code>object.name</code>。<br>\n第二种方式在调用这个方法前添加了括号，虽然添加了括号，就好像只是在引用一个函数，但this的值得到了维持，因为<code>object.getNameFunc</code>和<code>object.getNameFunc</code>定义是相同的。<br>\n第三种方式：先执行了一条赋值语句，然后在调用赋值后的结果。因为这个赋值表达式的值是函数本身，所以this的值得不到维持，结果返回<code>the window</code>。</p>\n</blockquote>"},{"title":"《看漫画，学Redux》[转载]","date":"2017-06-07T02:00:41.000Z","_content":"\n# 《看漫画，学 Redux》 —— A cartoon intro to Redux\n\n> 不写一行代码，轻松看懂 Redux 原理。 [原文](https://code-cartoons.com/a-cartoon-intro-to-redux-3afb775501a6)\n>\n> 如果你有任何疑惑，不妨在 [Issues](https://github.com/jasonslyvia/a-cartoon-intro-to-redux-cn/issues) 中提出。\n\nFlux 架构已然让人觉得有些迷惑，而比 Flux 更让人摸不着头脑的是 Flux 与 Redux 的区别。Redux 是一个基于 Flux 思想的新架构方式，本文将探讨它们的区别。\n\n如果你还没有看过[这篇关于 Flux 的文章](https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207)（译者注：也可以参考[这篇](https://www.zhihu.com/question/33864532/answer/57657275)），你应该先阅读一下。\n\n<!-- more -->\n\n## 为什么要改变 Flux？\n\nRedux 解决的问题和 Flux 一样，但 Redux 能做的还有更多。\n\n和 Flux 一样，Redux 让应用的状态变化变得更加可预测。如果你想改变应用的状态，就必须 dispatch 一个 action。你没有办法直接改变应用的状态，因为保存这些状态的东西（称为 store）只有 getter 而没有 setter。对于 Flux 和 Redux 来说，这些概念都是相似的。\n\n那么为什么要新设计一种架构呢？Redux 的创造者 Dan Abramov 发现了改进 Flux 架构的可能。他想要一个更好的开发者工具来调试 Flux 应用。他发现如果稍微对 Flux 架构进行一些调整，就可以开发出一款更好用的开发者工具，同时依然能享受 Flux 架构带给你的可预测性。\n\n确切的说，他想要的开发者工具包含了代码热替换（hot reload）和时间旅行（time travel）功能。然而要想在 Flux 架构上实现这些功能，确实有些麻烦。\n\n### 问题1：store 的代码无法被热替换，除非清空当前的状态\n\n在 Flux 中，store 包含了两样东西：\n\n 1. 改变状态的逻辑\n 2. 当前的状态\n\n在一个 store 中同时保存这两样东西将会导致代码热替换功能出现问题。当你热替换掉 store 的代码想要看看新的状态改变逻辑是否生效时，你就丢失了 store 中保存的当前状态。此外，你还把 store 与 Flux 架构中其它组件产生关系的事件系统搞乱了。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*L66K9uCQjjHmpAwT-a9C5Q.png)\n\n**解决方案**\n\n将这两样东西分开处理。让一个对象来保存状态，这个对象在热替换代码的时候不会受到影响。让另一个对象包含所有改变状态的逻辑，这个对象可以被热替换因为它不用关心任何保存状态相关的事情。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*nBsGCWmJTR-Zj7aXeIE8yg.png)\n\n### 问题2：每次触发 action 时状态对象都被直接改写了\n\n时间旅行调试法的特性是：你能掌握状态对象的每一次变化，这样的话，你就能轻松的跳回到这个对象之前的某个状态（想象一个撤销功能）。\n\n要实现这样的功能，每次状态改变之后，你都需要把旧的状态保存在一个数组中。但是由于 JavaScript 的对象引用特性，简单的把一个对象放进数组中并不能实现我们需要的功能。这样做不能创建一个快照（snapshot），而只是创建了一个新的指针指向同一个对象。\n\n所以要想实现时间旅行特性，每一个状态改变的版本都需要保存在不同的 JavaScript 对象中，这样你才不会不小心改变了某个历史版本的状态。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*4zODv5vgvKsi6Ts7TihsoA.png)\n\n**解决方案**\n\n当一个 action 需要 store 响应时，不要直接修改 store 中的状态，而是将状态拷贝一份并在这份拷贝的状态上做出修改。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*wLRhZ0wtI0duLsigdxL1CA.png)\n\n###问题3：没有合适的位置引入第三方插件\n\n当你在写一些调试性工具时，你希望它们能够更加通用。一个使用该工具的用户应该可以直接引入这个工具而不需要做额外的包装或桥接。\n\n要实现这样的特性，Flux 架构需要一个扩展点。\n\n一个简单的例子就是日志。比如说你希望 console.log() 每一个触发的 action 同时 console.log() 这个 action 被响应完成后的状态。在 Flux 中，你只能订阅（subscribe） dispatcher 的更新和每一个 store 的变动。但是这样就侵入了业务代码，这样的日志功能不是一个第三方插件能够轻易实现的。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*MG736zGtLMBbSkhwu4D3cA.png)\n\n**解决方案**\n\n将这个架构的部分功能包装进其他的对象中将使得我们的需求变得更容易实现。这些「其他对象」在架构原有的功能基础之上添加了自己的功能。你可以把这种扩展点看做是一个增强器（enhancers）或者高阶对象（higher order objects），亦或者中间件（middleware）。\n\n此外，使用一个树形结构来组织所有改变状态的逻辑，这样当状态发生改变的时候 store 只会触发一个事件来通知视图层（view），而这一个事件会被整棵树中的所有逻辑处理（译者注：「处理」不代表一定会改变状态，这些改变状态的逻辑本质上是函数，函数内部会根据 action 的类型等来确定是否对状态进行改变）。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*5JaZSc3Jsn9PJY7daEDVDA.png)\n\n*注意：就上述这些问题和解决方案来说，我主要在关注开发者工具这一使用场景。实际上，对 Flux 做出的这些改变在其他场景中也非常有帮助。在上述三点之外，Flux 和 Redux 还有更多的不同点。比如，相比于 Flux，Redux 精简了整个架构的冗余代码，并且复用 store 的逻辑变得更加简单。这里有一个 [Redux 优点的列表](http://stackoverflow.com/a/32920459)可供参考。\n\n那么让我们来看看 Redux 是怎么让这些特性变为现实的。\n\n## 新的角色\n\n从 Flux 演进到 Redux，整个架构中的角色发生了些许的变化。\n\n### Action creators\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*Uljrrh4Z7UiUwk8AjUO9PA.png)\n\nRedux 保留了 Flux 中 action creator 的概念。每当你想要改变应用中的状态时，你就要 dispatch 一个 action，这也是唯一改变状态的方法。\n\n就像我在[这篇关于 Flux 的文章](https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207)中提到的一样，我把 action creator 看做是一个报务员（负责发电报的人，telegraph operator），你找到 action creator 告诉他你大致上想要传达什么信息，action creator 则会把这些信息格式化为一种标准的格式，以便系统中的其他部分能够理解。\n\n与 Flux 不同的是，Redux 中的 action creator 不会直接把 action 发送给 dispatcher，而是返回一个格式化好的 JavaScript 对象。\n\n### The store\n\n我把 Flux 中 store 的那一套机制描述为一种控制过度的官僚体系。你不能简单直接的修改状态，而是要求所有的状态改变都必须由 store 亲自产生，还必须要经历 action 分发那种套路。在 Redux 中，store 依然是这么的充满控制欲和官僚主义，但是又有些不一样。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*Gztc7THzxzOgJmGvJ95IQA.png)\n\n在 Flux 中，你可以拥有多个 store，每一个 store 都有自己的统治权。每个 store 都保存着自己对应的那部分状态，以及所有修改这些状态的逻辑。\n\n而 Redux 中的 store 更喜欢将权力下放，事实上不得不这么做。因为在 Redux 中，你只能有一个 store……所以如果你打算像 Flux 那样让 store 完全独立处理自己的事情，那么在 Redux 中，store 里的工作量将变得非常大。\n\n因此，Redux 中的 store 首先会保存整个应用的所有状态，然后将「判断哪一部分状态需要改变」的任务分配下去。而以根 reducer（root reducer）为首的 reducer 们将会承担这个任务。\n\n你可能发现这里好像没有 dispatcher 什么事。是的，虽然看起来有点儿越权，但 Redux 里的 store 已经完全接管了 dispatcher 相关的工作。\n\n### The reducers\n\n当 store 需要知道一个 action 触发后状态需要怎么改变时，他会去询问 reducer。根 reducer 会根据状态对象的键（key）将整个状态树进行拆分，然后将拆分后的每一块子状态传到知道该怎么对这块状态进行响应的子 reducer 那里处理。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*Vocy_6Gl9PbFlCIJsE9r3A.png)\n\n我把 reducers 看做是对复印情有独钟的白领们。他们不希望把任何事搞砸，因此他们不会修改任何传递给他们的文件。取而代之的是，他们会对这些文件进行复印，然后在复印件上进行修改。（译者注：当然，当这些修改后的复印件定稿后，他们也不会再去修改这些复印件。）\n\n这是 Redux 的核心思想之一。不直接修改整个应用的状态树，而是将状态树的每一部分进行拷贝并修改拷贝后的部分，然后将这些部分重新组合成一颗新的状态树。\n\n子 reducers 会把他们创建的副本传回给根 reducer，而根 reducer 会把这些副本组合起来形成一颗新的状态树。最后根 reducer 将新的状态树传回给 store，store 再将新的状态树设为最终的状态。\n\n如果你有一个小型应用，你可能只有一个 reducer 对整个状态树进行拷贝并作出修改。又或者你有一个超大的应用，你可能会有若干个 reducers 对整个状态树进行修改。这也是 Flux 和 Redux 的另一处区别。在 Flux 中，store 并不需要与其他 store 产生关联，而且 store 的结构是扁平的。而在 Redux 中，reducers 是有层级结构的。这种层级结构可以有若干层，就像组件的层级结构那样。\n\n### The views: 智能组件（smart components）和木偶组件(dumb components)\n\nFlux 拥有控制型视图（controller views） 和常规型视图（regular views）。控制型视图就像是一个经理一样，管理着 store 和子视图（child views）之间的通信。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*TgCkFcjlD9SxSrMvVX3DrA.png)\n\n在 Redux 中，也有一个类似的概念：智能组件和木偶组件。（译者注：在最新的 Redux 文档中，它们分别叫做容器型组件 Container component 和展示型组件 Presentational component）智能组件的职责就像经理一样，但是比起 Flux 中的角色，Redux 对经理的职责有了更多的定义：\n\n - 智能组件负责所有的 action 相关的工作。如果智能组件里包含的一个木偶组件需要触发一个 action，智能组件会通过 props 传一个 function 给木偶组件，而木偶组件可以在需要触发 action 时调用这个 function。\n - 智能组件不定义 CSS 样式。\n - 智能组件几乎不会产生自己的 DOM 节点，他的工作是组织若干的木偶组件，由木偶组件来生成最终的 DOM 节点。\n\n木偶组件不会直接依赖 action（译者注：即不会在木偶组件里 `require` action 相关的文件），因为所有的 action 都会当做 props 传下来。这意味着木偶组件可以被任何一个逻辑不同的 App 拿去使用。同时木偶组件也需要有一定的样式来让自己变得好看一些（当然你可以让木偶组件接受某些 props 作为设置样式的变量）。\n\n### 视图层绑定\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*D1RcVrMV2rp6AH9hk5xZ8g.png)\n\n要把 store 绑定到视图上，Redux 还需要一点帮助。如果你在使用 React，那么你需要使用 react-redux。\n\n视图绑定工作有点像为组件树服务的 IT 部门。IT 部门确保所有的组件都正确的绑定到 store 上，并处理各种技术上的细节，以确保余下层级的组件对绑定相关的操作毫无感知。\n\n视图层绑定引入了三个概念：\n\n 1. `<Provider>` 组件： 这个组件需要包裹在整个组件树的最外层。这个组件让根组件的所有子孙组件能够轻松的使用 `connect()` 方法绑定 store。\n 2. `connect()`：这是 `react-redux` 提供的一个方法。如果一个组件想要响应状态的变化，就把自己作为参数传给 connect() 的结果（译者注：connect() 返回的依然是一个函数），connect() 方法会处理与 store 绑定的细节，并通过 selector 确定该绑定 store 中哪一部分的数据。\n 3. `selector`：这是你自己编写的一个函数。这个函数声明了你的组件需要整个 store 中的哪一部分数据作为自己的 props。\n\n### 根组件\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*JXPeiNP-it60-QYKb-p2eQ.png)\n\n所有的 React 应用都存在一个根组件（root component）。他其实就是整个组件树最外层的那个组件，但是在 Redux 中，根组件还要承担额外的任务。\n\n根组件承担的角色有点像企业中的高管，他将整个团队整合到一起来完成某项任务。他会创建 store，并告诉 store 使用哪些 reducers，并最终完成视图层的绑定。\n\n当完成整个应用的初始化工作后，根组件的就不再插手整个应用的运行过程了。每一次重新渲染（re-render）都没有根组件什么事，这些活儿都由根组件下面的子组件完成，当然也少不了视图层绑定的功劳。\n\n## Redux 完成的运行流程\n\n让我们看看上述各个部分是怎样组合成一个可以运行的应用的。\n\n### 配置环节\n\n应用中的不同部分需要在配置环节中整合到一起。\n\n(1) **准备好 store。**根组件会创建 store，并通过 createStore(reducer) 方法告诉 store 该使用哪个根 reducer。与此同时，根 reducer 也通过 combineReducers() 方法组建了一只向自己汇报的 reducer 团队。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*8_fU31-jNQnQ0dp-wplm5w.png)\n\n(2) **设置 store 和组件之间的通信。**根组件将它所有的子组件包裹在 `<Provider>` 组件中，并建立了 Provider 与 store 之间的联系。\n\nProvider 本质上创建了一个用于更新视图组件的网络。那些智能组件通过 connect() 方法连入这个网络，以此确保他们能够获取到状态的更新。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*NYMutQLW8TcEgbO8VNeqHA.png)\n\n(3) **准备好 action callback。**为了让木偶组件更好的处理 action，智能组件可以用 `bindActionCreators()` 方法来创建 action callback。这样做之后，智能组件就能给木偶组件传入一个回调（callback）。对应的 action 会在木偶组件调用这个回调时被自动 dispatch。（译者注：使用 bindActionCreators() 使得木偶组件无需关心 action 的 type 等信息，只用调用 props 中的某个方法传入需要的参数作为 action 的 payload 即可）\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*aVoD3gGddKUy3VCxwylthQ.png)\n\n### 数据流\n\n现在我们的应用已经配置完成，用户可以开始操作了。让我们触发一个 action，看看数据是怎样流动的。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*GNDs7SY53lEhp7mX8V25lw.png)\n\n(1) 视图发出了一个 action，action creator 将这个 action 格式化并返回。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*p4EkWE_8upZ97Z0IapKDcQ.png)\n\n(2) 这个 action 要么被自动 dispatch（如果我们在配置阶段使用了 bindActionCreators()），要么由视图层手动 dispatch。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*zmFp3bmDq7b6Bvlo8Ineag.png)\n\n(3) store 接受到这个 action 后，将当前的状态树和这个 action 传给根 reducer。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*zrsSoAAyf4pqTMHiA6P8Ww.png)\n\n(4) 根 reducer 将整个状态树切分成一个个小块，然后将某一个小块分发给知道怎么处理这部分内容的子 reducer。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*-S_dYe6BoQBgwSRpF7Hriw.png)\n\n(5) 子 reducer 将传入的一小块状态树进行拷贝，然后在副本上进行修改，并最终将修改后的副本返回根 reducer。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*_R-rGNfKr2Xu2FlXNZNPJg.png)\n\n(6) 当所有的子 reducer 返回他们修改的副本之后，根 reducer 将这些部分再次组合起来形成一颗新的状态树。然后根 reducer 将这个新的状态树交还给 store，store 再把自己的状态置为这个最新的状态树。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*bUMekI8QlEfFxSBCuVuIkw.png)\n\n(7) store 告诉视图层绑定：「状态更新啦」\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*x6vBvUlFJktJqty56jr0QQ.png)\n\n(8) 视图层绑定让 store 把更新的状态传过来\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*qGatznV4QujuxGe49YfX5A.png)\n\n(9) 视图层绑定触发了一个重新渲染的操作（re-render）\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*Je2mow8mjYLngXreGGlIEg.png)\n\n这就是我所理解的 Redux，希望对你有所帮助。\n\n## 更多资源\n\n - [Redux 官方文档](http://rackt.org/redux/index.html)\n - [Redux 官方文档中文版](https://github.com/camsong/redux-in-chinese)\n - [The Evolution of Flux Frameworks](https://medium.com/@dan_abramov/the-evolution-of-flux-frameworks-6c16ad26bb31)\n - [Smart and Dumb Components](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)\n - [The upsides of using Redux](http://stackoverflow.com/a/32920459)\n - [The downsides of using Redux](http://stackoverflow.com/a/32916602)\n - [如何评价数据流管理架构 Redux?](https://www.zhihu.com/question/38591713/answer/77634014)","source":"_posts/cartoon Redux.md","raw":"\n---\ntitle: 《看漫画，学Redux》[转载]\ndate: 2017-06-07 10:00:41\ntags: [javascript, redux]\n---\n\n# 《看漫画，学 Redux》 —— A cartoon intro to Redux\n\n> 不写一行代码，轻松看懂 Redux 原理。 [原文](https://code-cartoons.com/a-cartoon-intro-to-redux-3afb775501a6)\n>\n> 如果你有任何疑惑，不妨在 [Issues](https://github.com/jasonslyvia/a-cartoon-intro-to-redux-cn/issues) 中提出。\n\nFlux 架构已然让人觉得有些迷惑，而比 Flux 更让人摸不着头脑的是 Flux 与 Redux 的区别。Redux 是一个基于 Flux 思想的新架构方式，本文将探讨它们的区别。\n\n如果你还没有看过[这篇关于 Flux 的文章](https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207)（译者注：也可以参考[这篇](https://www.zhihu.com/question/33864532/answer/57657275)），你应该先阅读一下。\n\n<!-- more -->\n\n## 为什么要改变 Flux？\n\nRedux 解决的问题和 Flux 一样，但 Redux 能做的还有更多。\n\n和 Flux 一样，Redux 让应用的状态变化变得更加可预测。如果你想改变应用的状态，就必须 dispatch 一个 action。你没有办法直接改变应用的状态，因为保存这些状态的东西（称为 store）只有 getter 而没有 setter。对于 Flux 和 Redux 来说，这些概念都是相似的。\n\n那么为什么要新设计一种架构呢？Redux 的创造者 Dan Abramov 发现了改进 Flux 架构的可能。他想要一个更好的开发者工具来调试 Flux 应用。他发现如果稍微对 Flux 架构进行一些调整，就可以开发出一款更好用的开发者工具，同时依然能享受 Flux 架构带给你的可预测性。\n\n确切的说，他想要的开发者工具包含了代码热替换（hot reload）和时间旅行（time travel）功能。然而要想在 Flux 架构上实现这些功能，确实有些麻烦。\n\n### 问题1：store 的代码无法被热替换，除非清空当前的状态\n\n在 Flux 中，store 包含了两样东西：\n\n 1. 改变状态的逻辑\n 2. 当前的状态\n\n在一个 store 中同时保存这两样东西将会导致代码热替换功能出现问题。当你热替换掉 store 的代码想要看看新的状态改变逻辑是否生效时，你就丢失了 store 中保存的当前状态。此外，你还把 store 与 Flux 架构中其它组件产生关系的事件系统搞乱了。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*L66K9uCQjjHmpAwT-a9C5Q.png)\n\n**解决方案**\n\n将这两样东西分开处理。让一个对象来保存状态，这个对象在热替换代码的时候不会受到影响。让另一个对象包含所有改变状态的逻辑，这个对象可以被热替换因为它不用关心任何保存状态相关的事情。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*nBsGCWmJTR-Zj7aXeIE8yg.png)\n\n### 问题2：每次触发 action 时状态对象都被直接改写了\n\n时间旅行调试法的特性是：你能掌握状态对象的每一次变化，这样的话，你就能轻松的跳回到这个对象之前的某个状态（想象一个撤销功能）。\n\n要实现这样的功能，每次状态改变之后，你都需要把旧的状态保存在一个数组中。但是由于 JavaScript 的对象引用特性，简单的把一个对象放进数组中并不能实现我们需要的功能。这样做不能创建一个快照（snapshot），而只是创建了一个新的指针指向同一个对象。\n\n所以要想实现时间旅行特性，每一个状态改变的版本都需要保存在不同的 JavaScript 对象中，这样你才不会不小心改变了某个历史版本的状态。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*4zODv5vgvKsi6Ts7TihsoA.png)\n\n**解决方案**\n\n当一个 action 需要 store 响应时，不要直接修改 store 中的状态，而是将状态拷贝一份并在这份拷贝的状态上做出修改。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*wLRhZ0wtI0duLsigdxL1CA.png)\n\n###问题3：没有合适的位置引入第三方插件\n\n当你在写一些调试性工具时，你希望它们能够更加通用。一个使用该工具的用户应该可以直接引入这个工具而不需要做额外的包装或桥接。\n\n要实现这样的特性，Flux 架构需要一个扩展点。\n\n一个简单的例子就是日志。比如说你希望 console.log() 每一个触发的 action 同时 console.log() 这个 action 被响应完成后的状态。在 Flux 中，你只能订阅（subscribe） dispatcher 的更新和每一个 store 的变动。但是这样就侵入了业务代码，这样的日志功能不是一个第三方插件能够轻易实现的。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*MG736zGtLMBbSkhwu4D3cA.png)\n\n**解决方案**\n\n将这个架构的部分功能包装进其他的对象中将使得我们的需求变得更容易实现。这些「其他对象」在架构原有的功能基础之上添加了自己的功能。你可以把这种扩展点看做是一个增强器（enhancers）或者高阶对象（higher order objects），亦或者中间件（middleware）。\n\n此外，使用一个树形结构来组织所有改变状态的逻辑，这样当状态发生改变的时候 store 只会触发一个事件来通知视图层（view），而这一个事件会被整棵树中的所有逻辑处理（译者注：「处理」不代表一定会改变状态，这些改变状态的逻辑本质上是函数，函数内部会根据 action 的类型等来确定是否对状态进行改变）。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*5JaZSc3Jsn9PJY7daEDVDA.png)\n\n*注意：就上述这些问题和解决方案来说，我主要在关注开发者工具这一使用场景。实际上，对 Flux 做出的这些改变在其他场景中也非常有帮助。在上述三点之外，Flux 和 Redux 还有更多的不同点。比如，相比于 Flux，Redux 精简了整个架构的冗余代码，并且复用 store 的逻辑变得更加简单。这里有一个 [Redux 优点的列表](http://stackoverflow.com/a/32920459)可供参考。\n\n那么让我们来看看 Redux 是怎么让这些特性变为现实的。\n\n## 新的角色\n\n从 Flux 演进到 Redux，整个架构中的角色发生了些许的变化。\n\n### Action creators\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*Uljrrh4Z7UiUwk8AjUO9PA.png)\n\nRedux 保留了 Flux 中 action creator 的概念。每当你想要改变应用中的状态时，你就要 dispatch 一个 action，这也是唯一改变状态的方法。\n\n就像我在[这篇关于 Flux 的文章](https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207)中提到的一样，我把 action creator 看做是一个报务员（负责发电报的人，telegraph operator），你找到 action creator 告诉他你大致上想要传达什么信息，action creator 则会把这些信息格式化为一种标准的格式，以便系统中的其他部分能够理解。\n\n与 Flux 不同的是，Redux 中的 action creator 不会直接把 action 发送给 dispatcher，而是返回一个格式化好的 JavaScript 对象。\n\n### The store\n\n我把 Flux 中 store 的那一套机制描述为一种控制过度的官僚体系。你不能简单直接的修改状态，而是要求所有的状态改变都必须由 store 亲自产生，还必须要经历 action 分发那种套路。在 Redux 中，store 依然是这么的充满控制欲和官僚主义，但是又有些不一样。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*Gztc7THzxzOgJmGvJ95IQA.png)\n\n在 Flux 中，你可以拥有多个 store，每一个 store 都有自己的统治权。每个 store 都保存着自己对应的那部分状态，以及所有修改这些状态的逻辑。\n\n而 Redux 中的 store 更喜欢将权力下放，事实上不得不这么做。因为在 Redux 中，你只能有一个 store……所以如果你打算像 Flux 那样让 store 完全独立处理自己的事情，那么在 Redux 中，store 里的工作量将变得非常大。\n\n因此，Redux 中的 store 首先会保存整个应用的所有状态，然后将「判断哪一部分状态需要改变」的任务分配下去。而以根 reducer（root reducer）为首的 reducer 们将会承担这个任务。\n\n你可能发现这里好像没有 dispatcher 什么事。是的，虽然看起来有点儿越权，但 Redux 里的 store 已经完全接管了 dispatcher 相关的工作。\n\n### The reducers\n\n当 store 需要知道一个 action 触发后状态需要怎么改变时，他会去询问 reducer。根 reducer 会根据状态对象的键（key）将整个状态树进行拆分，然后将拆分后的每一块子状态传到知道该怎么对这块状态进行响应的子 reducer 那里处理。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*Vocy_6Gl9PbFlCIJsE9r3A.png)\n\n我把 reducers 看做是对复印情有独钟的白领们。他们不希望把任何事搞砸，因此他们不会修改任何传递给他们的文件。取而代之的是，他们会对这些文件进行复印，然后在复印件上进行修改。（译者注：当然，当这些修改后的复印件定稿后，他们也不会再去修改这些复印件。）\n\n这是 Redux 的核心思想之一。不直接修改整个应用的状态树，而是将状态树的每一部分进行拷贝并修改拷贝后的部分，然后将这些部分重新组合成一颗新的状态树。\n\n子 reducers 会把他们创建的副本传回给根 reducer，而根 reducer 会把这些副本组合起来形成一颗新的状态树。最后根 reducer 将新的状态树传回给 store，store 再将新的状态树设为最终的状态。\n\n如果你有一个小型应用，你可能只有一个 reducer 对整个状态树进行拷贝并作出修改。又或者你有一个超大的应用，你可能会有若干个 reducers 对整个状态树进行修改。这也是 Flux 和 Redux 的另一处区别。在 Flux 中，store 并不需要与其他 store 产生关联，而且 store 的结构是扁平的。而在 Redux 中，reducers 是有层级结构的。这种层级结构可以有若干层，就像组件的层级结构那样。\n\n### The views: 智能组件（smart components）和木偶组件(dumb components)\n\nFlux 拥有控制型视图（controller views） 和常规型视图（regular views）。控制型视图就像是一个经理一样，管理着 store 和子视图（child views）之间的通信。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*TgCkFcjlD9SxSrMvVX3DrA.png)\n\n在 Redux 中，也有一个类似的概念：智能组件和木偶组件。（译者注：在最新的 Redux 文档中，它们分别叫做容器型组件 Container component 和展示型组件 Presentational component）智能组件的职责就像经理一样，但是比起 Flux 中的角色，Redux 对经理的职责有了更多的定义：\n\n - 智能组件负责所有的 action 相关的工作。如果智能组件里包含的一个木偶组件需要触发一个 action，智能组件会通过 props 传一个 function 给木偶组件，而木偶组件可以在需要触发 action 时调用这个 function。\n - 智能组件不定义 CSS 样式。\n - 智能组件几乎不会产生自己的 DOM 节点，他的工作是组织若干的木偶组件，由木偶组件来生成最终的 DOM 节点。\n\n木偶组件不会直接依赖 action（译者注：即不会在木偶组件里 `require` action 相关的文件），因为所有的 action 都会当做 props 传下来。这意味着木偶组件可以被任何一个逻辑不同的 App 拿去使用。同时木偶组件也需要有一定的样式来让自己变得好看一些（当然你可以让木偶组件接受某些 props 作为设置样式的变量）。\n\n### 视图层绑定\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*D1RcVrMV2rp6AH9hk5xZ8g.png)\n\n要把 store 绑定到视图上，Redux 还需要一点帮助。如果你在使用 React，那么你需要使用 react-redux。\n\n视图绑定工作有点像为组件树服务的 IT 部门。IT 部门确保所有的组件都正确的绑定到 store 上，并处理各种技术上的细节，以确保余下层级的组件对绑定相关的操作毫无感知。\n\n视图层绑定引入了三个概念：\n\n 1. `<Provider>` 组件： 这个组件需要包裹在整个组件树的最外层。这个组件让根组件的所有子孙组件能够轻松的使用 `connect()` 方法绑定 store。\n 2. `connect()`：这是 `react-redux` 提供的一个方法。如果一个组件想要响应状态的变化，就把自己作为参数传给 connect() 的结果（译者注：connect() 返回的依然是一个函数），connect() 方法会处理与 store 绑定的细节，并通过 selector 确定该绑定 store 中哪一部分的数据。\n 3. `selector`：这是你自己编写的一个函数。这个函数声明了你的组件需要整个 store 中的哪一部分数据作为自己的 props。\n\n### 根组件\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1200/1*JXPeiNP-it60-QYKb-p2eQ.png)\n\n所有的 React 应用都存在一个根组件（root component）。他其实就是整个组件树最外层的那个组件，但是在 Redux 中，根组件还要承担额外的任务。\n\n根组件承担的角色有点像企业中的高管，他将整个团队整合到一起来完成某项任务。他会创建 store，并告诉 store 使用哪些 reducers，并最终完成视图层的绑定。\n\n当完成整个应用的初始化工作后，根组件的就不再插手整个应用的运行过程了。每一次重新渲染（re-render）都没有根组件什么事，这些活儿都由根组件下面的子组件完成，当然也少不了视图层绑定的功劳。\n\n## Redux 完成的运行流程\n\n让我们看看上述各个部分是怎样组合成一个可以运行的应用的。\n\n### 配置环节\n\n应用中的不同部分需要在配置环节中整合到一起。\n\n(1) **准备好 store。**根组件会创建 store，并通过 createStore(reducer) 方法告诉 store 该使用哪个根 reducer。与此同时，根 reducer 也通过 combineReducers() 方法组建了一只向自己汇报的 reducer 团队。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*8_fU31-jNQnQ0dp-wplm5w.png)\n\n(2) **设置 store 和组件之间的通信。**根组件将它所有的子组件包裹在 `<Provider>` 组件中，并建立了 Provider 与 store 之间的联系。\n\nProvider 本质上创建了一个用于更新视图组件的网络。那些智能组件通过 connect() 方法连入这个网络，以此确保他们能够获取到状态的更新。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*NYMutQLW8TcEgbO8VNeqHA.png)\n\n(3) **准备好 action callback。**为了让木偶组件更好的处理 action，智能组件可以用 `bindActionCreators()` 方法来创建 action callback。这样做之后，智能组件就能给木偶组件传入一个回调（callback）。对应的 action 会在木偶组件调用这个回调时被自动 dispatch。（译者注：使用 bindActionCreators() 使得木偶组件无需关心 action 的 type 等信息，只用调用 props 中的某个方法传入需要的参数作为 action 的 payload 即可）\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*aVoD3gGddKUy3VCxwylthQ.png)\n\n### 数据流\n\n现在我们的应用已经配置完成，用户可以开始操作了。让我们触发一个 action，看看数据是怎样流动的。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*GNDs7SY53lEhp7mX8V25lw.png)\n\n(1) 视图发出了一个 action，action creator 将这个 action 格式化并返回。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*p4EkWE_8upZ97Z0IapKDcQ.png)\n\n(2) 这个 action 要么被自动 dispatch（如果我们在配置阶段使用了 bindActionCreators()），要么由视图层手动 dispatch。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*zmFp3bmDq7b6Bvlo8Ineag.png)\n\n(3) store 接受到这个 action 后，将当前的状态树和这个 action 传给根 reducer。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*zrsSoAAyf4pqTMHiA6P8Ww.png)\n\n(4) 根 reducer 将整个状态树切分成一个个小块，然后将某一个小块分发给知道怎么处理这部分内容的子 reducer。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*-S_dYe6BoQBgwSRpF7Hriw.png)\n\n(5) 子 reducer 将传入的一小块状态树进行拷贝，然后在副本上进行修改，并最终将修改后的副本返回根 reducer。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*_R-rGNfKr2Xu2FlXNZNPJg.png)\n\n(6) 当所有的子 reducer 返回他们修改的副本之后，根 reducer 将这些部分再次组合起来形成一颗新的状态树。然后根 reducer 将这个新的状态树交还给 store，store 再把自己的状态置为这个最新的状态树。\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*bUMekI8QlEfFxSBCuVuIkw.png)\n\n(7) store 告诉视图层绑定：「状态更新啦」\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*x6vBvUlFJktJqty56jr0QQ.png)\n\n(8) 视图层绑定让 store 把更新的状态传过来\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*qGatznV4QujuxGe49YfX5A.png)\n\n(9) 视图层绑定触发了一个重新渲染的操作（re-render）\n\n![](https://d262ilb51hltx0.cloudfront.net/max/1600/1*Je2mow8mjYLngXreGGlIEg.png)\n\n这就是我所理解的 Redux，希望对你有所帮助。\n\n## 更多资源\n\n - [Redux 官方文档](http://rackt.org/redux/index.html)\n - [Redux 官方文档中文版](https://github.com/camsong/redux-in-chinese)\n - [The Evolution of Flux Frameworks](https://medium.com/@dan_abramov/the-evolution-of-flux-frameworks-6c16ad26bb31)\n - [Smart and Dumb Components](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)\n - [The upsides of using Redux](http://stackoverflow.com/a/32920459)\n - [The downsides of using Redux](http://stackoverflow.com/a/32916602)\n - [如何评价数据流管理架构 Redux?](https://www.zhihu.com/question/38591713/answer/77634014)","slug":"cartoon Redux","published":1,"updated":"2018-11-29T07:54:12.464Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqqjnrxi002cj2s4rg13460r","content":"<h1><span id=\"看漫画学-redux-a-cartoon-intro-to-redux\">《看漫画，学 Redux》 —— A cartoon intro to Redux</span></h1>\n<blockquote>\n<p>不写一行代码，轻松看懂 Redux 原理。 <a href=\"https://code-cartoons.com/a-cartoon-intro-to-redux-3afb775501a6\" target=\"_blank\" rel=\"noopener\">原文</a></p>\n<p>如果你有任何疑惑，不妨在 <a href=\"https://github.com/jasonslyvia/a-cartoon-intro-to-redux-cn/issues\" target=\"_blank\" rel=\"noopener\">Issues</a> 中提出。</p>\n</blockquote>\n<p>Flux 架构已然让人觉得有些迷惑，而比 Flux 更让人摸不着头脑的是 Flux 与 Redux 的区别。Redux 是一个基于 Flux 思想的新架构方式，本文将探讨它们的区别。</p>\n<p>如果你还没有看过<a href=\"https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207\" target=\"_blank\" rel=\"noopener\">这篇关于 Flux 的文章</a>（译者注：也可以参考<a href=\"https://www.zhihu.com/question/33864532/answer/57657275\" target=\"_blank\" rel=\"noopener\">这篇</a>），你应该先阅读一下。</p>\n<a id=\"more\"></a>\n<h2><span id=\"为什么要改变-flux\">为什么要改变 Flux？</span></h2>\n<p>Redux 解决的问题和 Flux 一样，但 Redux 能做的还有更多。</p>\n<p>和 Flux 一样，Redux 让应用的状态变化变得更加可预测。如果你想改变应用的状态，就必须 dispatch 一个 action。你没有办法直接改变应用的状态，因为保存这些状态的东西（称为 store）只有 getter 而没有 setter。对于 Flux 和 Redux 来说，这些概念都是相似的。</p>\n<p>那么为什么要新设计一种架构呢？Redux 的创造者 Dan Abramov 发现了改进 Flux 架构的可能。他想要一个更好的开发者工具来调试 Flux 应用。他发现如果稍微对 Flux 架构进行一些调整，就可以开发出一款更好用的开发者工具，同时依然能享受 Flux 架构带给你的可预测性。</p>\n<p>确切的说，他想要的开发者工具包含了代码热替换（hot reload）和时间旅行（time travel）功能。然而要想在 Flux 架构上实现这些功能，确实有些麻烦。</p>\n<h3><span id=\"问题1store-的代码无法被热替换除非清空当前的状态\">问题1：store 的代码无法被热替换，除非清空当前的状态</span></h3>\n<p>在 Flux 中，store 包含了两样东西：</p>\n<ol>\n<li>改变状态的逻辑</li>\n<li>当前的状态</li>\n</ol>\n<p>在一个 store 中同时保存这两样东西将会导致代码热替换功能出现问题。当你热替换掉 store 的代码想要看看新的状态改变逻辑是否生效时，你就丢失了 store 中保存的当前状态。此外，你还把 store 与 Flux 架构中其它组件产生关系的事件系统搞乱了。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*L66K9uCQjjHmpAwT-a9C5Q.png\" alt=\"\"></p>\n<p><strong>解决方案</strong></p>\n<p>将这两样东西分开处理。让一个对象来保存状态，这个对象在热替换代码的时候不会受到影响。让另一个对象包含所有改变状态的逻辑，这个对象可以被热替换因为它不用关心任何保存状态相关的事情。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*nBsGCWmJTR-Zj7aXeIE8yg.png\" alt=\"\"></p>\n<h3><span id=\"问题2每次触发-action-时状态对象都被直接改写了\">问题2：每次触发 action 时状态对象都被直接改写了</span></h3>\n<p>时间旅行调试法的特性是：你能掌握状态对象的每一次变化，这样的话，你就能轻松的跳回到这个对象之前的某个状态（想象一个撤销功能）。</p>\n<p>要实现这样的功能，每次状态改变之后，你都需要把旧的状态保存在一个数组中。但是由于 JavaScript 的对象引用特性，简单的把一个对象放进数组中并不能实现我们需要的功能。这样做不能创建一个快照（snapshot），而只是创建了一个新的指针指向同一个对象。</p>\n<p>所以要想实现时间旅行特性，每一个状态改变的版本都需要保存在不同的 JavaScript 对象中，这样你才不会不小心改变了某个历史版本的状态。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*4zODv5vgvKsi6Ts7TihsoA.png\" alt=\"\"></p>\n<p><strong>解决方案</strong></p>\n<p>当一个 action 需要 store 响应时，不要直接修改 store 中的状态，而是将状态拷贝一份并在这份拷贝的状态上做出修改。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*wLRhZ0wtI0duLsigdxL1CA.png\" alt=\"\"></p>\n<p>###问题3：没有合适的位置引入第三方插件</p>\n<p>当你在写一些调试性工具时，你希望它们能够更加通用。一个使用该工具的用户应该可以直接引入这个工具而不需要做额外的包装或桥接。</p>\n<p>要实现这样的特性，Flux 架构需要一个扩展点。</p>\n<p>一个简单的例子就是日志。比如说你希望 console.log() 每一个触发的 action 同时 console.log() 这个 action 被响应完成后的状态。在 Flux 中，你只能订阅（subscribe） dispatcher 的更新和每一个 store 的变动。但是这样就侵入了业务代码，这样的日志功能不是一个第三方插件能够轻易实现的。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*MG736zGtLMBbSkhwu4D3cA.png\" alt=\"\"></p>\n<p><strong>解决方案</strong></p>\n<p>将这个架构的部分功能包装进其他的对象中将使得我们的需求变得更容易实现。这些「其他对象」在架构原有的功能基础之上添加了自己的功能。你可以把这种扩展点看做是一个增强器（enhancers）或者高阶对象（higher order objects），亦或者中间件（middleware）。</p>\n<p>此外，使用一个树形结构来组织所有改变状态的逻辑，这样当状态发生改变的时候 store 只会触发一个事件来通知视图层（view），而这一个事件会被整棵树中的所有逻辑处理（译者注：「处理」不代表一定会改变状态，这些改变状态的逻辑本质上是函数，函数内部会根据 action 的类型等来确定是否对状态进行改变）。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*5JaZSc3Jsn9PJY7daEDVDA.png\" alt=\"\"></p>\n<p>*注意：就上述这些问题和解决方案来说，我主要在关注开发者工具这一使用场景。实际上，对 Flux 做出的这些改变在其他场景中也非常有帮助。在上述三点之外，Flux 和 Redux 还有更多的不同点。比如，相比于 Flux，Redux 精简了整个架构的冗余代码，并且复用 store 的逻辑变得更加简单。这里有一个 <a href=\"http://stackoverflow.com/a/32920459\" target=\"_blank\" rel=\"noopener\">Redux 优点的列表</a>可供参考。</p>\n<p>那么让我们来看看 Redux 是怎么让这些特性变为现实的。</p>\n<h2><span id=\"新的角色\">新的角色</span></h2>\n<p>从 Flux 演进到 Redux，整个架构中的角色发生了些许的变化。</p>\n<h3><span id=\"action-creators\">Action creators</span></h3>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*Uljrrh4Z7UiUwk8AjUO9PA.png\" alt=\"\"></p>\n<p>Redux 保留了 Flux 中 action creator 的概念。每当你想要改变应用中的状态时，你就要 dispatch 一个 action，这也是唯一改变状态的方法。</p>\n<p>就像我在<a href=\"https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207\" target=\"_blank\" rel=\"noopener\">这篇关于 Flux 的文章</a>中提到的一样，我把 action creator 看做是一个报务员（负责发电报的人，telegraph operator），你找到 action creator 告诉他你大致上想要传达什么信息，action creator 则会把这些信息格式化为一种标准的格式，以便系统中的其他部分能够理解。</p>\n<p>与 Flux 不同的是，Redux 中的 action creator 不会直接把 action 发送给 dispatcher，而是返回一个格式化好的 JavaScript 对象。</p>\n<h3><span id=\"the-store\">The store</span></h3>\n<p>我把 Flux 中 store 的那一套机制描述为一种控制过度的官僚体系。你不能简单直接的修改状态，而是要求所有的状态改变都必须由 store 亲自产生，还必须要经历 action 分发那种套路。在 Redux 中，store 依然是这么的充满控制欲和官僚主义，但是又有些不一样。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*Gztc7THzxzOgJmGvJ95IQA.png\" alt=\"\"></p>\n<p>在 Flux 中，你可以拥有多个 store，每一个 store 都有自己的统治权。每个 store 都保存着自己对应的那部分状态，以及所有修改这些状态的逻辑。</p>\n<p>而 Redux 中的 store 更喜欢将权力下放，事实上不得不这么做。因为在 Redux 中，你只能有一个 store……所以如果你打算像 Flux 那样让 store 完全独立处理自己的事情，那么在 Redux 中，store 里的工作量将变得非常大。</p>\n<p>因此，Redux 中的 store 首先会保存整个应用的所有状态，然后将「判断哪一部分状态需要改变」的任务分配下去。而以根 reducer（root reducer）为首的 reducer 们将会承担这个任务。</p>\n<p>你可能发现这里好像没有 dispatcher 什么事。是的，虽然看起来有点儿越权，但 Redux 里的 store 已经完全接管了 dispatcher 相关的工作。</p>\n<h3><span id=\"the-reducers\">The reducers</span></h3>\n<p>当 store 需要知道一个 action 触发后状态需要怎么改变时，他会去询问 reducer。根 reducer 会根据状态对象的键（key）将整个状态树进行拆分，然后将拆分后的每一块子状态传到知道该怎么对这块状态进行响应的子 reducer 那里处理。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*Vocy_6Gl9PbFlCIJsE9r3A.png\" alt=\"\"></p>\n<p>我把 reducers 看做是对复印情有独钟的白领们。他们不希望把任何事搞砸，因此他们不会修改任何传递给他们的文件。取而代之的是，他们会对这些文件进行复印，然后在复印件上进行修改。（译者注：当然，当这些修改后的复印件定稿后，他们也不会再去修改这些复印件。）</p>\n<p>这是 Redux 的核心思想之一。不直接修改整个应用的状态树，而是将状态树的每一部分进行拷贝并修改拷贝后的部分，然后将这些部分重新组合成一颗新的状态树。</p>\n<p>子 reducers 会把他们创建的副本传回给根 reducer，而根 reducer 会把这些副本组合起来形成一颗新的状态树。最后根 reducer 将新的状态树传回给 store，store 再将新的状态树设为最终的状态。</p>\n<p>如果你有一个小型应用，你可能只有一个 reducer 对整个状态树进行拷贝并作出修改。又或者你有一个超大的应用，你可能会有若干个 reducers 对整个状态树进行修改。这也是 Flux 和 Redux 的另一处区别。在 Flux 中，store 并不需要与其他 store 产生关联，而且 store 的结构是扁平的。而在 Redux 中，reducers 是有层级结构的。这种层级结构可以有若干层，就像组件的层级结构那样。</p>\n<h3><span id=\"the-views-智能组件smart-components和木偶组件dumb-components\">The views: 智能组件（smart components）和木偶组件(dumb components)</span></h3>\n<p>Flux 拥有控制型视图（controller views） 和常规型视图（regular views）。控制型视图就像是一个经理一样，管理着 store 和子视图（child views）之间的通信。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*TgCkFcjlD9SxSrMvVX3DrA.png\" alt=\"\"></p>\n<p>在 Redux 中，也有一个类似的概念：智能组件和木偶组件。（译者注：在最新的 Redux 文档中，它们分别叫做容器型组件 Container component 和展示型组件 Presentational component）智能组件的职责就像经理一样，但是比起 Flux 中的角色，Redux 对经理的职责有了更多的定义：</p>\n<ul>\n<li>智能组件负责所有的 action 相关的工作。如果智能组件里包含的一个木偶组件需要触发一个 action，智能组件会通过 props 传一个 function 给木偶组件，而木偶组件可以在需要触发 action 时调用这个 function。</li>\n<li>智能组件不定义 CSS 样式。</li>\n<li>智能组件几乎不会产生自己的 DOM 节点，他的工作是组织若干的木偶组件，由木偶组件来生成最终的 DOM 节点。</li>\n</ul>\n<p>木偶组件不会直接依赖 action（译者注：即不会在木偶组件里 <code>require</code> action 相关的文件），因为所有的 action 都会当做 props 传下来。这意味着木偶组件可以被任何一个逻辑不同的 App 拿去使用。同时木偶组件也需要有一定的样式来让自己变得好看一些（当然你可以让木偶组件接受某些 props 作为设置样式的变量）。</p>\n<h3><span id=\"视图层绑定\">视图层绑定</span></h3>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*D1RcVrMV2rp6AH9hk5xZ8g.png\" alt=\"\"></p>\n<p>要把 store 绑定到视图上，Redux 还需要一点帮助。如果你在使用 React，那么你需要使用 react-redux。</p>\n<p>视图绑定工作有点像为组件树服务的 IT 部门。IT 部门确保所有的组件都正确的绑定到 store 上，并处理各种技术上的细节，以确保余下层级的组件对绑定相关的操作毫无感知。</p>\n<p>视图层绑定引入了三个概念：</p>\n<ol>\n<li><code>&lt;Provider&gt;</code> 组件： 这个组件需要包裹在整个组件树的最外层。这个组件让根组件的所有子孙组件能够轻松的使用 <code>connect()</code> 方法绑定 store。</li>\n<li><code>connect()</code>：这是 <code>react-redux</code> 提供的一个方法。如果一个组件想要响应状态的变化，就把自己作为参数传给 connect() 的结果（译者注：connect() 返回的依然是一个函数），connect() 方法会处理与 store 绑定的细节，并通过 selector 确定该绑定 store 中哪一部分的数据。</li>\n<li><code>selector</code>：这是你自己编写的一个函数。这个函数声明了你的组件需要整个 store 中的哪一部分数据作为自己的 props。</li>\n</ol>\n<h3><span id=\"根组件\">根组件</span></h3>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*JXPeiNP-it60-QYKb-p2eQ.png\" alt=\"\"></p>\n<p>所有的 React 应用都存在一个根组件（root component）。他其实就是整个组件树最外层的那个组件，但是在 Redux 中，根组件还要承担额外的任务。</p>\n<p>根组件承担的角色有点像企业中的高管，他将整个团队整合到一起来完成某项任务。他会创建 store，并告诉 store 使用哪些 reducers，并最终完成视图层的绑定。</p>\n<p>当完成整个应用的初始化工作后，根组件的就不再插手整个应用的运行过程了。每一次重新渲染（re-render）都没有根组件什么事，这些活儿都由根组件下面的子组件完成，当然也少不了视图层绑定的功劳。</p>\n<h2><span id=\"redux-完成的运行流程\">Redux 完成的运行流程</span></h2>\n<p>让我们看看上述各个部分是怎样组合成一个可以运行的应用的。</p>\n<h3><span id=\"配置环节\">配置环节</span></h3>\n<p>应用中的不同部分需要在配置环节中整合到一起。</p>\n<p>(1) **准备好 store。**根组件会创建 store，并通过 createStore(reducer) 方法告诉 store 该使用哪个根 reducer。与此同时，根 reducer 也通过 combineReducers() 方法组建了一只向自己汇报的 reducer 团队。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*8_fU31-jNQnQ0dp-wplm5w.png\" alt=\"\"></p>\n<p>(2) **设置 store 和组件之间的通信。**根组件将它所有的子组件包裹在 <code>&lt;Provider&gt;</code> 组件中，并建立了 Provider 与 store 之间的联系。</p>\n<p>Provider 本质上创建了一个用于更新视图组件的网络。那些智能组件通过 connect() 方法连入这个网络，以此确保他们能够获取到状态的更新。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*NYMutQLW8TcEgbO8VNeqHA.png\" alt=\"\"></p>\n<p>(3) **准备好 action callback。**为了让木偶组件更好的处理 action，智能组件可以用 <code>bindActionCreators()</code> 方法来创建 action callback。这样做之后，智能组件就能给木偶组件传入一个回调（callback）。对应的 action 会在木偶组件调用这个回调时被自动 dispatch。（译者注：使用 bindActionCreators() 使得木偶组件无需关心 action 的 type 等信息，只用调用 props 中的某个方法传入需要的参数作为 action 的 payload 即可）</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*aVoD3gGddKUy3VCxwylthQ.png\" alt=\"\"></p>\n<h3><span id=\"数据流\">数据流</span></h3>\n<p>现在我们的应用已经配置完成，用户可以开始操作了。让我们触发一个 action，看看数据是怎样流动的。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*GNDs7SY53lEhp7mX8V25lw.png\" alt=\"\"></p>\n<p>(1) 视图发出了一个 action，action creator 将这个 action 格式化并返回。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*p4EkWE_8upZ97Z0IapKDcQ.png\" alt=\"\"></p>\n<p>(2) 这个 action 要么被自动 dispatch（如果我们在配置阶段使用了 bindActionCreators()），要么由视图层手动 dispatch。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*zmFp3bmDq7b6Bvlo8Ineag.png\" alt=\"\"></p>\n<p>(3) store 接受到这个 action 后，将当前的状态树和这个 action 传给根 reducer。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*zrsSoAAyf4pqTMHiA6P8Ww.png\" alt=\"\"></p>\n<p>(4) 根 reducer 将整个状态树切分成一个个小块，然后将某一个小块分发给知道怎么处理这部分内容的子 reducer。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*-S_dYe6BoQBgwSRpF7Hriw.png\" alt=\"\"></p>\n<p>(5) 子 reducer 将传入的一小块状态树进行拷贝，然后在副本上进行修改，并最终将修改后的副本返回根 reducer。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*_R-rGNfKr2Xu2FlXNZNPJg.png\" alt=\"\"></p>\n<p>(6) 当所有的子 reducer 返回他们修改的副本之后，根 reducer 将这些部分再次组合起来形成一颗新的状态树。然后根 reducer 将这个新的状态树交还给 store，store 再把自己的状态置为这个最新的状态树。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*bUMekI8QlEfFxSBCuVuIkw.png\" alt=\"\"></p>\n<p>(7) store 告诉视图层绑定：「状态更新啦」</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*x6vBvUlFJktJqty56jr0QQ.png\" alt=\"\"></p>\n<p>(8) 视图层绑定让 store 把更新的状态传过来</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*qGatznV4QujuxGe49YfX5A.png\" alt=\"\"></p>\n<p>(9) 视图层绑定触发了一个重新渲染的操作（re-render）</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*Je2mow8mjYLngXreGGlIEg.png\" alt=\"\"></p>\n<p>这就是我所理解的 Redux，希望对你有所帮助。</p>\n<h2><span id=\"更多资源\">更多资源</span></h2>\n<ul>\n<li><a href=\"http://rackt.org/redux/index.html\" target=\"_blank\" rel=\"noopener\">Redux 官方文档</a></li>\n<li><a href=\"https://github.com/camsong/redux-in-chinese\" target=\"_blank\" rel=\"noopener\">Redux 官方文档中文版</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/the-evolution-of-flux-frameworks-6c16ad26bb31\" target=\"_blank\" rel=\"noopener\">The Evolution of Flux Frameworks</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0\" target=\"_blank\" rel=\"noopener\">Smart and Dumb Components</a></li>\n<li><a href=\"http://stackoverflow.com/a/32920459\" target=\"_blank\" rel=\"noopener\">The upsides of using Redux</a></li>\n<li><a href=\"http://stackoverflow.com/a/32916602\" target=\"_blank\" rel=\"noopener\">The downsides of using Redux</a></li>\n<li><a href=\"https://www.zhihu.com/question/38591713/answer/77634014\" target=\"_blank\" rel=\"noopener\">如何评价数据流管理架构 Redux?</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<h1>《看漫画，学 Redux》 —— A cartoon intro to Redux</h1>\n<blockquote>\n<p>不写一行代码，轻松看懂 Redux 原理。 <a href=\"https://code-cartoons.com/a-cartoon-intro-to-redux-3afb775501a6\" target=\"_blank\" rel=\"noopener\">原文</a></p>\n<p>如果你有任何疑惑，不妨在 <a href=\"https://github.com/jasonslyvia/a-cartoon-intro-to-redux-cn/issues\" target=\"_blank\" rel=\"noopener\">Issues</a> 中提出。</p>\n</blockquote>\n<p>Flux 架构已然让人觉得有些迷惑，而比 Flux 更让人摸不着头脑的是 Flux 与 Redux 的区别。Redux 是一个基于 Flux 思想的新架构方式，本文将探讨它们的区别。</p>\n<p>如果你还没有看过<a href=\"https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207\" target=\"_blank\" rel=\"noopener\">这篇关于 Flux 的文章</a>（译者注：也可以参考<a href=\"https://www.zhihu.com/question/33864532/answer/57657275\" target=\"_blank\" rel=\"noopener\">这篇</a>），你应该先阅读一下。</p>","more":"<h2>为什么要改变 Flux？</h2>\n<p>Redux 解决的问题和 Flux 一样，但 Redux 能做的还有更多。</p>\n<p>和 Flux 一样，Redux 让应用的状态变化变得更加可预测。如果你想改变应用的状态，就必须 dispatch 一个 action。你没有办法直接改变应用的状态，因为保存这些状态的东西（称为 store）只有 getter 而没有 setter。对于 Flux 和 Redux 来说，这些概念都是相似的。</p>\n<p>那么为什么要新设计一种架构呢？Redux 的创造者 Dan Abramov 发现了改进 Flux 架构的可能。他想要一个更好的开发者工具来调试 Flux 应用。他发现如果稍微对 Flux 架构进行一些调整，就可以开发出一款更好用的开发者工具，同时依然能享受 Flux 架构带给你的可预测性。</p>\n<p>确切的说，他想要的开发者工具包含了代码热替换（hot reload）和时间旅行（time travel）功能。然而要想在 Flux 架构上实现这些功能，确实有些麻烦。</p>\n<h3>问题1：store 的代码无法被热替换，除非清空当前的状态</h3>\n<p>在 Flux 中，store 包含了两样东西：</p>\n<ol>\n<li>改变状态的逻辑</li>\n<li>当前的状态</li>\n</ol>\n<p>在一个 store 中同时保存这两样东西将会导致代码热替换功能出现问题。当你热替换掉 store 的代码想要看看新的状态改变逻辑是否生效时，你就丢失了 store 中保存的当前状态。此外，你还把 store 与 Flux 架构中其它组件产生关系的事件系统搞乱了。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*L66K9uCQjjHmpAwT-a9C5Q.png\" alt=\"\"></p>\n<p><strong>解决方案</strong></p>\n<p>将这两样东西分开处理。让一个对象来保存状态，这个对象在热替换代码的时候不会受到影响。让另一个对象包含所有改变状态的逻辑，这个对象可以被热替换因为它不用关心任何保存状态相关的事情。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*nBsGCWmJTR-Zj7aXeIE8yg.png\" alt=\"\"></p>\n<h3>问题2：每次触发 action 时状态对象都被直接改写了</h3>\n<p>时间旅行调试法的特性是：你能掌握状态对象的每一次变化，这样的话，你就能轻松的跳回到这个对象之前的某个状态（想象一个撤销功能）。</p>\n<p>要实现这样的功能，每次状态改变之后，你都需要把旧的状态保存在一个数组中。但是由于 JavaScript 的对象引用特性，简单的把一个对象放进数组中并不能实现我们需要的功能。这样做不能创建一个快照（snapshot），而只是创建了一个新的指针指向同一个对象。</p>\n<p>所以要想实现时间旅行特性，每一个状态改变的版本都需要保存在不同的 JavaScript 对象中，这样你才不会不小心改变了某个历史版本的状态。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*4zODv5vgvKsi6Ts7TihsoA.png\" alt=\"\"></p>\n<p><strong>解决方案</strong></p>\n<p>当一个 action 需要 store 响应时，不要直接修改 store 中的状态，而是将状态拷贝一份并在这份拷贝的状态上做出修改。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*wLRhZ0wtI0duLsigdxL1CA.png\" alt=\"\"></p>\n<p>###问题3：没有合适的位置引入第三方插件</p>\n<p>当你在写一些调试性工具时，你希望它们能够更加通用。一个使用该工具的用户应该可以直接引入这个工具而不需要做额外的包装或桥接。</p>\n<p>要实现这样的特性，Flux 架构需要一个扩展点。</p>\n<p>一个简单的例子就是日志。比如说你希望 console.log() 每一个触发的 action 同时 console.log() 这个 action 被响应完成后的状态。在 Flux 中，你只能订阅（subscribe） dispatcher 的更新和每一个 store 的变动。但是这样就侵入了业务代码，这样的日志功能不是一个第三方插件能够轻易实现的。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*MG736zGtLMBbSkhwu4D3cA.png\" alt=\"\"></p>\n<p><strong>解决方案</strong></p>\n<p>将这个架构的部分功能包装进其他的对象中将使得我们的需求变得更容易实现。这些「其他对象」在架构原有的功能基础之上添加了自己的功能。你可以把这种扩展点看做是一个增强器（enhancers）或者高阶对象（higher order objects），亦或者中间件（middleware）。</p>\n<p>此外，使用一个树形结构来组织所有改变状态的逻辑，这样当状态发生改变的时候 store 只会触发一个事件来通知视图层（view），而这一个事件会被整棵树中的所有逻辑处理（译者注：「处理」不代表一定会改变状态，这些改变状态的逻辑本质上是函数，函数内部会根据 action 的类型等来确定是否对状态进行改变）。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*5JaZSc3Jsn9PJY7daEDVDA.png\" alt=\"\"></p>\n<p>*注意：就上述这些问题和解决方案来说，我主要在关注开发者工具这一使用场景。实际上，对 Flux 做出的这些改变在其他场景中也非常有帮助。在上述三点之外，Flux 和 Redux 还有更多的不同点。比如，相比于 Flux，Redux 精简了整个架构的冗余代码，并且复用 store 的逻辑变得更加简单。这里有一个 <a href=\"http://stackoverflow.com/a/32920459\" target=\"_blank\" rel=\"noopener\">Redux 优点的列表</a>可供参考。</p>\n<p>那么让我们来看看 Redux 是怎么让这些特性变为现实的。</p>\n<h2>新的角色</h2>\n<p>从 Flux 演进到 Redux，整个架构中的角色发生了些许的变化。</p>\n<h3>Action creators</h3>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*Uljrrh4Z7UiUwk8AjUO9PA.png\" alt=\"\"></p>\n<p>Redux 保留了 Flux 中 action creator 的概念。每当你想要改变应用中的状态时，你就要 dispatch 一个 action，这也是唯一改变状态的方法。</p>\n<p>就像我在<a href=\"https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207\" target=\"_blank\" rel=\"noopener\">这篇关于 Flux 的文章</a>中提到的一样，我把 action creator 看做是一个报务员（负责发电报的人，telegraph operator），你找到 action creator 告诉他你大致上想要传达什么信息，action creator 则会把这些信息格式化为一种标准的格式，以便系统中的其他部分能够理解。</p>\n<p>与 Flux 不同的是，Redux 中的 action creator 不会直接把 action 发送给 dispatcher，而是返回一个格式化好的 JavaScript 对象。</p>\n<h3>The store</h3>\n<p>我把 Flux 中 store 的那一套机制描述为一种控制过度的官僚体系。你不能简单直接的修改状态，而是要求所有的状态改变都必须由 store 亲自产生，还必须要经历 action 分发那种套路。在 Redux 中，store 依然是这么的充满控制欲和官僚主义，但是又有些不一样。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*Gztc7THzxzOgJmGvJ95IQA.png\" alt=\"\"></p>\n<p>在 Flux 中，你可以拥有多个 store，每一个 store 都有自己的统治权。每个 store 都保存着自己对应的那部分状态，以及所有修改这些状态的逻辑。</p>\n<p>而 Redux 中的 store 更喜欢将权力下放，事实上不得不这么做。因为在 Redux 中，你只能有一个 store……所以如果你打算像 Flux 那样让 store 完全独立处理自己的事情，那么在 Redux 中，store 里的工作量将变得非常大。</p>\n<p>因此，Redux 中的 store 首先会保存整个应用的所有状态，然后将「判断哪一部分状态需要改变」的任务分配下去。而以根 reducer（root reducer）为首的 reducer 们将会承担这个任务。</p>\n<p>你可能发现这里好像没有 dispatcher 什么事。是的，虽然看起来有点儿越权，但 Redux 里的 store 已经完全接管了 dispatcher 相关的工作。</p>\n<h3>The reducers</h3>\n<p>当 store 需要知道一个 action 触发后状态需要怎么改变时，他会去询问 reducer。根 reducer 会根据状态对象的键（key）将整个状态树进行拆分，然后将拆分后的每一块子状态传到知道该怎么对这块状态进行响应的子 reducer 那里处理。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*Vocy_6Gl9PbFlCIJsE9r3A.png\" alt=\"\"></p>\n<p>我把 reducers 看做是对复印情有独钟的白领们。他们不希望把任何事搞砸，因此他们不会修改任何传递给他们的文件。取而代之的是，他们会对这些文件进行复印，然后在复印件上进行修改。（译者注：当然，当这些修改后的复印件定稿后，他们也不会再去修改这些复印件。）</p>\n<p>这是 Redux 的核心思想之一。不直接修改整个应用的状态树，而是将状态树的每一部分进行拷贝并修改拷贝后的部分，然后将这些部分重新组合成一颗新的状态树。</p>\n<p>子 reducers 会把他们创建的副本传回给根 reducer，而根 reducer 会把这些副本组合起来形成一颗新的状态树。最后根 reducer 将新的状态树传回给 store，store 再将新的状态树设为最终的状态。</p>\n<p>如果你有一个小型应用，你可能只有一个 reducer 对整个状态树进行拷贝并作出修改。又或者你有一个超大的应用，你可能会有若干个 reducers 对整个状态树进行修改。这也是 Flux 和 Redux 的另一处区别。在 Flux 中，store 并不需要与其他 store 产生关联，而且 store 的结构是扁平的。而在 Redux 中，reducers 是有层级结构的。这种层级结构可以有若干层，就像组件的层级结构那样。</p>\n<h3>The views: 智能组件（smart components）和木偶组件(dumb components)</h3>\n<p>Flux 拥有控制型视图（controller views） 和常规型视图（regular views）。控制型视图就像是一个经理一样，管理着 store 和子视图（child views）之间的通信。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*TgCkFcjlD9SxSrMvVX3DrA.png\" alt=\"\"></p>\n<p>在 Redux 中，也有一个类似的概念：智能组件和木偶组件。（译者注：在最新的 Redux 文档中，它们分别叫做容器型组件 Container component 和展示型组件 Presentational component）智能组件的职责就像经理一样，但是比起 Flux 中的角色，Redux 对经理的职责有了更多的定义：</p>\n<ul>\n<li>智能组件负责所有的 action 相关的工作。如果智能组件里包含的一个木偶组件需要触发一个 action，智能组件会通过 props 传一个 function 给木偶组件，而木偶组件可以在需要触发 action 时调用这个 function。</li>\n<li>智能组件不定义 CSS 样式。</li>\n<li>智能组件几乎不会产生自己的 DOM 节点，他的工作是组织若干的木偶组件，由木偶组件来生成最终的 DOM 节点。</li>\n</ul>\n<p>木偶组件不会直接依赖 action（译者注：即不会在木偶组件里 <code>require</code> action 相关的文件），因为所有的 action 都会当做 props 传下来。这意味着木偶组件可以被任何一个逻辑不同的 App 拿去使用。同时木偶组件也需要有一定的样式来让自己变得好看一些（当然你可以让木偶组件接受某些 props 作为设置样式的变量）。</p>\n<h3>视图层绑定</h3>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*D1RcVrMV2rp6AH9hk5xZ8g.png\" alt=\"\"></p>\n<p>要把 store 绑定到视图上，Redux 还需要一点帮助。如果你在使用 React，那么你需要使用 react-redux。</p>\n<p>视图绑定工作有点像为组件树服务的 IT 部门。IT 部门确保所有的组件都正确的绑定到 store 上，并处理各种技术上的细节，以确保余下层级的组件对绑定相关的操作毫无感知。</p>\n<p>视图层绑定引入了三个概念：</p>\n<ol>\n<li><code>&lt;Provider&gt;</code> 组件： 这个组件需要包裹在整个组件树的最外层。这个组件让根组件的所有子孙组件能够轻松的使用 <code>connect()</code> 方法绑定 store。</li>\n<li><code>connect()</code>：这是 <code>react-redux</code> 提供的一个方法。如果一个组件想要响应状态的变化，就把自己作为参数传给 connect() 的结果（译者注：connect() 返回的依然是一个函数），connect() 方法会处理与 store 绑定的细节，并通过 selector 确定该绑定 store 中哪一部分的数据。</li>\n<li><code>selector</code>：这是你自己编写的一个函数。这个函数声明了你的组件需要整个 store 中的哪一部分数据作为自己的 props。</li>\n</ol>\n<h3>根组件</h3>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1200/1*JXPeiNP-it60-QYKb-p2eQ.png\" alt=\"\"></p>\n<p>所有的 React 应用都存在一个根组件（root component）。他其实就是整个组件树最外层的那个组件，但是在 Redux 中，根组件还要承担额外的任务。</p>\n<p>根组件承担的角色有点像企业中的高管，他将整个团队整合到一起来完成某项任务。他会创建 store，并告诉 store 使用哪些 reducers，并最终完成视图层的绑定。</p>\n<p>当完成整个应用的初始化工作后，根组件的就不再插手整个应用的运行过程了。每一次重新渲染（re-render）都没有根组件什么事，这些活儿都由根组件下面的子组件完成，当然也少不了视图层绑定的功劳。</p>\n<h2>Redux 完成的运行流程</h2>\n<p>让我们看看上述各个部分是怎样组合成一个可以运行的应用的。</p>\n<h3>配置环节</h3>\n<p>应用中的不同部分需要在配置环节中整合到一起。</p>\n<p>(1) **准备好 store。**根组件会创建 store，并通过 createStore(reducer) 方法告诉 store 该使用哪个根 reducer。与此同时，根 reducer 也通过 combineReducers() 方法组建了一只向自己汇报的 reducer 团队。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*8_fU31-jNQnQ0dp-wplm5w.png\" alt=\"\"></p>\n<p>(2) **设置 store 和组件之间的通信。**根组件将它所有的子组件包裹在 <code>&lt;Provider&gt;</code> 组件中，并建立了 Provider 与 store 之间的联系。</p>\n<p>Provider 本质上创建了一个用于更新视图组件的网络。那些智能组件通过 connect() 方法连入这个网络，以此确保他们能够获取到状态的更新。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*NYMutQLW8TcEgbO8VNeqHA.png\" alt=\"\"></p>\n<p>(3) **准备好 action callback。**为了让木偶组件更好的处理 action，智能组件可以用 <code>bindActionCreators()</code> 方法来创建 action callback。这样做之后，智能组件就能给木偶组件传入一个回调（callback）。对应的 action 会在木偶组件调用这个回调时被自动 dispatch。（译者注：使用 bindActionCreators() 使得木偶组件无需关心 action 的 type 等信息，只用调用 props 中的某个方法传入需要的参数作为 action 的 payload 即可）</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*aVoD3gGddKUy3VCxwylthQ.png\" alt=\"\"></p>\n<h3>数据流</h3>\n<p>现在我们的应用已经配置完成，用户可以开始操作了。让我们触发一个 action，看看数据是怎样流动的。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*GNDs7SY53lEhp7mX8V25lw.png\" alt=\"\"></p>\n<p>(1) 视图发出了一个 action，action creator 将这个 action 格式化并返回。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*p4EkWE_8upZ97Z0IapKDcQ.png\" alt=\"\"></p>\n<p>(2) 这个 action 要么被自动 dispatch（如果我们在配置阶段使用了 bindActionCreators()），要么由视图层手动 dispatch。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*zmFp3bmDq7b6Bvlo8Ineag.png\" alt=\"\"></p>\n<p>(3) store 接受到这个 action 后，将当前的状态树和这个 action 传给根 reducer。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*zrsSoAAyf4pqTMHiA6P8Ww.png\" alt=\"\"></p>\n<p>(4) 根 reducer 将整个状态树切分成一个个小块，然后将某一个小块分发给知道怎么处理这部分内容的子 reducer。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*-S_dYe6BoQBgwSRpF7Hriw.png\" alt=\"\"></p>\n<p>(5) 子 reducer 将传入的一小块状态树进行拷贝，然后在副本上进行修改，并最终将修改后的副本返回根 reducer。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*_R-rGNfKr2Xu2FlXNZNPJg.png\" alt=\"\"></p>\n<p>(6) 当所有的子 reducer 返回他们修改的副本之后，根 reducer 将这些部分再次组合起来形成一颗新的状态树。然后根 reducer 将这个新的状态树交还给 store，store 再把自己的状态置为这个最新的状态树。</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*bUMekI8QlEfFxSBCuVuIkw.png\" alt=\"\"></p>\n<p>(7) store 告诉视图层绑定：「状态更新啦」</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*x6vBvUlFJktJqty56jr0QQ.png\" alt=\"\"></p>\n<p>(8) 视图层绑定让 store 把更新的状态传过来</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*qGatznV4QujuxGe49YfX5A.png\" alt=\"\"></p>\n<p>(9) 视图层绑定触发了一个重新渲染的操作（re-render）</p>\n<p><img src=\"https://d262ilb51hltx0.cloudfront.net/max/1600/1*Je2mow8mjYLngXreGGlIEg.png\" alt=\"\"></p>\n<p>这就是我所理解的 Redux，希望对你有所帮助。</p>\n<h2>更多资源</h2>\n<ul>\n<li><a href=\"http://rackt.org/redux/index.html\" target=\"_blank\" rel=\"noopener\">Redux 官方文档</a></li>\n<li><a href=\"https://github.com/camsong/redux-in-chinese\" target=\"_blank\" rel=\"noopener\">Redux 官方文档中文版</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/the-evolution-of-flux-frameworks-6c16ad26bb31\" target=\"_blank\" rel=\"noopener\">The Evolution of Flux Frameworks</a></li>\n<li><a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0\" target=\"_blank\" rel=\"noopener\">Smart and Dumb Components</a></li>\n<li><a href=\"http://stackoverflow.com/a/32920459\" target=\"_blank\" rel=\"noopener\">The upsides of using Redux</a></li>\n<li><a href=\"http://stackoverflow.com/a/32916602\" target=\"_blank\" rel=\"noopener\">The downsides of using Redux</a></li>\n<li><a href=\"https://www.zhihu.com/question/38591713/answer/77634014\" target=\"_blank\" rel=\"noopener\">如何评价数据流管理架构 Redux?</a></li>\n</ul>"}],"PostAsset":[{"_id":"source/_posts/hexo-theme-beantech/home_posts_tag-false.png","slug":"home_posts_tag-false.png","post":"cjqqjnrv70009j2s4tm4zc0es","modified":0,"renderable":0},{"_id":"source/_posts/hexo-theme-beantech/Demo.png","slug":"Demo.png","post":"cjqqjnrv70009j2s4tm4zc0es","modified":0,"renderable":0},{"_id":"source/_posts/hexo-theme-beantech/home_posts_tag-true.png","slug":"home_posts_tag-true.png","post":"cjqqjnrv70009j2s4tm4zc0es","modified":0,"renderable":0}],"PostCategory":[],"PostTag":[{"post_id":"cjqqjnruo0001j2s4cqwebq0h","tag_id":"cjqqjnrux0005j2s4n7a0f8ih","_id":"cjqqjnrw1000oj2s4vpfufow3"},{"post_id":"cjqqjnruo0001j2s4cqwebq0h","tag_id":"cjqqjnrva000aj2s4fry2igwt","_id":"cjqqjnrw1000pj2s41cyw932n"},{"post_id":"cjqqjnruo0001j2s4cqwebq0h","tag_id":"cjqqjnrvj000dj2s45lb53260","_id":"cjqqjnrw2000rj2s4yat0r93i"},{"post_id":"cjqqjnruo0001j2s4cqwebq0h","tag_id":"cjqqjnrvt000gj2s43usudy9c","_id":"cjqqjnrw2000sj2s4rmxm1n1m"},{"post_id":"cjqqjnruo0001j2s4cqwebq0h","tag_id":"cjqqjnrvx000jj2s44lraobrk","_id":"cjqqjnrw2000uj2s473a6n86g"},{"post_id":"cjqqjnruu0003j2s4c779594j","tag_id":"cjqqjnrw1000nj2s4veprcnq7","_id":"cjqqjnrw4000wj2s41hrygdj7"},{"post_id":"cjqqjnruu0003j2s4c779594j","tag_id":"cjqqjnrw2000qj2s4x8yjmrjc","_id":"cjqqjnrw5000xj2s4kdbeg3x6"},{"post_id":"cjqqjnruu0003j2s4c779594j","tag_id":"cjqqjnrw2000tj2s4a2it62cw","_id":"cjqqjnrw5000zj2s4xq2i9y80"},{"post_id":"cjqqjnrv00006j2s4o0lorwfh","tag_id":"cjqqjnrw1000nj2s4veprcnq7","_id":"cjqqjnrw60012j2s4ubj8wqen"},{"post_id":"cjqqjnrv00006j2s4o0lorwfh","tag_id":"cjqqjnrw5000yj2s4sijbp6qv","_id":"cjqqjnrw60013j2s4iaickdi7"},{"post_id":"cjqqjnrv00006j2s4o0lorwfh","tag_id":"cjqqjnrw50010j2s4xxyia9ep","_id":"cjqqjnrw60015j2s4d49yj9jj"},{"post_id":"cjqqjnrv30008j2s48wyracqs","tag_id":"cjqqjnrw60011j2s4s4uz5tnz","_id":"cjqqjnrw70017j2s4wkj9rxj5"},{"post_id":"cjqqjnrv30008j2s48wyracqs","tag_id":"cjqqjnrw60014j2s41q6jf57t","_id":"cjqqjnrw70018j2s4cqdgllp0"},{"post_id":"cjqqjnrv70009j2s4tm4zc0es","tag_id":"cjqqjnrw70016j2s4aacw2s7d","_id":"cjqqjnrw8001bj2s4woalagvb"},{"post_id":"cjqqjnrv70009j2s4tm4zc0es","tag_id":"cjqqjnrw70019j2s4p00wnyqe","_id":"cjqqjnrw8001cj2s44pl4fg6l"},{"post_id":"cjqqjnrvb000bj2s4z4keqhdq","tag_id":"cjqqjnrw1000nj2s4veprcnq7","_id":"cjqqjnrw9001fj2s4nvn9d6hx"},{"post_id":"cjqqjnrvb000bj2s4z4keqhdq","tag_id":"cjqqjnrw8001dj2s4asdsx8zv","_id":"cjqqjnrw9001gj2s4qos0slo7"},{"post_id":"cjqqjnrvh000cj2s4xgqd2vxr","tag_id":"cjqqjnrw9001ej2s4616nkfqo","_id":"cjqqjnrwb001kj2s4g52bn1l4"},{"post_id":"cjqqjnrvh000cj2s4xgqd2vxr","tag_id":"cjqqjnrw9001hj2s43ssxzfhc","_id":"cjqqjnrwb001lj2s4d4p22r5y"},{"post_id":"cjqqjnrvh000cj2s4xgqd2vxr","tag_id":"cjqqjnrwa001ij2s41fmu7l6i","_id":"cjqqjnrwb001nj2s4uurtclgs"},{"post_id":"cjqqjnrvq000ej2s4vlga3tl0","tag_id":"cjqqjnrw1000nj2s4veprcnq7","_id":"cjqqjnrwc001qj2s4rj9su55r"},{"post_id":"cjqqjnrvq000ej2s4vlga3tl0","tag_id":"cjqqjnrwb001mj2s4oyguiuq0","_id":"cjqqjnrwd001rj2s42gtiwb4r"},{"post_id":"cjqqjnrvq000ej2s4vlga3tl0","tag_id":"cjqqjnrwb001oj2s4xx7vdzx9","_id":"cjqqjnrwd001tj2s4jpq7d4yk"},{"post_id":"cjqqjnrvt000hj2s4qmx248q5","tag_id":"cjqqjnrw1000nj2s4veprcnq7","_id":"cjqqjnrwe001vj2s4fgf1qw4b"},{"post_id":"cjqqjnrvt000hj2s4qmx248q5","tag_id":"cjqqjnrwd001sj2s4quyj83yk","_id":"cjqqjnrwe001wj2s49yzr4hi5"},{"post_id":"cjqqjnrvv000ij2s4l78w9rct","tag_id":"cjqqjnrw1000nj2s4veprcnq7","_id":"cjqqjnrwf001zj2s40on0tdyl"},{"post_id":"cjqqjnrvv000ij2s4l78w9rct","tag_id":"cjqqjnrux0005j2s4n7a0f8ih","_id":"cjqqjnrwf0020j2s468j348ry"},{"post_id":"cjqqjnrvv000ij2s4l78w9rct","tag_id":"cjqqjnrva000aj2s4fry2igwt","_id":"cjqqjnrwg0022j2s45jq4yoyj"},{"post_id":"cjqqjnrvv000ij2s4l78w9rct","tag_id":"cjqqjnrwe001xj2s4h9g37cr5","_id":"cjqqjnrwg0023j2s4ba2upu7w"},{"post_id":"cjqqjnrvx000kj2s4f71d9j8m","tag_id":"cjqqjnrux0005j2s4n7a0f8ih","_id":"cjqqjnrwg0024j2s4kqhxnbda"},{"post_id":"cjqqjnrvx000kj2s4f71d9j8m","tag_id":"cjqqjnrva000aj2s4fry2igwt","_id":"cjqqjnrwh0025j2s44on7lnmt"},{"post_id":"cjqqjnrvx000kj2s4f71d9j8m","tag_id":"cjqqjnrvj000dj2s45lb53260","_id":"cjqqjnrwh0026j2s4h7tbkpfp"},{"post_id":"cjqqjnrvx000kj2s4f71d9j8m","tag_id":"cjqqjnrvt000gj2s43usudy9c","_id":"cjqqjnrwh0027j2s4chnz74xz"},{"post_id":"cjqqjnrvx000kj2s4f71d9j8m","tag_id":"cjqqjnrvx000jj2s44lraobrk","_id":"cjqqjnrwh0028j2s4v5yjw6kx"},{"post_id":"cjqqjnrvy000lj2s4wnyij02z","tag_id":"cjqqjnrwf0021j2s4qm4f75ui","_id":"cjqqjnrwh0029j2s46r6wlksj"},{"post_id":"cjqqjnrx8002aj2s4us57jfmw","tag_id":"cjqqjnrw1000nj2s4veprcnq7","_id":"cjqqjnrxa002bj2s43dr8sgo8"},{"post_id":"cjqqjnrxi002cj2s4rg13460r","tag_id":"cjqqjnrw1000nj2s4veprcnq7","_id":"cjqqjnrxm002ej2s4kqdjrz7h"},{"post_id":"cjqqjnrxi002cj2s4rg13460r","tag_id":"cjqqjnrxl002dj2s4n75du7rn","_id":"cjqqjnrxm002fj2s4b7ddmjyo"}],"Tag":[{"name":"html","_id":"cjqqjnrux0005j2s4n7a0f8ih"},{"name":"css","_id":"cjqqjnrva000aj2s4fry2igwt"},{"name":"float","_id":"cjqqjnrvj000dj2s45lb53260"},{"name":"clear","_id":"cjqqjnrvt000gj2s43usudy9c"},{"name":"BFC","_id":"cjqqjnrvx000jj2s44lraobrk"},{"name":"javascript","_id":"cjqqjnrw1000nj2s4veprcnq7"},{"name":"React","_id":"cjqqjnrw2000qj2s4x8yjmrjc"},{"name":"jsx","_id":"cjqqjnrw2000tj2s4a2it62cw"},{"name":"object","_id":"cjqqjnrw5000yj2s4sijbp6qv"},{"name":"location","_id":"cjqqjnrw50010j2s4xxyia9ep"},{"name":"html5","_id":"cjqqjnrw60011j2s4s4uz5tnz"},{"name":"contenteditable","_id":"cjqqjnrw60014j2s41q6jf57t"},{"name":"Hexo","_id":"cjqqjnrw70016j2s4aacw2s7d"},{"name":"Blog","_id":"cjqqjnrw70019j2s4p00wnyqe"},{"name":"react-native","_id":"cjqqjnrw8001dj2s4asdsx8zv"},{"name":"ffmpeg","_id":"cjqqjnrw9001ej2s4616nkfqo"},{"name":"视频剪辑","_id":"cjqqjnrw9001hj2s43ssxzfhc"},{"name":"shell","_id":"cjqqjnrwa001ij2s41fmu7l6i"},{"name":"ueditor","_id":"cjqqjnrwb001mj2s4oyguiuq0"},{"name":"富文本编辑器","_id":"cjqqjnrwb001oj2s4xx7vdzx9"},{"name":"string","_id":"cjqqjnrwd001sj2s4quyj83yk"},{"name":"canvas","_id":"cjqqjnrwe001xj2s4h9g37cr5"},{"name":"【vue, props, watch】","_id":"cjqqjnrwf0021j2s4qm4f75ui"},{"name":"redux","_id":"cjqqjnrxl002dj2s4n75du7rn"}]}}